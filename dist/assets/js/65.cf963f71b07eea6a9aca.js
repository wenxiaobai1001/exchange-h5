webpackJsonp([65],{"f8N+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{PageHeader:s("JCuE").a},data(){return{formInline:{oldPw:"",newMPw:"",newMPwConfirm:"",vailCode:""},codedisabled:!1,sendcodeValue:this.$t("uc.regist.sendcode"),sendMsgDisabled:!1,captchaObj:null,modal1:!1,time:60,ruleInline:{vailCode:[{required:!0,message:this.$t("uc.safe.codetip"),trigger:"blur"}],oldPw:[{required:!0,type:"string",min:6,message:this.$t("uc.safe.oldpwdtip"),trigger:"blur"}],newMPw:[{required:!0,type:"string",min:6,message:this.$t("uc.safe.newpwdmsg1"),trigger:"blur"},{validator:(e,t,s)=>{""===t?s(new Error(this.$t("uc.safe.newpwdmsg1"))):/([a-zA-Z0-9]){6,18}/.test(t)?s():s(new Error(this.$t("uc.safe.newpwdmsg1")))},trigger:"blur"}],newMPwConfirm:[{required:!0,type:"string",min:6,message:this.$t("uc.safe.newpwdmsg2"),trigger:"blur"},{validator:(e,t,s)=>{""===t?s(new Error(this.$t("uc.safe.newpwdmsg2"))):/([a-zA-Z0-9]){6,18}/.test(t)?t!==this.formInline.newMPw?s(new Error(this.$t("uc.safe.newpwdmsg2"))):s():s(new Error(this.$t("uc.safe.newpwdmsg2")))},trigger:"blur"}]},key:"",code:""}},watch:{changeActive:function(e){this.$refs.formInline.resetFields()}},created:function(){},computed:{isLogin:function(){return this.$store.getters.isLogin}},methods:{send(){this.$http.post(this.host+"/uc/reset/email/codeNew").then(e=>{var t=e.body;if(0==t.code){this.sendMsgDisabled=!0,this.$Message.success(t.message);let e=setInterval(()=>{this.time--<=0&&(this.time=60,this.sendMsgDisabled=!1,clearInterval(e))},1e3)}else this.$Message.error(t.message)})},sendSMS(){this.afterValidate()},handleSubmit(e){this.$refs[e].validate(e=>{if(e){let e={};e.oldPassword=this.formInline.oldPw,e.newPassword=this.formInline.newMPw,e.code=this.formInline.vailCode,this.$http.post(this.host+"/uc/approve/update/password/email",e).then(e=>{var t=e.body;if(0==t.code){this.$Message.success(this.$t("uc.safe.save_success")),localStorage.removeItem("MEMBER"),localStorage.removeItem("TOKEN"),this.$store.state.showLogout=!0,this.$store.state.showLogin=!1;let e=this;setTimeout(()=>{e.$router.push("/login")},1e3)}else this.$Message.error(t.message)})}else this.$Message.error(this.$t("uc.safe.save_failure"))})},handleReset(e){this.$refs.formInline.resetFields()}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-home"},[s("PageHeader",{attrs:{isShowBack:!0,title:e.$t("uc.safe.loginpwd")}}),e._v(" "),s("div",{staticClass:"page-content"},[s("div",{staticClass:"page-password"},[s("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[s("Row",[s("FormItem",{attrs:{label:e.$t("uc.safe.oldpwd"),prop:"oldPw"}},[s("Input",{attrs:{size:"large",type:"password"},model:{value:e.formInline.oldPw,callback:function(t){e.$set(e.formInline,"oldPw",t)},expression:"formInline.oldPw"}})],1)],1),e._v(" "),s("Row",[s("FormItem",{attrs:{label:e.$t("uc.safe.newpwd"),prop:"newMPw"}},[s("Input",{attrs:{size:"large",type:"password"},model:{value:e.formInline.newMPw,callback:function(t){e.$set(e.formInline,"newMPw",t)},expression:"formInline.newMPw"}})],1)],1),e._v(" "),s("Row",[s("FormItem",{attrs:{label:e.$t("uc.safe.confirmnewpwd"),prop:"newMPwConfirm"}},[s("Input",{attrs:{size:"large",type:"password"},model:{value:e.formInline.newMPwConfirm,callback:function(t){e.$set(e.formInline,"newMPwConfirm",t)},expression:"formInline.newMPwConfirm"}})],1)],1),e._v(" "),s("Row",[s("FormItem",{staticStyle:{"padding-bottom":"2px"},attrs:{label:e.$t("uc.safe.emailcode"),prop:"vailCode"}},[s("Input",{staticClass:"send-sms-custom",attrs:{size:"large"},model:{value:e.formInline.vailCode,callback:function(t){e.$set(e.formInline,"vailCode",t)},expression:"formInline.vailCode"}},[s("div",{staticClass:"timebox",attrs:{slot:"append"},slot:"append"},[s("Button",{attrs:{disabled:e.sendMsgDisabled,type:"text"},on:{click:e.send}},[e.sendMsgDisabled?s("span",[e._v(e._s(e.time+e.$t("uc.safe.second")))]):e._e(),e._v(" "),e.sendMsgDisabled?e._e():s("span",[e._v(e._s(e.$t("uc.safe.clickget")))])])],1)])],1)],1),e._v(" "),s("Row",[s("FormItem",{staticStyle:{margin:"50px auto 15px",border:"none"}},[s("Button",{attrs:{type:"warning"},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v(e._s(e.$t("uc.safe.save")))])],1)],1)],1),e._v(" "),s("Modal",{attrs:{"mask-closable":!1},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[s("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("uc.regist.modaltitle")))]),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("div",[s("div",{attrs:{id:"captcha"}},[s("p",{staticClass:"show",attrs:{id:"wait"}},[e._v(e._s(e.$t("uc.login.validatecodeload"))+"......")])])]),e._v(" "),s("p",{staticClass:"hide",attrs:{id:"notice"}},[e._v(e._s(e.$t("uc.login.validatemsg")))])]),e._v(" "),s("p",{attrs:{slot:"footer"},slot:"footer"})])],1)])],1)},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(e){s("q8d7")},"data-v-54e81d76",null);t.default=r.exports},q8d7:function(e,t){}});