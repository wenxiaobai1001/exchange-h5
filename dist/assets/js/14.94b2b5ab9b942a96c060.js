webpackJsonp([14],{"5bkS":function(t,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=a("eMjc"),s=a.n(e),i={data:()=>({row:{}}),props:{skin:String,rows:Object},created(){this.rows.createTime=this.dateFormatFromString(this.rows.createTime)}},n={render:function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"expand-detail"},[a("Row",{staticClass:"expand-row",class:t.skin},[a("Col",{attrs:{span:"16"}},[a("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.promotion.card_column0"))+": ")]),a("br"),t._v(" "),a("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.cardNo))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.promotion.card_column5"))+": ")]),a("br"),t._v(" "),a("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.count))])])],1),t._v(" "),a("Row",{staticClass:"expand-row",class:t.skin},[a("Col",{attrs:{span:"16"}},[a("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.promotion.card_column2"))+": ")]),a("br"),t._v(" "),a("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.coin.unit))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.promotion.card_column6"))+": ")]),a("br"),t._v(" "),a("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.exchangeCount))])])],1),t._v(" "),a("Row",{staticClass:"expand-row",class:t.skin},[a("Col",{attrs:{span:"18"}},[a("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.promotion.card_column7"))+": ")]),a("br"),t._v(" "),a("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.createTime))])]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("span",{staticClass:"expand-key"}),a("br"),t._v(" "),a("span",{staticClass:"expand-value"})])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(t){a("OR3P")},"data-v-f1110272",null).exports,l={components:{expandRow:r},data(){return{loginmsg:this.$t("common.logintip"),loading:!0,tableCardList:[],showModal:!1,cardNo:"",modal_loading:!1,showPromotionModal:!1,saveImageLoading:!1,promotionTitle:"",promotionCode:""}},methods:{getMyCardList(){this.$http.post(this.host+this.api.uc.mycardlist).then(t=>{var o=t.body;0==o.code?this.tableCardList=o.data:this.$Message.error(this.loginmsg),this.loading=!1})},dataURLToBlob(t){let o=t.split(","),a=o[0].match(/:(.*?);/)[1],e=atob(o[1]),s=e.length,i=new Uint8Array(s);for(;s--;)i[s]=e.charCodeAt(s);return new Blob([i],{type:a})},saveImage(){this.save("promotionImage","Parnter Image"),this.saveImageLoading=!0},save(t,o){let a=this.$refs[t],e=this,i=document.createElement("a");s()(a,{useCORS:!0}).then(t=>{let a=document.body.appendChild(t);a.style.display="none",i.style.display="none",document.body.removeChild(a);let s=e.dataURLToBlob(a.toDataURL("image/png"));i.setAttribute("href",URL.createObjectURL(s)),i.setAttribute("download",o+".png"),document.body.appendChild(i),i.click(),URL.revokeObjectURL(s),document.body.removeChild(i),this.saveImageLoading=!1})},exchangeCard(){this.showModal=!0},exchange(){if(""==this.cardNo||null==this.cardNo)return void this.$Message.error(this.$t("uc.promotion.inputcardno"));let t={};t.cardNo=this.cardNo,this.modal_loading=!0,this.$http.post(this.host+this.api.uc.exchangecard,t).then(t=>{var o=t.body;0==o.code?(this.showModal=!1,this.$Notice.success({title:this.$t("uc.promotion.exchangesuccess"),desc:o.message,duration:30})):this.$Message.error(o.message),this.modal_loading=!1})}},created(){this.getMyCardList()},computed:{tableColumnsCard(){let t=this,o=[];return o.push({type:"expand",width:40,height:40,render:(t,o)=>t(r,{props:{skin:o.row.skin,rows:o.row}})}),o.push({title:this.$t("uc.promotion.card_column1"),key:"cardName",align:"center"}),o.push({title:this.$t("uc.promotion.card_column3"),key:"amount",align:"center",render:(o,a)=>o("span",{attrs:{title:a.row.amount}},t.toFloor(a.row.amount||"0"))}),o.push({title:this.$t("uc.finance.money.operate"),key:"price1",align:"center",render:function(o,a){return o("Button",{props:{type:"info",size:"small"},style:{},on:{click:function(){t.showPromotionModal=!0,t.promotionTitle=a.row.cardName,t.promotionCode=a.row.cardNo,window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0}}},t.$t("uc.promotion.gopromotion"))}}),o}}},c={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"nav-rights"},[e("div",{staticClass:"nav-right col-xs-12 col-md-10 padding-right-clear"},[e("div",{staticClass:"bill_box rightarea padding-right-clear"},[e("div",{staticClass:"shaow"},[e("div",{staticClass:"money_table"},[e("div",{staticStyle:{width:"100%",height:"50px"}},[e("div",{staticClass:"header-btn",on:{click:t.exchangeCard}},[t._v(t._s(t.$t("uc.promotion.exchangewithcode")))])]),t._v(" "),e("Table",{attrs:{"no-data-text":t.$t("common.nodata"),columns:t.tableColumnsCard,data:t.tableCardList,loading:t.loading,"disabled-hover":!0}})],1)])])]),t._v(" "),e("Modal",{attrs:{title:this.$t("uc.promotion.inputcardno"),width:"360"},model:{value:t.showModal,callback:function(o){t.showModal=o},expression:"showModal"}},[e("p",{staticStyle:{color:"#f60","text-align":"left"},attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),e("span",[t._v(t._s(t.$t("uc.promotion.inputcardno")))])],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("Input",{attrs:{placeholder:this.$t("uc.promotion.inputcardno")},model:{value:t.cardNo,callback:function(o){t.cardNo=o},expression:"cardNo"}})],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:t.exchange}},[t._v(t._s(t.$t("uc.promotion.exchange")))])],1)]),t._v(" "),e("Drawer",{staticStyle:{"text-align":"center"},attrs:{title:t.promotionTitle,closable:!1,width:"350"},model:{value:t.showPromotionModal,callback:function(o){t.showPromotionModal=o},expression:"showPromotionModal"}},[e("div",{ref:"promotionImage",staticStyle:{position:"relative",width:"318px"},attrs:{id:"promotionImage"}},[e("img",{staticStyle:{width:"100%",display:"block"},attrs:{src:a("Yg3d")}}),t._v(" "),e("p",{staticStyle:{position:"absolute",top:"210px","text-align":"center",width:"100%","font-size":"26px",color:"#F90","font-weight":"bold"}},[t._v(t._s(t.promotionCode))]),t._v(" "),e("p",{staticStyle:{position:"absolute",top:"250px","text-align":"center",width:"100%"}},[t._v("推广合伙人专属兑换码")])]),t._v(" "),e("p",{staticStyle:{"text-align":"center","font-size":"12px",color:"#888","margin-top":"10px"}},[t._v(t._s(t.$t("invite.imagetips")))]),t._v(" "),e("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"error",size:"large",loading:t.saveImageLoading,long:""},on:{click:t.saveImage}},[t._v(t._s(t.$t("invite.saveimage")))])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("EA+S"),a("pDDs")},"data-v-cb2d97ae",null);o.default=d.exports},"EA+S":function(t,o){},OR3P:function(t,o){},Yg3d:function(t,o,a){t.exports=a.p+"assets/img/promotionbg1.c4f5509.png"},pDDs:function(t,o){}});