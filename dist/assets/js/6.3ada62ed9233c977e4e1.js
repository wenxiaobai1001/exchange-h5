webpackJsonp([6],{"67Rm":function(t,e){},biPV:function(t,e){},cjTN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{PageHeader:i("JCuE").a},data(){return{isSpinShow:!0,isId:!1,disAllowBtn:!1,coinList:[],balance:100,cankao:"",price:"",symbol:"",gongshi:1,wantstyle:this.$t("otc.publishad.sellout"),wantTime:"15-120",areas:[],form:{advertiseType:"1",coin:"1",country:"china",rmb:"",fixed:!1,premisePrice:"",fixedPrice:"",number:"",timeLimit:"",payMode:[],minLimit:"",maxLimit:"",autoReply:!1,remark:"",priceW:"",autoword:""},ruleValidate:{advertiseType:[{required:!0,trigger:"change"}],coin:[{required:!0,message:this.$t("otc.publishad.inputtip1"),trigger:"change"}],country:[{required:!0,message:this.$t("otc.publishad.inputtip2"),trigger:"change"}],rmb:[{required:!0,message:this.$t("otc.publishad.inputtip2"),trigger:"change"}],premisePrice:[{validator:(t,e,i)=>{if(0==this.form.fixed){if(!e||0==e)return i(new Error(this.$t("otc.publishad.warning2")));Number.isNaN(Number(e))?i(new Error("")):e<0||e>20?i(new Error(this.$t("otc.publishad.warning1"))):i()}else i()},message:this.$t("otc.publishad.inputtip3"),trigger:"blur"}],fixedPrice:[{validator:(t,e,i)=>{1==this.form.fixed?""===e?i(new Error(this.$t("otc.publishad.warning1"))):/^[0-9]+(.[0-9]{2})?/.test(e)?i():i(new Error(this.$t("otc.publishad.warning1"))):i()},message:this.$t("otc.publishad.inputtip4"),trigger:"blur"}],number:[{required:!0,validator:(t,e,i)=>{""===e||0==e?i(new Error(this.$t("otc.publishad.warning1"))):Number.isNaN(Number(e))?i(new Error(this.$t("otc.publishad.warning1"))):i()},message:this.$t("otc.publishad.inputtip5"),trigger:"blur"}],timeLimit:[{required:!0,validator:(t,e,i)=>{""!==e&&/^\d+$/.test(e)||i(new Error(this.$t("otc.publishad.warning1"))),1==this.form.advertiseType&&(e<15||e>120?i(new Error(this.$t("otc.publishad.warning1"))):i()),0==this.form.advertiseType&&(e<10||e>30)?i(new Error(this.$t("otc.publishad.warning1"))):i()},message:this.$t("otc.publishad.inputtip6"),trigger:"blur"}],payMode:[{required:!0,type:"array",min:1,message:this.$t("otc.publishad.inputtip7"),trigger:"change"}],minLimit:[{required:!0,validator:(t,e,i)=>{if(!e||0==e)return i(new Error(this.$t("otc.publishad.warning7")));/^\d+$/.test(e)?parseFloat(e)<100&&i(new Error(this.$t("otc.publishad.warning8"))):i(new Error(this.$t("otc.publishad.warning4"))),this.form.maxLimit&&0!=this.form.maxLimit&&parseFloat(e)>this.form.maxLimit-0?i(new Error(this.$t("otc.publishad.warning9"))):i()},trigger:"blur"}],maxLimit:[{required:!0,validator:(t,e,i)=>{let s=(this.price+"").replace(/,/g,"").replace(/[^\d|.]/g,"")-0;if(s=this.round(this.mul(s,this.form.number),8),!e||0==e)return i(new Error(this.$t("otc.publishad.warning3")));/^[0-9]+(.[0-9]{2})?$/.test(e)?parseFloat(e)<parseFloat(this.form.minLimit)?i(new Error(this.$t("otc.publishad.warning5"))):parseFloat(e)>parseFloat(s)?i(new Error(this.$t("otc.publishad.warning6")+s+"(THB)！")):i():i(new Error(this.$t("otc.publishad.warning4")))},trigger:"blur"}],priceW:[{required:!0,message:this.$t("otc.publishad.inputtip8"),trigger:"blur"}]},payModeList:[{value:this.$t("otc.publishad.zfb"),label:this.$t("otc.publishad.zfb"),isOpen:!0},{value:this.$t("otc.publishad.wx"),label:this.$t("otc.publishad.wx"),isOpen:!0},{value:this.$t("otc.publishad.unionpay"),label:this.$t("otc.publishad.unionpay"),isOpen:!0}]}},methods:{changeCoin(){let t=this.getCoin(this.form.coin);if(null!=t){this.cankao=t.marketPrice+"";let e=(1+this.form.premisePrice/100).toFixed(4),i=this.cankao.replace(/,/g,"").replace(/[^\d|.]/g,"")-0;this.price=(i*e).toLocaleString(),this.symbol=t.unit}},mul(t,e){var i=0,s=t.toString(),r=e.toString();try{i+=s.split(".")[1].length}catch(t){}try{i+=r.split(".")[1].length}catch(t){}return Number(s.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,i)},div(t,e){var i,s,r=0,a=0;try{r=t.toString().split(".")[1].length}catch(t){}try{a=e.toString().split(".")[1].length}catch(t){}return i=Number(t.toString().replace(".","")),s=Number(e.toString().replace(".","")),this.mul(i/s,Math.pow(10,a-r))},round(t,e){for(var i=1;e>0;i*=10,e--);for(;e<0;i/=10,e++);return Math.round(t*i)/i},handleSubmit(t){this.$refs[t].validate(t=>{if(t){this.disAllowBtn=!0;var e={};e.price=(this.price+"").replace(/[^\d|.]/g,"")-0,e.advertiseType=this.form.advertiseType,e["coin.id"]=this.form.coin,e.minLimit=this.form.minLimit,e.maxLimit=this.form.maxLimit,e.timeLimit=this.form.timeLimit,e.country=this.form.country,1==this.form.fixed?e.priceType=0:0==this.form.fixed&&(e.priceType=1),e.premiseRate=this.form.premisePrice,e.remark=this.form.remark,e.number=this.form.number,e.pay=this.form.payMode,e.jyPassword=this.form.priceW,1==this.form.autoReply?e.auto=1:0==this.form.autoReply&&(e.auto=0),e.autoword=this.form.autoword;var i={};i.id=this.$route.query.id,i.advertiseType=this.form.advertiseType,i.price=(this.price+"").replace(/[^\d|.]/g,"")-0,i["coin.id"]=this.form.coin,i.minLimit=this.form.minLimit,i.maxLimit=this.form.maxLimit,i.timeLimit=this.form.timeLimit,i.country=this.form.country,1==this.form.fixed?i.priceType=0:0==this.form.fixed&&(i.priceType=1),i.premiseRate=this.form.premisePrice,i.remark=this.form.remark,i.number=this.form.number,i.pay=this.form.payMode,i.jyPassword=this.form.priceW,1==this.form.autoReply?i.auto=1:0==this.form.autoReply&&(i.auto=0),i.autoword=this.form.autoword,this.isId?this.$http.post(this.host+"/otc/advertise/update",i).then(t=>{var e=t.body;if(0==e.code){this.$Message.success(e.message);var i=this;setTimeout(()=>{i.$router.push("/uc/ad")},3e3)}else this.$Message.error(e.message),this.disAllowBtn=!1}):this.$http.post(this.host+"/otc/advertise/create",e).then(t=>{var e=t.body;if(0==e.code){this.$Message.success(e.message);var i=this;setTimeout(()=>{i.$router.push("/uc/ad")},3e3)}else this.$Message.error(e.message),this.disAllowBtn=!1})}else this.disAllowBtn=!1,this.$Message.error(this.$t("otc.publishad.submit_failure"))})},handleReset(t){this.$refs[t].resetFields()},onAreaChange(t){for(var e=0;e<this.areas.length;e++)this.areas[e].zhName==t&&(this.form.rmb=this.areas[e].localCurrency)},findCoin(t){for(let e=0;e<this.coinList.length;e++)if(this.coinList[e].id==t)return this.coinList[e].unit},getCoin(t){for(let e=0;e<this.coinList.length;e++)if(this.coinList[e].id==t)return this.coinList[e]},getAreas(){this.$http.post(this.host+"/uc/support/country").then(t=>{var e=t.body;this.areas=e.data,this.form.country=this.areas[0].zhName,this.form.rmb=this.areas[0].localCurrency})},getMember(){this.$http.get(this.host+this.api.uc.identification).then(t=>{2==t.body.data.certifiedBusinessStatus?this.getAccount():(this.$Message.warning("请先申请商家认证!"),this.$router.push("/identbusiness"))})},getAccount(){let t=this;this.$http.post(this.host+"/uc/approve/account/setting").then(e=>{var i=e.body;0==i.code?(0==i.data.bankVerified&&0==i.data.aliVerified&&0==i.data.wechatVerified&&(this.$Message.success(this.$t("otc.publishad.submittip4")),t.$router.push("/uc/account")),1==i.data.aliVerified&&(this.payModeList[0].isOpen=!1),1==i.data.wechatVerified&&(this.payModeList[1].isOpen=!1),1==i.data.bankVerified&&(this.payModeList[2].isOpen=!1)):(this.msg=i.message,this.$Message.error(i.message))})},getDetailAd(){this.isId=!0,this.$http.post(this.host+"/otc/advertise/detail",{id:this.$route.query.id}).then(t=>{var e=t.body;0==e.code?(this.form.coin=e.data.coinId+"",this.form.country=e.data.country.zhName,this.cankao=e.data.marketPrice+"",0==e.data.priceType?(this.form.fixed=!0,this.form.fixedPrice=e.data.price):1==e.data.priceType&&(this.form.fixed=!1),this.price=e.data.price,this.symbol=e.data.coinUnit,this.form.advertiseType=e.data.advertiseType+"",this.form.minLimit=e.data.minLimit,this.form.maxLimit=e.data.maxLimit,this.form.remark=e.data.remark,this.form.timeLimit=e.data.timeLimit,this.form.premisePrice=e.data.premiseRate,this.form.payMode=(e.data.payMode+"").split(","),this.form.number=e.data.number,1==e.data.auto?this.form.autoReply=!0:0==e.data.auto&&(this.form.autoReply=!1),this.form.autoword=e.data.autoword):this.$Message.error(e.message),this.isSpinShow=!1})}},mounted(){},computed:{wantHistory(){return this.form.advertiseType},premisePriceHistory(){return this.form.premisePrice},fixedPriceHistory(){return this.form.fixedPrice}},watch:{wantHistory(t,e){"1"==t?(this.wantstyle=this.$t("otc.publishad.sellout"),this.wantTime="15-120"):(this.wantstyle=this.$t("otc.publishad.buyin"),this.wantTime="10-30")},premisePriceHistory(t,e){let i=(1+t/100).toFixed(4),s=this.cankao.replace(/,/g,"").replace(/[^\d|.]/g,"")-0;this.price=this.round(this.mul(s,i),2).toLocaleString(),this.gongshi=1+t/100},fixedPriceHistory(t,e){this.price=(t-0).toLocaleString()}},created(){this.getMember(),this.getAreas();let t=(1+this.form.premisePrice/100).toFixed(4);this.$http.post(this.host+"/otc/coin/all").then(e=>{var i=e.body;if(0==i.code){this.coinList=i.data,this.form.coin=i.data[0].id,this.cankao=i.data[0].marketPrice+"";let e=this.cankao.replace(/,/g,"").replace(/[^\d|.]/g,"")-0;this.price=(e*t).toLocaleString(),this.symbol=i.data[0].unit}else this.$Message.error(i.message);this.$route.query.id?this.getDetailAd():this.isSpinShow=!1})}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-home"},[i("PageHeader",{attrs:{title:t.$t("uc.finance.billdetail")}}),t._v(" "),i("div",{staticClass:"page-content"},[i("div",{staticClass:"my_ad_container"},[i("div",{staticClass:"contbox"},[i("Spin",{directives:[{name:"show",rawName:"v-show",value:t.isSpinShow,expression:"isSpinShow"}],staticClass:"my_ad_container_spin",attrs:{fix:""}}),t._v(" "),i("div",{},[i("div",{staticClass:"send-box"},[i("div",{staticClass:"title-box"},[i("h6",{staticClass:"titles"},[t._v(t._s(t.$t("otc.publishad.createad"))+"\n                "),i("i",{staticClass:"iconfont icon-hongjiantou"})]),t._v(" "),i("p",[t._v(t._s(t.$t("otc.publishad.msg1"))+"\n                "),i("router-link",{attrs:{to:"/otc/trade/usdt"}},[t._v(t._s(t.$t("otc.publishad.tradead")))]),t._v("。\n              ")],1),t._v(" "),i("p",[t._v(t._s(t.$t("otc.publishad.msg2"))+t._s(t.$t("otc.publishad.msg3"))+"。")]),t._v(" "),i("p",[t._v(t._s(t.$t("otc.publishad.msg4"))+"\n                "),i("router-link",{attrs:{to:"/otc/ad"}},[t._v(t._s(t.$t("otc.publishad.myad")))]),t._v("。\n              ")],1)]),t._v(" "),i("div",{staticClass:"formbox send-form"},[i("Form",{ref:"form",attrs:{"label-position":"top",model:t.form,rules:t.ruleValidate}},[i("FormItem",{attrs:{label:t.$t("otc.publishad.iwant"),prop:"advertiseType"}},[i("RadioGroup",{model:{value:t.form.advertiseType,callback:function(e){t.$set(t.form,"advertiseType",e)},expression:"form.advertiseType"}},[i("Radio",{attrs:{label:"1",disabled:t.isId}},[t._v(t._s(t.$t("otc.publishad.sellonline")))]),t._v(" "),i("Radio",{attrs:{label:"0",disabled:t.isId}},[t._v(t._s(t.$t("otc.publishad.buyonline")))])],1)],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.exchangecoin"),prop:"coin"}},[i("Select",{attrs:{disabled:t.isId,placeholder:t.$t("common.pleaseselect")},on:{"on-change":t.changeCoin},model:{value:t.form.coin,callback:function(e){t.$set(t.form,"coin",e)},expression:"form.coin"}},t._l(t.coinList,function(e,s){return i("Option",{key:s,attrs:{value:e.id}},[t._v(t._s(e.unit))])}),1)],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.country"),prop:"country"}},[i("Select",{attrs:{placeholder:t.$t("common.pleaseselect")},on:{"on-change":t.onAreaChange},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.areas,function(e,s){return i("Option",{key:s,attrs:{value:e.zhName}},[t._v(t._s(e.enName))])}),1)],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.currency"),prop:"rmb"}},[i("Input",{attrs:{disabled:"",placeholder:""},model:{value:t.form.rmb,callback:function(e){t.$set(t.form,"rmb",e)},expression:"form.rmb"}})],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.openfixedprice")}},[i("i-switch",{attrs:{size:"large"},model:{value:t.form.fixed,callback:function(e){t.$set(t.form,"fixed",e)},expression:"form.fixed"}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("otc.publishad.open")))]),t._v(" "),i("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("otc.publishad.close")))])])],1),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.form.fixed,expression:"form.fixed"}],staticClass:"msg"},[t._v(t._s(t.$t("otc.publishad.usetip")))]),t._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:!t.form.fixed,expression:"!form.fixed"}],staticClass:"ivu-form-item-required",attrs:{label:t.$t("otc.publishad.premiseprice"),prop:"premisePrice"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.premisepricetip")},model:{value:t.form.premisePrice,callback:function(e){t.$set(t.form,"premisePrice",e)},expression:"form.premisePrice"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1),t._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.form.fixed,expression:"form.fixed"}],staticClass:"ivu-form-item-required",attrs:{label:t.$t("otc.publishad.fixedprice"),prop:"fixedPrice"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.fixedpricetip")},model:{value:t.form.fixedPrice,callback:function(e){t.$set(t.form,"fixedPrice",e)},expression:"form.fixedPrice"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v(t._s(t.form.rmb))])])],1),t._v(" "),i("p",{staticClass:"msg"},[t._v(t._s(t.$t("otc.publishad.marketprice"))+"：\n                  "),i("span",{staticClass:"cankao"},[t._v(t._s(t.cankao))])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.form.fixed,expression:"!form.fixed"}],staticClass:"msg"},[t._v(t._s(t.$t("otc.publishad.marketpricetip"))+t._s(t.wantstyle)+"。")]),t._v(" "),i("div",{staticClass:"ivu-form-item"},[i("label",{staticClass:"ivu-form-item-label"},[t._v(t._s(t.$t("otc.publishad.exchangeprice")))]),t._v(" "),i("div",{staticClass:"ivu-form-item-content"},[i("div",{staticClass:"ivu-input-wrapper ivu-input-type",attrs:{id:"price"}},[t._v("\n                      "+t._s(t.price)+" (THB)/"+t._s(t.symbol)+"\n                    ")])])]),t._v(" "),i("p",{staticClass:"msg"},[t._v(t._s(t.$t("otc.publishad.formual"))+"：（Bitstamp+Bitfinex+Coinbase）/ 3 *"+t._s(t.gongshi.toFixed(4)))]),t._v(" "),i("FormItem",{attrs:{label:t.wantstyle+t.$t("otc.publishad.num"),prop:"number"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.num_text1")+t.wantstyle+t.$t("otc.publishad.num_text2")},model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}})],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.exchangeperiod"),prop:"timeLimit"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.exchangeperiod_text1")+"("+t.wantTime+t.$t("otc.publishad.minute")+")"},model:{value:t.form.timeLimit,callback:function(e){t.$set(t.form,"timeLimit",e)},expression:"form.timeLimit"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v(t._s(t.$t("otc.publishad.minute")))])])],1),t._v(" "),i("p",{staticClass:"msg"},[t._v(t._s(t.$t("otc.publishad.tip1"))+" ")]),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.paymode"),prop:"payMode"}},[i("Select",{attrs:{multiple:"",placeholder:t.$t("common.pleaseselect")},model:{value:t.form.payMode,callback:function(e){t.$set(t.form,"payMode",e)},expression:"form.payMode"}},t._l(t.payModeList,function(e,s){return i("Option",{key:s,attrs:{value:e.value,disabled:e.isOpen}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.minlimit"),prop:"minLimit"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.tip3")},model:{value:t.form.minLimit,callback:function(e){t.$set(t.form,"minLimit",e)},expression:"form.minLimit"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("(THB)")])])],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.maxlimit"),prop:"maxLimit"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.tip4")},model:{value:t.form.maxLimit,callback:function(e){t.$set(t.form,"maxLimit",e)},expression:"form.maxLimit"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("(THB)")])])],1),t._v(" "),i("FormItem",{staticStyle:{"margin-top":"12%"},attrs:{label:t.$t("otc.publishad.remark"),prop:"remark"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:t.$t("otc.publishad.tip5")},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.openautoreply")}},[i("i-switch",{attrs:{size:"large"},model:{value:t.form.autoReply,callback:function(e){t.$set(t.form,"autoReply",e)},expression:"form.autoReply"}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("otc.publishad.open")))]),t._v(" "),i("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("otc.publishad.close")))])])],1),t._v(" "),i("p",{staticClass:"msg"},[t._v(t._s(t.$t("otc.publishad.msg5")))]),t._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.form.autoReply,expression:"form.autoReply"}],attrs:{label:t.$t("otc.publishad.autoreply"),prop:"autoword"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:t.$t("otc.publishad.autoreplytip")},model:{value:t.form.autoword,callback:function(e){t.$set(t.form,"autoword",e)},expression:"form.autoword"}})],1),t._v(" "),i("FormItem",{attrs:{label:t.$t("otc.publishad.fundpwd"),prop:"priceW"}},[i("Input",{attrs:{placeholder:t.$t("otc.publishad.fundpwdtip"),type:"password"},model:{value:t.form.priceW,callback:function(e){t.$set(t.form,"priceW",e)},expression:"form.priceW"}})],1),t._v(" "),i("FormItem",[i("Button",{staticStyle:{background:"#f0a70a",color:"#fff",border:"1px solid #f0a70a"},attrs:{long:"",disabled:t.disAllowBtn},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(t._s(t.$t("otc.publishad.submit")))])],1)],1)],1)])])],1)])])],1)},staticRenderFns:[]};var a=i("VU/8")(s,r,!1,function(t){i("biPV"),i("67Rm")},"data-v-1f0b31ec",null);e.default=a.exports}});