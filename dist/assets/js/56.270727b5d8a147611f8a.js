webpackJsonp([56],{"34jo":function(e,t){},"88AQ":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("H6tP"),o=s("/2QW"),a=s("wPKN"),r=s.n(a),n=s("JCuE");let l=s("0tEf"),c=s("O3w4");s("xNPZ");var d={components:{DepthGraph:i.a,PageHeader:n.a},data(){return{defaultPath:"btc_usdt",skin:"night",currentCoinIsFavor:!1,collecRequesting:!1,currentImgTable:"k",currentCoin:{base:"",coin:"",symbol:"",baseCoinScale:6,coinScale:6},coins:{_map:[],USDT:[],BTC:[],ETH:[],USDT2:[],BTC2:[],ETH2:[],favor:[]},trade:{maxPostion:10,rows:[],columns:[{title:this.$t("exchange.price"),key:"price",render:(e,t)=>{return e("span",{attrs:{class:"BUY"==t.row.direction?"buy":"sell"}},t.row.price.toFixed(this.currentCoin.baseCoinScale))},renderHeader:(e,t)=>{return e("span",{},this.$t("exchange.price")+"("+this.currentCoin.base+")")}},{title:this.$t("exchange.num"),key:"amount",render:(e,t)=>e("span",{},t.row.amount.toFixed(this.currentCoin.coinScale)),renderHeader:(e,t)=>{return e("span",{},this.$t("exchange.num")+"("+this.currentCoin.coin+")")}},{title:this.$t("exchange.time"),key:"time",render:(e,t)=>e("span",{},this.timeFormat(t.row.time))}]}}},props:{},filters:{},computed:{lang:function(){return this.$store.state.lang}},watch:{lang:function(){this.updateLangData()}},created:function(){},mounted:function(){this.init()},methods:{init(){var e=this.$route.params.pair;void 0!=e&&"undefined"!=e||(e=this.defaultPath,this.$router.push("/exchange/"+this.defaultPath));var t=e.toUpperCase().split("_")[0],s=e.toUpperCase().split("_")[1];this.currentCoin.symbol=t+"/"+s,this.currentCoin.coin=t,this.currentCoin.base=s,this.getTrade(),this.getSymbol()},changeImgTable(e){this.currentImgTable=e},updateLangData(){this.trade.columns[0].title=this.$t("exchange.num"),this.trade.columns[1].title=this.$t("exchange.price"),this.trade.columns[2].title=this.$t("exchange.time")},startWebsock(){let e=null,t=this,s=new c(t.wssHost+t.api.market.ws);(e=l.over(s)).debug=!1,e.connect({},function(s){t.datafeed=new o.a.WebsockFeed(t.host+"/market",t.currentCoin,e,t.baseCoinScale),console.log("self.currentCoin",t.currentCoin),t.getKline(),e.subscribe("/topic/market/trade/"+t.currentCoin.symbol,function(e){let s=JSON.parse(e.body);if(s.length>0)for(let e=0;e<s.length;e++)t.trade.rows.unshift(s[e]);t.trade.rows.length>t.trade.maxPostion&&(t.trade.rows=t.trade.rows.slice(0,t.trade.maxPostion))}),e.subscribe("/topic/market/thumb",function(e){var s=JSON.parse(e.body),i=t.getCoin(s.symbol);null!=i&&(i.price=s.close,i.rose=s.chg>0?"+"+(100*s.chg).toFixed(2)+"%":(100*s.chg).toFixed(2)+"%",i.close=s.close,i.high=s.high,i.low=s.low,i.turnover=parseInt(s.volume),i.volume=s.volume,i.usdRate=s.usdRate)})})},getLang4K(){return"zh_CN"==this.$store.getters.lang?"zh":"en"},getTrade(){var e={};e.symbol=this.currentCoin.symbol,e.size=this.trade.maxPostion,this.$http.post(this.host+this.api.market.trade,e).then(e=>{this.trade.rows=[];for(var t=e.body,s=0;s<t.length;s++)this.trade.rows.push(t[s])})},getPlateFull(){let e={};e.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.market.platefull,e).then(e=>{let t=e.body;t.skin=this.skin,this.$refs.depthGraph.draw(t)})},getKline(){let e={autosize:!0,height:320,fullscreen:!0,symbol:this.symbol,interval:"5",timezone:this.getTimezone4K(),toolbar_bg:"#fff",container_id:"kline_container",datafeed:this.datafeed,library_path:"/assets/charting_library/",locale:this.getLang4K(),debug:!1,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},disabled_features:["header_resolutions","timeframes_toolbar","header_symbol_search","header_chart_type","header_compare","header_undo_redo","header_screenshot","header_saveload","volume_force_overlay","widget_logo","compare_symbol","display_market_status","go_to_date","header_interval_dialog_button","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:["disable_resolution_rebuild","keep_left_toolbar_visible_on_small_screens","hide_last_na_study_output","move_logo_to_main_pane","use_localstorage_for_settings","remove_library_container_border","save_chart_properties_to_local_storage","side_toolbar_in_fullscreen_mode","constraint_dialogs_movement","hide_left_toolbar_by_default","left_toolbar","same_data_requery","header_in_fullscreen_mode"],studies_overrides:{"volume.volume.color.0":"#fa5252","volume.volume.color.1":"#12b886","volume.volume.transparency":25},custom_css_url:"bundles/common_day.css",supported_resolutions:["1","5","15","30","60","1D","1W","1M"],charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",overrides:{"paneProperties.background":"#000000","paneProperties.vertGridProperties.color":"rgba(0,0,0,.1)","paneProperties.horzGridProperties.color":"rgba(0,0,0,.1)","scalesProperties.textColor":"#61688A","mainSeriesProperties.candleStyle.upColor":"#12b886","mainSeriesProperties.candleStyle.downColor":"#fa5252","mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.wickUpColor":"#589065","mainSeriesProperties.candleStyle.wickDownColor":"#AE4E54","paneProperties.legendProperties.showLegend":!0,"mainSeriesProperties.areaStyle.color1":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.color2":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.linecolor":"#9194a4",volumePaneSize:"small"},time_frames:[{text:"1min",resolution:"1",description:"realtime",title:this.$t("exchange.realtime")},{text:"1min",resolution:"1",description:"1min"},{text:"5min",resolution:"5",description:"5min"},{text:"15min",resolution:"15",description:"15min"},{text:"30min",resolution:"30",description:"30min"},{text:"1hour",resolution:"60",description:"1hour",title:"1hour"},{text:"1day",resolution:"1D",description:"1day",title:"1day"},{text:"1week",resolution:"1W",description:"1week",title:"1week"},{text:"1mon",resolution:"1M",description:"1mon"}]};"day"===this.skin&&(e.toolbar_bg="#fff",e.custom_css_url="bundles/common_day.css",e.overrides["paneProperties.background"]="#fff",e.overrides["mainSeriesProperties.candleStyle.upColor"]="#a6d3a5",e.overrides["mainSeriesProperties.candleStyle.downColor"]="#ffa5a6"),s.e(88).then(function(){var t=[s("s2Hi")];(function(t){var s=window.tvWidget=new TradingView.widget(e);s.onChartReady(function(){s.chart().executeActionById("drawingToolbarAction"),s.chart().createStudy("Moving Average",!1,!1,[5],null,{"plot.color":"#EDEDED"}),s.chart().createStudy("Moving Average",!1,!1,[10],null,{"plot.color":"#ffe000"}),s.chart().createStudy("Moving Average",!1,!1,[30],null,{"plot.color":"#ce00ff"}),s.chart().createStudy("Moving Average",!1,!1,[60],null,{"plot.color":"#00adff"}),s.createButton().attr("title","realtime").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(3),s.setSymbol("","1"))}).append("<span>Time</span>"),s.createButton().attr("title","M1").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1"))}).append("<span>M1</span>"),s.createButton().attr("title","M5").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","5"))}).append("<span>M5</span>").addClass("selected"),s.createButton().attr("title","M15").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","15"))}).append("<span>M15</span>"),s.createButton().attr("title","M30").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","30"))}).append("<span>M30</span>"),s.createButton().attr("title","H1").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","60"))}).append("<span>H1</span>"),s.createButton().attr("title","D1").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1D"))}).append("<span>D1</span>"),s.createButton().attr("title","W1").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1W"))}).append("<span>W1</span>"),s.createButton().attr("title","M1").on("click",function(){r()(this).hasClass("selected")||(r()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1M"))}).append("<span>M1</span>")})}).apply(null,t)}).catch(s.oe)},getSymbol(){this.$http.post(this.host+this.api.market.thumb,{}).then(e=>{let t=e.body;this.coins._map=[],this.coins.favor=[];for(let e=0;e<t.length;e++){let s=t[e];s.coin=t[e].symbol.split("/")[0],s.base=t[e].symbol.split("/")[1],s.price=t[e].close=t[e].close.toFixed(t[e].baseCoinScale),s.rose=t[e].chg>0?"+"+(100*t[e].chg).toFixed(2)+"%":(100*t[e].chg).toFixed(2)+"%",s.href=(s.coin+"_"+s.base).toLowerCase(),s.isFavor=!1,this.coins._map[s.symbol]=s,0==s.zone?this.coins[s.base].push(s):this.coins[s.base+"2"].push(s),s.symbol==this.currentCoin.symbol&&(this.currentCoin=s)}this.isLogin&&this.getFavor(),s.e(89).then(function(){var e=[s("ERXg")];(function(e){e.clickScTab()}).apply(null,e)}).catch(s.oe),this.startWebsock()})},getFavor(){this.$http.post(this.host+this.api.exchange.favorFind,{}).then(e=>{this.coins.favor=[],this.currentCoinIsFavor=!1;let t=e.body;for(let e=0;e<t.length;e++){let s=this.getCoin(t[e].symbol);null!=s&&(s.isFavor=!0,this.coins.favor.push(s)),this.currentCoin.symbol==t[e].symbol&&(this.currentCoinIsFavor=!0)}})},getCoin(e){return this.coins._map[e]},currentCoinFavorChange(){if(!this.isLogin)return void this.$Message.warning(this.$t("common.logintip"));if(this.collecRequesting)return;const e=this.currentCoin.symbol;this.collecRequesting=!0,this.currentCoinIsFavor?this.$http.post(this.host+this.api.exchange.favorDelete,{symbol:e}).then(e=>{0==e.body.code&&(this.$Message.info(this.$t("exchange.cancel_favorite")),this.getSymbol(),this.currentCoinIsFavor=!1),this.collecRequesting=!1}):this.$http.post(this.host+this.api.exchange.favorAdd,{symbol:e}).then(e=>{0==e.body.code&&(this.$Message.info(this.$t("exchange.do_favorite")),this.getSymbol(),this.currentCoinIsFavor=!0),this.collecRequesting=!1})}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-kline-list"},[s("PageHeader",{attrs:{title:e.currentCoin.symbol+" Kline"}}),e._v(" "),s("div",{staticClass:"page-content"},[s("div",{staticClass:"page-kline-main"},[s("div",{staticClass:"symbol"},[s("div",{staticClass:"symbol-item"},[s("div",{staticClass:"item star",on:{click:e.currentCoinFavorChange}},[e.currentCoinIsFavor?s("Icon",{attrs:{type:"ios-star",color:"#f0a70a",size:"24"}}):s("Icon",{attrs:{type:"ios-star-outline",color:"#f0a70a",size:"24"}}),e._v(" "),s("span",{staticClass:"coin"},[e._v(e._s(e.currentCoin.coin)),s("small",[e._v("/"+e._s(e.currentCoin.base))])])],1),e._v(" "),s("div",{staticClass:"item latestprice"},[s("span",{staticClass:"num",class:{buy:e.currentCoin.change>0,sell:e.currentCoin.change<0}},[e._v(e._s(e._f("toFixed")(e.currentCoin.close,e.currentCoin.baseCoinScale)))]),e._v(" "),s("span",{staticClass:"change",class:{buy:e.currentCoin.change>0,sell:e.currentCoin.change<0}},[e._v(e._s(e.currentCoin.rose))])])]),e._v(" "),s("div",{staticClass:"symbol-item"},[s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[e._v(e._s(e.$t("service.OpenPrice")))]),e._v(" "),s("span",{staticClass:"num"},[e._v(e._s(e._f("toFixed")(e.currentCoin.open,e.currentCoin.baseCoinScale)))])]),e._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[e._v(e._s(e.$t("service.ExchangeNum")))]),e._v(" "),s("span",{staticClass:"num"},[e._v(e._s(e.currentCoin.volume)+" "+e._s(e.currentCoin.coin))])])]),e._v(" "),s("div",{staticClass:"symbol-item"},[s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[e._v(e._s(e.$t("service.high")))]),e._v(" "),s("span",{staticClass:"num"},[e._v(e._s(e._f("toFixed")(e.currentCoin.high,e.currentCoin.baseCoinScale)))])]),e._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[e._v(e._s(e.$t("service.low")))]),e._v(" "),s("span",{staticClass:"num"},[e._v(e._s(e._f("toFixed")(e.currentCoin.low,e.currentCoin.baseCoinScale)))])])])]),e._v(" "),e._m(0)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgtable"},[t("div",{attrs:{id:"kline_container"}})])}]};var u=s("VU/8")(d,h,!1,function(e){s("34jo")},"data-v-e611198c",null);t.default=u.exports}});