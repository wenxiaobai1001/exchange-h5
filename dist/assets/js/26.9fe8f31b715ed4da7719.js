webpackJsonp([26],{"U+pK":function(t,e){},fXh1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("o6sg"),a=i("JCuE"),r={components:{expandRow:s.a,PageHeader:a.a},data(){return{user:{},codeIsSending:!1,sendcodeValue:this.$t("uc.regist.sendcode"),countdown:60,formInline:{code:"",fundpwd:""},modal:!1,fundpwd:"",currentCoin:{},transaction:{page:0,pageSize:10,total:0},loading:!0,withdrawAdress:"",inputAddress:"",withdrawAmount:0,withdrawFee:0,withdrawStep:1e-4,withdrawOutAmount:0,coinType:"",coinList:[],tableWithdraw:[],allTableWithdraw:[]}},watch:{currentCoin:function(){this.withdrawFee=this.currentCoin.minTxFee,this.withdrawStep=(this.currentCoin.maxTxFee-this.currentCoin.minTxFee)/Math.pow(10,this.currentCoin.withdrawScale)}},methods:{cancel(){this.modal=!1,this.formInline.code="",this.formInline.fundpwd=""},sendCode(){this.settime(),this.$http.post(this.host+"/uc/withdraw/email/code").then(t=>{var e=t.body;0==e.code?this.$Notice.success({title:this.$t("common.tip"),desc:e.message}):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})})},settime(){this.sendcodeValue=this.countdown,this.codeIsSending=!0;let t=setInterval(()=>{this.countdown--,this.sendcodeValue=this.countdown,this.countdown<=0&&(clearInterval(t),this.sendcodeValue=this.$t("uc.regist.sendcode"),this.countdown=60,this.codeIsSending=!1)},1e3)},changePage(t){this.transaction.page=t-1,this.getList()},onAddressChange(t){this.inputAddress=t},clearValues(){this.$refs.address&&this.$refs.address.setQuery(" "),this.withdrawAdress="",this.inputAddress="",this.withdrawAmount=0,this.withdrawOutAmount=0},getCurrentCoinRecharge(){if(""!=this.coinType){for(var t=[],e=0;e<this.allTableWithdraw.length;e++)this.allTableWithdraw[e].coin.unit==this.coinType&&t.push(this.allTableWithdraw[e]);this.tableWithdraw=t}else this.tableWithdraw=this.allTableWithdraw},ok(){if(""==this.formInline.code)return this.modal=!0,void this.$Message.error("Please input message code!");if(""==this.formInline.fundpwd)return this.modal=!0,void this.$Message.error(this.$t("otc.chat.msg7tip"));let t={};for(let e=0;e<this.currentCoin.addresses;e++)this.currentCoin.addresses[e].address==this.withdrawAdress&&(t.remark=this.currentCoin.addresses[e].remark);t.unit=this.currentCoin.unit,t.address=this.withdrawAdress,t.amount=this.withdrawAmount,t.fee=this.withdrawFee,t.jyPassword=this.formInline.fundpwd,t.code=this.formInline.code,this.$http.post(this.host+"/uc/withdraw/apply/codeNew",t).then(t=>{this.fundpwd="";var e=t.body;0==e.code?(this.modal=!1,this.formInline.code="",this.formInline.fundpwd="",this.transaction.page=0,this.getList(),this.clearValues(),this.$Message.success(e.message)):this.$Message.error(e.message)})},getAddrList(){this.clearValues(),this.$http.post(this.host+"/uc/withdraw/support/coin/info").then(t=>{var e=t.body;if(0==e.code&&e.data.length>0)if(this.coinList=e.data,this.coinType){for(let t=0;t<e.data.length;t++)if(this.coinType==e.data[t].unit){this.currentCoin=e.data[t];break}}else this.currentCoin=this.coinList[0],this.coinType=this.currentCoin.unit;else this.$Message.error(e.message)})},getList(){this.loading=!0;let t={};t.page=this.transaction.page,t.pageSize=this.transaction.pageSize,this.$http.post(this.host+"/uc/withdraw/record",t).then(t=>{var e=t.body;0==e.code?(this.tableWithdraw=e.data.content,this.transaction.total=e.data.totalElements,this.transaction.page=e.data.number):this.$Message.error(e.message),this.loading=!1})},accSub(t,e){var i,s,a;try{i=t.toString().split(".")[1].length}catch(t){i=0}try{s=e.toString().split(".")[1].length}catch(t){s=0}return((t*(a=Math.pow(10,Math.max(i,s)))-e*a)/a).toFixed(i>=s?i:s)},round(t,e){for(var i=1;e>0;i*=10,e--);for(;e<0;i/=10,e++);return Math.round(t*i)/i},roundDecimal:(t,e)=>Math.round(t*Math.pow(10,e))/Math.pow(10,e),computerAmount(){this.withdrawFee>this.currentCoin.maxTxFee&&(this.withdrawFee=this.currentCoin.maxTxFee),this.withdrawFee<this.currentCoin.minTxFee&&(this.withdrawFee=this.currentCoin.minTxFee),this.withdrawAmount<this.currentCoin.minAmount&&(this.withdrawAmount=this.currentCoin.minAmount),this.withdrawAmount>this.currentCoin.maxAmount&&(this.withdrawAmount=this.currentCoin.maxAmount),this.withdrawFee=this.roundDecimal(this.withdrawFee,this.currentCoin.withdrawScale||4),console.log("this.currentCoin.withdrawScale",this.currentCoin.withdrawScale),this.withdrawOutAmount=this.round(this.accSub(this.withdrawAmount,this.withdrawFee),this.currentCoin.withdrawScale)},computerAmount2(){this.withdrawAmount=(this.withdrawAmount+"").replace(/([0-9]+\.[0-9]{6})[0-9]*/,"$1")-0,this.withdrawOutAmount=this.round(this.accSub(this.withdrawAmount,this.withdrawFee),this.currentCoin.withdrawScale)},valid(){return this.withdrawAdress=this.withdrawAdress||this.inputAddress,""==this.coinType?(this.$Message.error(this.$t("uc.finance.withdraw.symboltip")),!1):""==this.withdrawAdress?(this.$Message.error(this.$t("uc.finance.withdraw.addresstip")),!1):""==this.withdrawAmount||0==this.withdrawAmount||this.withdrawAmount-0<this.currentCoin.minAmount?(this.$Message.error(this.$t("uc.finance.withdraw.numtip2")+this.currentCoin.minAmount),!1):this.withdrawAmount-0<this.withdrawFee?(this.$Message.error(this.$t("uc.finance.withdraw.numtip3")),!1):!(""==this.withdrawFee||0==this.withdrawFee||this.withdrawFee-0>this.currentCoin.maxTxFee||this.withdrawFee-0<this.currentCoin.minTxFee)||(this.$Message.error(this.$t("uc.finance.withdraw.feetip1")+this.currentCoin.minTxFee+" , "+this.$t("uc.finance.withdraw.feetip2")+this.currentCoin.maxTxFee),!1)},apply(){if(this.formInline.code="",this.formInline.fundpwd="",this.valid()){this.modal=!0;let t=setInterval(()=>{this.countdown<=0&&(clearInterval(t),this.sendcodeValue=this.$t("uc.regist.sendcode"),this.codeIsSending=!1)},1e3)}},getMember(){let t=this;this.$http.post(this.host+"/uc/approve/security/setting").then(e=>{var i=e.body;0==i.code?(this.user=i.data,null==i.data.realName||""==i.data.realName?(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip1")}),t.$router.push("/my")):0==i.data.phoneVerified?(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip2")}),t.$router.push("/my")):0==i.data.fundsVerified&&(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip3")}),t.$router.push("/my"))):this.$Message.error(i.message)})}},created(){this.getMember(),this.$http.options.emulateJSON=!1,this.coinType=this.$route.query.name||"",this.getAddrList(),this.getList(0,10,1),console.log(this.$store.getters.member)},computed:{member:function(){return console.log(this.$store.getters.member),this.$store.getters.member},tableColumnsWithdraw(){let t=[],e=[];return this.coinList.length>0&&this.coinList.forEach(t=>{e.push({label:t.unit,value:t.unit})}),t.push({type:"expand",width:40,height:40,render:(t,e)=>t(s.a,{props:{skin:e.row.skin,rows:e.row}})}),t.push({title:this.$t("uc.finance.withdraw.symbol"),key:"symbol",filters:e,filterMultiple:!1,filterMethod:(t,e)=>e.coin.unit===t,render:function(t,e){return t("span",e.row.coin.unit)}}),t.push({title:this.$t("uc.finance.withdraw.num"),key:"totalAmount"}),t.push({title:this.$t("uc.finance.withdraw.status"),key:"status",render:(t,e)=>{let i="";return 0==e.row.status?i=this.$t("uc.finance.withdraw.status_1"):1==e.row.status?i=this.$t("uc.finance.withdraw.status_2"):2==e.row.status?i=this.$t("uc.finance.withdraw.status_3"):3==e.row.status&&(i=this.$t("uc.finance.withdraw.status_4")),t("div",[t("p",i)])}}),t}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-home"},[i("PageHeader",{attrs:{isShowBack:!0,title:t.$t("uc.finance.withdraw.record")}}),t._v(" "),i("div",{staticClass:"page-content"},[i("div",{staticClass:"page-withdrawrecord"},[i("div",{staticClass:"order-table"},[i("div",{staticClass:"actionMoblieTable"},[i("Table",{attrs:{"no-data-text":t.$t("common.nodata"),columns:t.tableColumnsWithdraw,data:t.tableWithdraw,loading:t.loading}})],1),t._v(" "),i("div",{attrs:{id:"pages"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{staticClass:"pages_a",attrs:{total:t.transaction.total,current:t.transaction.page+1},on:{"on-change":t.changePage}})],1)])])])])],1)},staticRenderFns:[]};var h=i("VU/8")(r,n,!1,function(t){i("jY5o")},"data-v-1b76077c",null);e.default=h.exports},jY5o:function(t,e){},o6sg:function(t,e,i){"use strict";var s={data:()=>({row:{}}),props:{skin:String,rows:Object},created(){this.rows.createTime=this.dateFormat(this.rows.createTime)}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"expand-detail"},[i("Row",{staticClass:"expand-row",class:t.skin},[i("Col",{attrs:{span:"18"}},[i("p",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.finance.withdraw.time"))+": ")]),t._v(" "),i("p",{staticClass:"expand-value"},[t._v(t._s(t.rows.createTime))])]),t._v(" "),i("Col",{attrs:{span:"6"}},[i("p",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.finance.withdraw.fee"))+": ")]),t._v(" "),i("p",{staticClass:"expand-value"},[t._v(t._s(t.rows.fee))])])],1),t._v(" "),i("Row",{staticClass:"expand-row",class:t.skin},[i("Col",{attrs:{span:"24"}},[i("p",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.finance.withdraw.address"))+": ")]),t._v(" "),i("p",{staticClass:"expand-value"},[t._v(t._s(t.rows.address))])])],1),t._v(" "),i("Row",{staticClass:"expand-row",class:t.skin},[i("Col",{attrs:{span:"24"}},[i("p",{staticClass:"expand-key"},[t._v(t._s(t.$t("uc.finance.withdraw.txid"))+": ")]),t._v(" "),i("p",{staticClass:"expand-value"},[t._v(t._s(t.rows.transactionNumber))])])],1)],1)},staticRenderFns:[]};var r=i("VU/8")(s,a,!1,function(t){i("U+pK")},"data-v-1d8d00b6",null);e.a=r.exports}});