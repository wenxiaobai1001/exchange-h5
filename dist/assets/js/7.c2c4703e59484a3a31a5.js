webpackJsonp([7],{Rgct:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("KLv3"),a=(s("JCuE"),s("Bnh8")),n={data:()=>({row:{}}),props:{skin:String,rows:Object,type:String},created(){console.log("rows",this.rows),"historyOrder"==this.type&&(this.rows.createTime=this.dateFormat(this.rows.createTime))}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"expand-detail"},["currentPosition"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.pos_Pl"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value pl0",class:{pl:t.rows.pl>0}},[t._v(t._s(t.rows.pl+" USDT"))])]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.pos_pos"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.position+" "+t.$t("swap.shareNumber")))])])],1):t._e(),t._v(" "),"currentPosition"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.pos_margin"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.margin+" USDT"))])]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.pos_mRatio"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v(t._s(100*t.rows.mRatio+" %"))])])],1):t._e(),t._v(" "),"currentOrder"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.pos_Pl"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.pl+" USDT"))])])],1):t._e(),t._v(" "),"historyOrder"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.time"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v(t._s(t.rows.createTime))])]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_direction"))+": ")]),t._v(" "),"OPEN"==t.rows.entrustType?s("span",{staticClass:"expand-value sell-order",class:{"buy-order":"BUY"==t.rows.direction}},[t._v("\n                "+t._s("BUY"==t.rows.direction?t.$t("swap.openup"):t.$t("swap.opendown"))+"\n            ")]):t._e(),t._v(" "),"OPEN"!=t.rows.entrustType?s("span",{staticClass:"expand-value sell-order",class:{"buy-order":"BUY"==t.rows.direction}},[t._v("\n                "+t._s("BUY"==t.rows.direction?t.$t("swap.closeup"):t.$t("swap.closedown"))+"\n            ")]):t._e()])],1):t._e(),t._v(" "),"historyOrder"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_type"))+": ")]),t._v(" "),1==t.rows.isFromSpot?s("span",{staticClass:"expand-value"},[t._v(t._s(t.$t("swap.spot_price")))]):t._e(),t._v(" "),1!=t.rows.isFromSpot?s("span",{staticClass:"expand-value"},[t._v("\n                "+t._s("LIMIT_PRICE"==t.rows.type?t.$t("swap.limited_price"):"MARKET_PRICE"==t.rows.type?t.$t("swap.market_price"):t.$t("swap.spot_price"))+"\n            ")]):t._e()]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_trigglePrice"))+": ")]),t._v(" "),1==t.rows.isFromSpot?s("span",{staticClass:"expand-value"},[t._v("\n                "+t._s(t.rows.triggerPrice)+"\n            ")]):t._e(),t._v(" "),1!=t.rows.isFromSpot?s("span",{staticClass:"expand-value"},[t._v("\n                "+t._s("SPOT_PRICE"==t.rows.type?t.rows.triggerPrice:"--")+"\n            ")]):t._e()])],1):t._e(),t._v(" "),"historyOrder"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_entrustPrice"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v(t._s(t.row.entrustPrice))])]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_margin"))+": ")]),t._v(" "),s("span",{staticClass:"expand-value"},[t._v("\n                "+t._s(t.rows.principalAmount+" USDT")+"\n            ")])])],1):t._e(),t._v(" "),"historyOrder"==t.type?s("Row",{staticClass:"expand-row",class:t.skin},[s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_fee"))+": ")]),t._v(" "),"ENTRUST_CANCEL"!=t.rows.status?s("span",{staticClass:"expand-value"},[t._v("\n                "+t._s("OPEN"==t.rows.entrustType?t.rows.openFee:t.rows.closeFee)+"\n            ")]):t._e(),t._v(" "),"ENTRUST_CANCEL"==t.rows.status?s("span",{staticClass:"expand-value"},[t._v("--")]):t._e()]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("span",{staticClass:"expand-key"},[t._v(t._s(t.$t("swap.ent_pl")))]),t._v(" "),"CLOSE"==t.rows.entrustType?s("span",{staticClass:"expand-value profitAndLoss",class:{profitAndLoss0:t.rows.profitAndLoss<0}},[t._v("\n                "+t._s(t.rows.profitAndLoss)+"\n            ")]):t._e(),t._v(" "),"CLOSE"!=t.rows.entrustType?s("span",{staticClass:"expand-value"},[t._v("--")]):t._e()])],1):t._e()],1)},staticRenderFns:[]};var o=s("VU/8")(n,r,!1,function(t){s("TcDw")},"data-v-5011160e",null).exports,l=s("7t+N"),c=function(t,e,s,i){this._datafeedURL=t,this.coin=e,this.stompClient=s,this.lastBar=null,this.currentBar=null,this.subscribe=!0,this.scale=i};c.prototype.onReady=function(t){var e={exchanges:[],supported_resolutions:["1","5","15","30","60","240","1D","1W","1M"],supports_group_request:!1,supports_marks:!1,supports_search:!1,supports_time:!0,supports_timescale_marks:!1};l("#"+window.tvWidget.id).contents().on("click",".date-range-list>a",function(){window.tvWidget&&("分时"==l(this).html()?(l(this).parent().addClass("real-op").removeClass("common-op"),window.tvWidget.chart().setChartType(3)):(l(this).parent().addClass("common-op").removeClass("real-op"),window.tvWidget.chart().setChartType(1)))}),setTimeout(function(){t(e)},0)},c.prototype.subscribeBars=function(t,e,s,i,a){var n=this;this.stompClient.subscribe("/topic/swap/trade/"+t.name,function(t){var e=JSON.parse(t.body);if(null!=n.lastBar&&e.length>0){var i=e[e.length-1].price;n.lastBar.close=i,i>n.lastBar.high&&(n.lastBar.high=i),i<n.lastBar.low&&(n.lastBar.low=i),s(n.lastBar)}}),this.stompClient.subscribe("/topic/swap/thumb",function(e){var i=JSON.parse(e.body);if(i.symbol==t.name&&null!=n.lastBar&&i.length>0){var a=i.price;n.lastBar.close=a,a>n.lastBar.high&&(n.lastBar.high=a),a<n.lastBar.low&&(n.lastBar.low=a),s(n.lastBar)}}),this.stompClient.subscribe("/topic/swap/kline/"+t.name,function(t){null!=n.currentBar&&s(n.currentBar);var e=JSON.parse(t.body),i=1e3*e.time;i-n.currentBar.time>0&&i-n.currentBar.time<864e5&&(n.lastBar={time:1e3*e.time,open:e.openPrice,high:e.highestPrice,low:e.lowestPrice,close:e.closePrice,volume:e.volume},n.currentBar=n.lastBar,s(n.lastBar))})},c.prototype.unsubscribeBars=function(t){this.subscribe=!1},c.prototype.resolveSymbol=function(t,e,s){var i={name:this.coin.symbol,"exchange-traded":"","exchange-listed":"",minmov:1,volumescale:1e4,has_daily:!0,has_weekly_and_monthly:!0,has_intraday:!0,description:this.coin.symbol,type:"bitcoin",session:"24x7",supported_resolutions:["1","5","15","30","60","240","1D","1W","1M"],pricescale:Math.pow(10,this.scale||2),ticker:"",timezone:"Asia/Shanghai"};setTimeout(function(){e(i)},0)},c.prototype._send=function(t,e){var s=t;if(e)for(var i=0;i<Object.keys(e).length;++i){var a=Object.keys(e)[i],n=encodeURIComponent(e[a]);s+=(0===i?"?":"&")+a+"="+n}return l.ajax({type:"GET",url:s,dataType:"json"})},c.prototype.getBars=function(t,e,s,i,a,n,r){var o=[],l=this;this._send(this._datafeedURL+"/history",{symbol:t.name,from:1e3*s,to:r?(new Date).getTime():1e3*i,resolution:e}).done(function(t){for(var e=t,s=0;s<e.length;s++){var i=e[s];o.push({time:i[0],open:i[1],high:i[2],low:i[3],close:i[4],volume:i[5]})}l.lastBar=o.length>0?o[o.length-1]:null,l.currentBar=l.lastBar;var n=0==o.length;a(o,{noData:n})}).fail(function(t){n(t)})},c.prototype.periodLengthSeconds=function(t,e){return 24*("D"===t?e:"M"===t?31*e:"W"===t?7*e:"H"===t?e*t/24:e*t/1440)*60*60};var u=c,p=s("H6tP"),d=s("wPKN"),h=s.n(d),m=s("0tEf"),v=s("O3w4"),g=s("PJh5"),_={components:{expandRow:o,DepthGraph:p.a,PageFooter:a.a,ContractTab:i.a},data(){let t=this;return{isShowSwapMenu:!1,isActiveMenu:1,buyLeverage:"10",sellLeverage:"10",changeLeverageType:1,leverageList:[],leverageModal:!1,leverageLong:10,leverageShort:10,leverageAdjustVal:10,checkSellCount:0,checkBuyCount:0,checkAllCount:0,marginModeModal:!1,marginMode:"1",accountMode:0,entrustType:1,entrustOrderType:"1",sliderStep:[25,50,75,100],sliderOpenPercent:0,sliderClosePercent:0,memberRate:0,collecRequesting:!1,currentCoinIsFavor:!1,isUseCDEA:!1,skin:"night",currentImgTable:"k",selectedOrder:"currentPositions",selectedPlate:"all",CNYRate:null,datafeed:null,defaultPath:"btc_usdt",basecion:"usdt",coinScale:6,baseCoinScale:6,symbolFee:.001,dataIndex:[],searchKey:"",coinInfo:{},leverageType:1,contractCoinInfo:{id:0,baseSymbol:"",coinSymbol:"",symbol:"",openFee:0,closeFee:0,enableTriggerEntrust:1,feePercent:0,leverageType:1,leverage:"10,20,30,40,50,60,70,80,90,100",maxShare:0,minShare:0,shareNumber:0},contractWalletInfo:{id:0,usdtBalance:0,usdtBuyPosition:0,usdtSellPosition:0,usdtBuyLeverage:10,usdtSellLeverage:10,usdtFrozenBalance:0,usdtBuyPrincipalAmount:0,usdtSellPrincipalAmount:0},currentCoin:{base:"",coin:"",symbol:"",price:0},enableMarketBuy:1,enableMarketSell:1,exchangeable:1,currentEntrustOrderList:[],historyEntrustOrderList:[],currentPositionList:[],coins:{_map:[],USDT:[],columns:[{title:this.$t("swap.contract")+"/"+this.$t("swap.vol"),key:"coin",width:150,sortable:!1,className:"coin-menu-symbol swap-coin-menu-symbol",render:(t,e)=>t("div",{style:{padding:"5px 0"}},[t("span",{style:{fontSize:"13px",fontWeight:"bold"}},e.row.coin+"/USDT "+this.$t("swap.swapindex")),t("br"),t("span",{style:{color:"#61688A",fontSize:"12px"}},e.row.volume.toFixed(4))])},{title:this.$t("swap.lastprice")+"/"+this.$t("swap.daychange"),key:"rose",className:"swap-coin-menu-lastprice",sortMethod:function(t,e,s){let i=t.replace(/[^\d|.|-]/g,"")-0,a=e.replace(/[^\d|.|-]/g,"")-0;return"asc"==s?i-a:a-i},render:(t,e)=>{const s=e.row,i=parseFloat(s.rose)<0?"sell":"buy";return t("div",{style:{padding:"5px 10px",textAlign:"right",fontSize:"13px"}},[t("span",e.row.close),t("br"),t("span",{attrs:{class:i}},s.rose)])}}]},wallet:{base:0,coin:0},showMarket:!1,fixHistoryHeight:295,form:{trigglePrice:"",entrustPrice:"",volume:""},trade:{rows:[],columns:[{title:t.$t("swap.price"),key:"price",render:(t,e)=>{return t("span",{style:{fontSize:"10px"},attrs:{class:"BUY"==e.row.direction?"buy":"sell"}},e.row.price.toFixed(4))},renderHeader:(e,s)=>{return e("span",{},t.$t("swap.price")+"("+t.currentCoin.base+")")}},{title:t.$t("swap.num"),key:"amount",render:(t,e)=>t("span",{style:{fontSize:"10px"}},e.row.amount.toFixed(4)),renderHeader:(e,s)=>{return e("span",{},t.$t("swap.num")+"("+t.currentCoin.coin+")")}},{title:t.$t("swap.time"),key:"time",render:(t,e)=>t("span",{style:{fontSize:"10px"}},this.timeFormat(e.row.time))}]},plate:{maxPostion:10,columns:[{title:t.$t("swap.price"),key:"price",render:(t,e)=>{let s="",i="";const a=e.row.direction.toLowerCase();return 0==e.row.price&&(s=t("span",{},"--")),0!=e.row.price&&(i=e.row.price.toFixed(4))&&(s=t("span",{attrs:{class:a}},i)),s},renderHeader:(e,s)=>{return e("span",{},t.$t("swap.price")+"("+t.currentCoin.base+")")}},{title:t.$t("swap.num"),key:"amount",render:(t,e)=>{let s="";return 0==e.row.amount&&(s=t("span",{},"--")),0!=e.row.amount&&(s=t("span",{},e.row.amount.toFixed(4))),s},renderHeader:(e,s)=>{return e("span",{},t.$t("swap.num")+"("+t.currentCoin.coin+")")}},{title:t.$t("swap.total"),key:"totalAmount",render:(t,e)=>0==e.row.price||0==e.row.totalAmount?t("span",{},"--"):t("span",{},e.row.totalAmount.toFixed(4)),renderHeader:(e,s)=>{return e("span",{},t.$t("swap.total")+"("+t.currentCoin.coin+")")}},{className:"percenttd",width:1,render:(t,e)=>{let s="0",i="BUY"===e.row.direction?"#00b275":"#f15057",a="BUY"===e.row.direction?this.plate.bidTotle:this.plate.askTotle;return e.row.totalAmount&&(s=100*(e.row.totalAmount/a).toFixed(4)+"%"),t("div",{style:{width:s,backgroundColor:i},attrs:{class:"percentdiv"}}," ")}}],askRows:[],bidRows:[]},currentPosition:{columns:[{type:"expand",width:20,height:20,render:(t,e)=>t(o,{props:{skin:e.row.skin,rows:e.row,type:"currentPosition"}})},{title:t.$t("swap.pos_leverage"),key:"leverage",render:(t,e)=>"Buy"==e.row.direction?t("span",{style:{color:"#FFF",backgroundColor:"#42b983",padding:"3px 5px",borderRadius:"3px",display:"inline-block",width:"80px"}},this.$t("swap.pos_long")+" "+e.row.leverage+"X"):t("span",{style:{color:"#FFF",backgroundColor:"#FF0000",padding:"3px 5px",borderRadius:"3px",display:"inline-block",width:"80px"}},this.$t("swap.pos_short")+" "+e.row.leverage+"X")},{title:t.$t("swap.pos_Ratio"),key:"plRatio",render:(t,e)=>e.row.plRatio>0?t("span",{style:{color:"#42b983"}},(100*e.row.plRatio).toFixed(2)+" %"):t("span",{style:{color:"#FF0000"}},(100*e.row.plRatio).toFixed(2)+" %")},{title:t.$t("swap.pos_canClose"),key:"avaPosition",width:90,render:(t,e)=>t("span",{},e.row.avaPosition+this.$t("swap.shareNumber"))},{title:t.$t("swap.pos_openPrice"),key:"openPrice",render:(t,e)=>t("span",{},e.row.openPrice.toFixed(4)+" USDT")}]},currentOrder:{columns:[{type:"expand",width:20,height:20,render:(t,e)=>t(o,{props:{skin:e.row.skin,rows:e.row,type:"currentOrder"}})},{title:t.$t("swap.ent_entrustType"),key:"entrustType",width:90,render:(t,e)=>"OPEN"==e.row.entrustType?t("span",{},this.$t("swap.open")):t("span",{},this.$t("swap.close"))},{title:t.$t("swap.ent_tradedPrice"),key:"tradedPrice",width:90,render:(t,e)=>t("span",{},e.row.tradedPrice.toFixed(2))},{title:t.$t("swap.ent_volume"),key:"volume",render:(t,e)=>t("span",{},e.row.volume+this.$t("swap.shareNumber"))},{title:t.$t("swap.action"),key:"operate",width:80,render:(e,s)=>e("Button",{props:{size:"small"},style:{color:"#f1ac19","line-height":"1.2",backgroundColor:"transparent"},on:{click:()=>{this.cancel(s.row.id)}}},t.$t("swap.undo"))}],rows:[]},historyOrder:{pageSize:10,total:10,page:0,columns:[{type:"expand",width:20,height:20,render:(t,e)=>t(o,{props:{skin:e.row.skin,rows:e.row,type:"historyOrder"}})},{title:t.$t("swap.ent_entrustType"),key:"entrustType",width:90,render:(t,e)=>"OPEN"==e.row.entrustType?t("span",{},this.$t("swap.open")):t("span",{},this.$t("swap.close"))},{title:t.$t("swap.ent_tradedPrice"),key:"tradedPrice",width:90,render:(t,e)=>t("span",{},e.row.tradedPrice.toFixed(2))},{title:t.$t("swap.ent_volume"),key:"volume",render:(t,e)=>t("span",{},e.row.volume+" "+this.$t("swap.shareNumber"))},{title:t.$t("swap.ent_status"),key:"volume",render:(t,e)=>1==e.row.isBlast?t("span",{},this.$t("swap.ent_statusblast")):"ENTRUST_CANCEL"==e.row.status?t("span",{},this.$t("swap.ent_status2")):"ENTRUST_FAILURE"==e.row.status?t("span",{},this.$t("swap.ent_status3")):"ENTRUST_SUCCESS"==e.row.status?t("span",{},this.$t("swap.ent_status4")):void 0}],rows:[]},fullTrade:{}}},filters:{},computed:{rechargeUSDTUrl:function(){return"/uc/recharge?name="+this.currentCoin.base},rechargeCoinUrl:function(){return"/uc/recharge?name="+this.currentCoin.coin},isLogin:function(){return this.$store.getters.isLogin},member:function(){return this.$store.getters.member},lang:function(){return this.$store.state.lang},profitAndLoss:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;return this.contractWalletInfo.usdtSellPrice>0&&(e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber),t+e},totalQuanyi:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;return this.contractWalletInfo.usdtSellPrice>0&&(e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber),t+e+this.contractWalletInfo.usdtBalance+this.contractWalletInfo.usdtFrozenBalance+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount},assetRate:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;var t=this.contractWalletInfo.usdtFrozenBalance+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount;return this.totalQuanyi>0?t/this.totalQuanyi:0},avaOpenBuy:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;if("FIXED"==this.contractWalletInfo.usdtPattern)return parseInt(this.buyLeverage*this.contractWalletInfo.usdtBalance/this.contractCoinInfo.shareNumber);var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;this.contractWalletInfo.usdtSellPrice>0&&(e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber);var s=t+e+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount;return s>=0?parseInt(this.buyLeverage*this.contractWalletInfo.usdtBalance/this.contractCoinInfo.shareNumber):parseInt(this.buyLeverage*(this.contractWalletInfo.usdtBalance+s)/this.contractCoinInfo.shareNumber)},avaOpenSell:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;if("FIXED"==this.contractWalletInfo.usdtPattern)return parseInt(this.sellLeverage*this.contractWalletInfo.usdtBalance/this.contractCoinInfo.shareNumber);var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;this.contractWalletInfo.usdtSellPrice>0&&(e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber);var s=t+e+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount;return s>=0?parseInt(this.sellLeverage*this.contractWalletInfo.usdtBalance/this.contractCoinInfo.shareNumber):parseInt(this.sellLeverage*(this.contractWalletInfo.usdtBalance-s)/this.contractCoinInfo.shareNumber)},positionList:function(){if(console.log("this.contractWalletInfo",this.contractWalletInfo),this.contractWalletInfo&&0!=this.contractWalletInfo.id&&0!=this.currentPositionList.length){var t=0;(this.contractWalletInfo.usdtBuyPosition>0||this.contractWalletInfo.usdtFrozenBuyPosition>0)&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber,this.$set(this.currentPositionList[0],"direction","Buy"),this.$set(this.currentPositionList[0],"openPrice",this.contractWalletInfo.usdtBuyPrice),this.$set(this.currentPositionList[0],"pl",t),this.$set(this.currentPositionList[0],"position",this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition),this.$set(this.currentPositionList[0],"avaPosition",this.contractWalletInfo.usdtBuyPosition),this.$set(this.currentPositionList[0],"margin",this.contractWalletInfo.usdtBuyPrincipalAmount),this.$set(this.currentPositionList[0],"leverage",this.contractWalletInfo.usdtBuyLeverage),this.$set(this.currentPositionList[0],"plRatio",t/this.contractWalletInfo.usdtBuyPrincipalAmount),this.$set(this.currentPositionList[0],"mRatio",(t+this.contractWalletInfo.usdtBuyPrincipalAmount)/this.contractWalletInfo.usdtBuyPrincipalAmount/this.contractWalletInfo.usdtBuyLeverage),this.$set(this.currentPositionList[0],"cmRatio",this.contractCoinInfo.maintenanceMarginRate),"FIXED"==this.contractWalletInfo.usdtPattern&&t+this.contractWalletInfo.usdtBuyPrincipalAmount<0&&this.checkBuyCount<5&&(this.getMemberContractWallet(),this.checkBuyCount++));var e=0;if(this.contractWalletInfo.usdtSellPosition>0||this.contractWalletInfo.usdtFrozenSellPosition>0){e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber;var s=0;this.currentPositionList.length>1&&(s=1),this.$set(this.currentPositionList[s],"direction","Sell"),this.$set(this.currentPositionList[s],"openPrice",this.contractWalletInfo.usdtSellPrice),this.$set(this.currentPositionList[s],"pl",e),this.$set(this.currentPositionList[s],"position",this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition),this.$set(this.currentPositionList[s],"avaPosition",this.contractWalletInfo.usdtSellPosition),this.$set(this.currentPositionList[s],"margin",this.contractWalletInfo.usdtSellPrincipalAmount),this.$set(this.currentPositionList[s],"leverage",this.contractWalletInfo.usdtSellLeverage),this.$set(this.currentPositionList[s],"plRatio",e/this.contractWalletInfo.usdtSellPrincipalAmount),this.$set(this.currentPositionList[s],"mRatio",(e+this.contractWalletInfo.usdtSellPrincipalAmount)/this.contractWalletInfo.usdtSellPrincipalAmount/this.contractWalletInfo.usdtSellLeverage),this.$set(this.currentPositionList[s],"cmRatio",this.contractCoinInfo.maintenanceMarginRate),"FIXED"==this.contractWalletInfo.usdtPattern&&e+this.contractWalletInfo.usdtSellPrincipalAmount<=0&&this.checkSellCount<5&&(this.getMemberContractWallet(),this.checkSellCount++)}return"CROSSED"==this.contractWalletInfo.usdtPattern&&t+e+this.contractWalletInfo.usdtBalance+this.contractWalletInfo.usdtFrozenBalance+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount<0&&this.checkAllCount<5&&(this.getMemberContractWallet(),this.checkAllCount++),this.currentPositionList}}},watch:{lang:function(){this.updateLangData()},$route(t,e){this.init()}},created:function(){this.init()},filters:{dateFormat:function(t){return g(t).format("MM-DD HH:mm")},fixed2:function(t){return t.toFixed(2)},fixed4:function(t){return t.toFixed(4)},percent:function(t){return(100*t).toFixed(2)}},methods:{changeTabMenu(t){this.isActiveMenu=t},seachInputChange(){this.searchKey=this.searchKey.toUpperCase(),this.dataIndex=this.coins.USDT.filter(t=>0==t.coin.indexOf(this.searchKey))},silderGo(t,e){this[t]=e},init(){var t=this.$route.params.pair;void 0==t&&(this.$router.push("/swap/"+this.defaultPath),t=this.defaultPath);const e=t.split("_")[1];e&&(this.basecion=e);var s=t.toUpperCase().split("_")[0],i=t.toUpperCase().split("_")[1];this.currentCoin.symbol=s+"/"+i,this.currentCoin.coin=s,this.currentCoin.base=i,this.$store.commit("navigate","nav-swap"),this.$store.commit("setSkin",this.skin),this.currentPositionList=new Array,this.getCNYRate(),this.getSymbolInfo(),this.getSymbolThumb(),this.getPlate(),this.getPlateFull(),this.sliderOpenPercent=0,this.sliderClosePercent=0},tipFormat:t=>t+"%",changeBaseCion(t){this.basecion=t,this.dataIndex=this.coins.USDT},changePlate(t){this.plate.maxPostion="all"!=t?20:10,this.getPlate(t)},changeImgTable(t){this.currentImgTable=t},changeOrder(t){this.selectedOrder=t},entrustChange(t){this.entrustType=t},setback(){var t=document.getElementsByClassName("container")[0],e=0,s=document;window.innerHeight&&(e=window.innerHeight),!window.innerHeight&&s.body.clientHeight&&(e=s.body.clientHeight),!window.innerHeight&&!s.body.clientHeight&&s.documentElement.clientHeight&&(e=s.documentElement.clientHeight),t.style.minHeight=e-100+"px"},updateLangData(){this.coins.columns[0].title=this.$t("swap.coin"),this.coins.columns[1].title=this.$t("swap.lastprice"),this.coins.columns[2].title=this.$t("swap.daychange"),this.trade.columns[0].title=this.$t("swap.num"),this.trade.columns[1].title=this.$t("swap.price"),this.trade.columns[2].title=this.$t("swap.time"),this.plate.columns[0].title=this.$t("swap.stall"),this.plate.columns[1].title=this.$t("swap.price"),this.plate.columns[2].title=this.$t("swap.num"),this.plate.columns[3].title=this.$t("swap.total"),this.currentOrder.columns[1].title=this.$t("swap.time"),this.currentOrder.columns[2].title=this.$t("swap.symbol"),this.currentOrder.columns[3].title=this.$t("swap.type"),this.currentOrder.columns[4].title=this.$t("swap.direction"),this.currentOrder.columns[5].title=this.$t("swap.price"),this.currentOrder.columns[6].title=this.$t("swap.num"),this.currentOrder.columns[7].title=this.$t("swap.traded"),this.currentOrder.columns[8].title=this.$t("swap.dealamount"),this.currentOrder.columns[9].title=this.$t("swap.action"),this.historyOrder.columns[1].title=this.$t("swap.time"),this.historyOrder.columns[2].title=this.$t("swap.symbol"),this.historyOrder.columns[3].title=this.$t("swap.type"),this.historyOrder.columns[4].title=this.$t("swap.direction"),this.historyOrder.columns[5].title=this.$t("swap.price"),this.historyOrder.columns[6].title=this.$t("swap.num"),this.historyOrder.columns[7].title=this.$t("swap.done"),this.historyOrder.columns[8].title=this.$t("swap.dealamount"),this.historyOrder.columns[9].title=this.$t("swap.status")},getCNYRate(){this.$http.post(this.host+"/market/exchange-rate/usd-thb").then(t=>{var e=t.body;this.CNYRate=e.data})},getCoin(t){return this.coins._map[t]},getKline(){let t={autosize:!0,height:400,fullscreen:!0,symbol:this.symbol,interval:"5",timezone:this.getTimezone4K(),toolbar_bg:"#000000",container_id:"kline_container",datafeed:this.datafeed,library_path:"/assets/charting_library/",locale:this.getLang4K(),debug:!1,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},disabled_features:["header_resolutions","timeframes_toolbar","header_symbol_search","header_chart_type","header_compare","header_undo_redo","header_screenshot","header_saveload","volume_force_overlay","widget_logo","compare_symbol","display_market_status","go_to_date","header_interval_dialog_button","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:["disable_resolution_rebuild","keep_left_toolbar_visible_on_small_screens","hide_last_na_study_output","move_logo_to_main_pane","dont_show_boolean_study_arguments","use_localstorage_for_settings","remove_library_container_border","save_chart_properties_to_local_storage","side_toolbar_in_fullscreen_mode","constraint_dialogs_movement","hide_left_toolbar_by_default","left_toolbar","same_data_requery","header_in_fullscreen_mode"],studies_overrides:{"volume.volume.color.0":"#fa5252","volume.volume.color.1":"#12b886","volume.volume.transparency":25},custom_css_url:"bundles/common.css",supported_resolutions:["1","5","15","30","60","4H","1D","1W","1M"],charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",overrides:{"paneProperties.background":"#000000","paneProperties.vertGridProperties.color":"rgba(0,0,0,.1)","paneProperties.horzGridProperties.color":"rgba(0,0,0,.1)","scalesProperties.textColor":"#61688A","mainSeriesProperties.candleStyle.upColor":"#00b275","mainSeriesProperties.candleStyle.downColor":"#f15057","mainSeriesProperties.candleStyle.drawBorder":!1,"mainSeriesProperties.candleStyle.wickUpColor":"#589065","mainSeriesProperties.candleStyle.wickDownColor":"#AE4E54","paneProperties.legendProperties.showLegend":!1,"mainSeriesProperties.areaStyle.color1":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.color2":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.linecolor":"#9194a4",volumePaneSize:"small"},time_frames:[{text:"1min",resolution:"1",description:"realtime",title:this.$t("swap.realtime")},{text:"1min",resolution:"1",description:"1min"},{text:"5min",resolution:"5",description:"5min"},{text:"15min",resolution:"15",description:"15min"},{text:"30min",resolution:"30",description:"30min"},{text:"1hour",resolution:"60",description:"1hour",title:"1hour"},{text:"4hour",resolution:"240",description:"4hour",title:"4hour"},{text:"1day",resolution:"1D",description:"1day",title:"1day"},{text:"1week",resolution:"1W",description:"1week",title:"1week"},{text:"1mon",resolution:"1M",description:"1mon"}]};"day"===this.skin&&(t.toolbar_bg="#fff",t.custom_css_url="bundles/common_day.css",t.overrides["paneProperties.background"]="#fff",t.overrides["mainSeriesProperties.candleStyle.upColor"]="#a6d3a5",t.overrides["mainSeriesProperties.candleStyle.downColor"]="#ffa5a6"),s.e(88).then(function(){var e=[s("s2Hi")];(function(e){var s=window.tvWidget=new TradingView.widget(t);s.onChartReady(function(){s.chart().executeActionById("drawingToolbarAction"),s.chart().createStudy("Moving Average",!1,!1,[5],null,{"plot.color":"#EDEDED"}),s.chart().createStudy("Moving Average",!1,!1,[10],null,{"plot.color":"#ffe000"}),s.chart().createStudy("Moving Average",!1,!1,[30],null,{"plot.color":"#ce00ff"}),s.chart().createStudy("Moving Average",!1,!1,[60],null,{"plot.color":"#00adff"}),s.createButton().attr("title","realtime").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(3),s.setSymbol("","1"))}).append("<span>Time</span>"),s.createButton().attr("title","M1").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1"))}).append("<span>M1</span>"),s.createButton().attr("title","M5").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","5"))}).append("<span>M5</span>").addClass("selected"),s.createButton().attr("title","M15").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","15"))}).append("<span>M15</span>"),s.createButton().attr("title","M30").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","30"))}).append("<span>M30</span>"),s.createButton().attr("title","H1").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","60"))}).append("<span>H1</span>"),s.createButton().attr("title","H4").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","240"))}).append("<span>H4</span>"),s.createButton().attr("title","D1").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1D"))}).append("<span>D1</span>"),s.createButton().attr("title","W1").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1W"))}).append("<span>W1</span>"),s.createButton().attr("title","M1").on("click",function(){h()(this).hasClass("selected")||(h()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1M"))}).append("<span>M1</span>")})}).apply(null,e)}).catch(s.oe)},getSymbolThumb(){this.$http.post(this.host+this.api.swap.thumb,{}).then(t=>{for(var e=t.body,i=0;i<e.length;i++){(a=e[i]).base=e[i].symbol.split("/")[1],this.coins[a.base]=[],this.coins[a.base+"2"]=[],this.coins._map=[]}for(i=0;i<e.length;i++){var a;(a=e[i]).price=e[i].close=e[i].close.toFixed(this.baseCoinScale),a.rose=e[i].chg>0?"+"+(100*e[i].chg).toFixed(2)+"%":(100*e[i].chg).toFixed(2)+"%",a.coin=e[i].symbol.split("/")[0],a.base=e[i].symbol.split("/")[1],a.href=(a.coin+"_"+a.base).toLowerCase(),a.isFavor=!1,this.coins._map[a.symbol]=a,0==a.zone?this.coins[a.base].push(a):this.coins[a.base+"2"].push(a),a.symbol==this.currentCoin.symbol&&(this.currentCoin=a,this.form.entrustPrice=a.price)}s.e(90).then(function(){var t=[s("BWkg")];(function(t){t.clickScTab()}).apply(null,t)}).catch(s.oe),this.startWebsock(),this.changeBaseCion(this.basecion)})},getSymbolInfo(){this.$http.post(this.host+this.api.swap.symbolInfo,{symbol:this.currentCoin.symbol}).then(t=>{var e=t.body;null!=e&&(this.currentCoin.coinScale=e.coinScale,this.currentCoin.baseCoinScale=e.baseCoinScale,this.baseCoinScale=e.baseCoinScale,this.coinScale=e.coinScale,this.symbolFee=e.fee,this.enableMarketBuy=e.enableMarketBuy,this.enableMarketSell=e.enableMarketSell,this.exchangeable=e.exchangeable,this.contractCoinInfo=e,1==this.contractCoinInfo.leverageType&&(this.leverageList=this.contractCoinInfo.leverage.split(",")),this.isLogin&&this.getMemberContractWallet())})},getMemberContractWallet(){this.$http.post(this.host+this.api.swap.contractWallet,{contractCoinId:this.contractCoinInfo.id}).then(t=>{var e=t.body;if(null!=e){e.data&&(this.contractWalletInfo=e.data),"FIXED"==this.contractWalletInfo.usdtPattern?this.marginMode="1":this.marginMode="0",this.buyLeverage=this.contractWalletInfo.usdtBuyLeverage+"",this.sellLeverage=this.contractWalletInfo.usdtSellLeverage+"";var s=this.contractCoinInfo.leverage.split(",");if(Number(this.buyLeverage)<Number(s[0])&&(this.buyLeverage=s[0]),Number(this.sellLeverage)<Number(s[0])&&(this.sellLeverage=s[0]),Number(this.buyLeverage)>Number(s[s.length-1])&&(this.buyLeverage=s[s.length-1]),Number(this.sellLeverage)>Number(s[s.length-1])&&(this.sellLeverage=s[s.length-1]),this.contractWalletInfo.usdtBuyPosition>0||this.contractWalletInfo.usdtFrozenBuyPosition>0){var i=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber,a={direction:"Buy",openPrice:this.contractWalletInfo.usdtBuyPrice,pl:i,position:this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition,avaPosition:this.contractWalletInfo.usdtBuyPosition,margin:this.contractWalletInfo.usdtBuyPrincipalAmount,leverage:this.contractWalletInfo.usdtBuyLeverage,plRatio:i/this.contractWalletInfo.usdtBuyPrincipalAmount,mRatio:(i+this.contractWalletInfo.usdtBuyPrincipalAmount)/this.contractWalletInfo.usdtBuyPrincipalAmount/this.contractWalletInfo.usdtBuyLeverage,cmRatio:this.contractCoinInfo.maintenanceMarginRate};this.currentPositionList.splice(1),this.$set(this.currentPositionList,0,a)}else this.currentPositionList.splice(0,1);if(this.contractWalletInfo.usdtSellPosition>0||this.contractWalletInfo.usdtFrozenSellPosition>0){var n=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber;a={direction:"Sell",openPrice:this.contractWalletInfo.usdtSellPrice,pl:n,position:this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition,avaPosition:this.contractWalletInfo.usdtSellPosition,margin:this.contractWalletInfo.usdtSellPrincipalAmount,leverage:this.contractWalletInfo.usdtSellLeverage,plRatio:this.contractWalletInfo.usdtTotalProfitAndLoss/this.contractWalletInfo.usdtSellPrincipalAmount,mRatio:(n+this.contractWalletInfo.usdtSellPrincipalAmount)/this.contractWalletInfo.usdtSellPrincipalAmount/this.contractWalletInfo.usdtSellLeverage,cmRatio:this.contractCoinInfo.maintenanceMarginRate};1==this.currentPositionList.length?this.$set(this.currentPositionList,1,a):this.$set(this.currentPositionList,0,a)}else this.currentPositionList.splice(1,1);this.getCurrentEntrustOrders(),this.getHistoryEntrustOrders()}})},getPlate(t=""){var e={};e.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.swap.platemini,e).then(e=>{this.plate.askRows=[],this.plate.bidRows=[];let s=e.body;if(s.ask&&s.ask.items){for(var i=0;i<s.ask.items.length;i++)s.ask.items[i].totalAmount=0==i?s.ask.items[i].amount:s.ask.items[i-1].totalAmount+s.ask.items[i].amount;if(s.ask.items.length>=this.plate.maxPostion){for(i=this.plate.maxPostion;i>0;i--){(a=s.ask.items[i-1]).direction="SELL",a.position=i,this.plate.askRows.push(a)}const t=this.plate.askRows,e=(t.length,t[0].totalAmount);this.plate.askTotle=e}else{for(i=this.plate.maxPostion;i>s.ask.items.length;i--){(a={price:0,amount:0,direction:"SELL"}).position=i,a.totalAmount=a.amount,this.plate.askRows.push(a)}for(i=s.ask.items.length;i>0;i--){var a;(a=s.ask.items[i-1]).direction="SELL",a.position=i,this.plate.askRows.push(a)}var n=s.ask.items.length-1>0?s.ask.items.length-1:0;const t=this.plate.askRows,e=(t.length,t[n].totalAmount);this.plate.askTotle=e}}if(s.bid&&s.bid.items){for(i=0;i<s.bid.items.length;i++)s.bid.items[i].totalAmount=0==i?s.bid.items[i].amount:s.bid.items[i-1].totalAmount+s.bid.items[i].amount;for(i=0;i<s.bid.items.length;i++){if((r=s.bid.items[i]).direction="BUY",r.position=i+1,this.plate.bidRows.push(r),i==this.plate.maxPostion-1)break}if(s.bid.items.length<this.plate.maxPostion){for(i=s.bid.items.length;i<this.plate.maxPostion;i++){var r;(r={price:0,amount:0,direction:"BUY"}).position=i+1,r.totalAmount=0,this.plate.bidRows.push(r)}var o=s.bid.items.length-1>0?s.bid.items.length-1:0;const t=this.plate.bidRows,e=(t.length,t[o].totalAmount);this.plate.bidTotle=e}else{const t=this.plate.bidRows,e=t[t.length-1].totalAmount;this.plate.bidTotle=e}}""!=t&&(this.selectedPlate=t)})},getPlateFull(){var t={};t.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.swap.platefull,t).then(t=>{var e=t.body;this.fullTrade=e,e.skin=this.skin,this.$refs.depthGraph.draw(e)})},getTrade(){var t={};t.symbol=this.currentCoin.symbol,t.size=20,this.$http.post(this.host+this.api.swap.trade,t).then(t=>{this.trade.rows=[];for(var e=t.body,s=0;s<e.length;s++)this.trade.rows.push(e[s])})},successCallback(t,e){t.datafeed=new u(t.host+"/swap",t.currentCoin,e,t.baseCoinScale),t.getKline(),e.subscribe("/topic/swap/thumb",function(e){var s=JSON.parse(e.body),i=t.getCoin(s.symbol);null!=i&&(i.price=s.close,i.rose=s.chg>0?"+"+(100*s.chg).toFixed(2)+"%":(100*s.chg).toFixed(2)+"%",i.close=s.close,i.high=s.high,i.low=s.low,i.turnover=parseInt(s.volume),i.volume=s.volume,i.usdRate=s.usdRate)}),e.subscribe("/topic/swap/trade/"+t.currentCoin.symbol,function(e){var s=JSON.parse(e.body);if(s.length>0)for(var i=0;i<s.length;i++)t.trade.rows.unshift(s[i]);t.trade.rows.length>30&&(t.trade.rows=t.trade.rows.slice(0,30))}),t.isLogin,e.subscribe("/topic/swap/trade-plate/"+t.currentCoin.symbol,function(e){var s=JSON.parse(e.body);if("SELL"==s.direction){var i=s.items;t.plate.askRows=[];let e=0;for(var a=t.plate.maxPostion-1;a>=0;a--){var n={};a<i.length?n=i[a]:(n.price=0,n.amount=0),n.direction="SELL",n.position=a+1,t.plate.askRows.push(n)}for(a=t.plate.askRows.length-1;a>=0;a--)a==t.plate.askRows.length-1||0==t.plate.askRows[a].price?t.plate.askRows[a].totalAmount=t.plate.askRows[a].amount:t.plate.askRows[a].totalAmount=t.plate.askRows[a+1].totalAmount+t.plate.askRows[a].amount,e+=t.plate.askRows[a].amount;t.plate.askTotle=e}else{var r=s.items;t.plate.bidRows=[];let e=0;for(a=0;a<t.plate.maxPostion;a++){var o={};a<r.length?o=r[a]:(o.price=0,o.amount=0),o.direction="BUY",o.position=a+1,t.plate.bidRows.push(o)}for(a=0;a<t.plate.bidRows.length;a++)0==a||0==t.plate.bidRows[a].amount?t.plate.bidRows[a].totalAmount=t.plate.bidRows[a].amount:t.plate.bidRows[a].totalAmount=t.plate.bidRows[a-1].totalAmount+t.plate.bidRows[a].amount,e+=t.plate.bidRows[a].amount;t.plate.bidTotle=e}"s"==t.currentImgTable&&t.getPlateFull()})},startWebsock(){if(this.stompClient)return console.log("opening...."),void this.stompClient.ws.close();var t=null,e=this,s=new v(e.wssHost+e.api.swap.ws);t=m.over(s),this.stompClient=t,t.debug=!1,t.connect({},function(s){e.successCallback(e,t)},()=>{e.reconnect(e)})},reconnect(t){console.info("in reconnect function");let e=!1;const s=setInterval(()=>{console.info("in interval"+Math.random()),t.stompClient&&(console.log("reconnect opening....."),clearInterval(s),e=!0);var i=null,a=new v(t.wssHost+t.api.swap.ws);i=m.over(a),t.stompClient=i,i.debug=!1,i.connect({},a=>{console.info("reconnected success"),clearInterval(s),e=!0,t.successCallback(t,i)},()=>{console.info("reconnect failed"),console.info("connected:"+e),e&&console.info("connect .... what?"),t.reconnect(t)})},2e3)},open_order(){this.showMarket=!1},close_order(){this.showMarket=!0},gohref(t,e){this.$router.push({name:"SwapPair",params:{pair:t.href}})},buyPlate(t){this.form.entrustPrice=t.price},sellPlate(t){this.form.entrustPrice=t.price},cancel(t){var e=this;this.$Modal.confirm({title:"撤单提示",content:this.$t("swap.undotip"),onOk:()=>{let s={entrustId:t};this.$http.post(this.host+this.api.swap.cancel,s).then(t=>{var s=t.body;0==s.code?(this.$Notice.success({title:this.$t("swap.tip"),desc:this.$t("swap.cancelsuccess")}),setTimeout(function(){e.getMemberContractWallet()},1e3)):this.$Notice.error({title:this.$t("swap.tip"),desc:s.message})})}})},showMarginModeModal(){this.isLogin&&(this.marginModeModal=!0)},changeMarginMode(t){if(!this.isLogin)return;let e={contractCoinId:this.contractCoinInfo.id,targetPattern:Number(t)};this.$http.post(this.host+this.api.swap.switchPattern,e).then(t=>{var e=t.body;0==e.code?(this.$Message.success(this.$t("swap.marginModeSuccessTip")),this.getMemberContractWallet()):this.$Message.error(e.message)})},showAdjustLeverage(t){if(this.isLogin){this.leverageModal=!0,this.leverageType=this.contractCoinInfo.leverageType,this.leverageAdjustVal=1==t?Number(this.contractWalletInfo.usdtBuyLeverage):Number(this.contractWalletInfo.usdtSellLeverage);var e=this.contractCoinInfo.leverage.split(",");this.leverageAdjustVal<e[0]&&(this.leverageAdjustVal=Number(e[0])),this.leverageAdjustVal>e[e.length-1]&&(this.leverageAdjustVal=Number(e[e.length-1])),this.changeLeverageType=t}},changeLeverage(t){this.changeLeverageType,this.leverageAdjustVal=t},changeEntrustOrderType(t){"2"==t?(this.form.trigglePrice="",this.form.entrustPrice="",this.form.volume=""):"0"==t&&(this.form.entrustPrice=this.currentCoin.price,this.form.volume="")},onLeverageChange(t){this.isLogin&&(this.leverageAdjustVal=t)},adjustLeverage(){if(!this.isLogin)return;var t=this.contractCoinInfo.leverage.split(",");if(this.leverageAdjustVal<Number(t[0]))return this.leverageAdjustVal=Number(t[0]),void this.$Message.error(this.$t("swap.levmintip"));if(this.leverageAdjustVal>Number(t[t.length-1]))return this.leverageAdjustVal=Number(t[t.length-1]),void this.$Message.error(this.$t("swap.levmaxtip"));if(1==this.changeLeverageType&&this.buyLeverage==this.leverageAdjustVal)return void(this.leverageModal=!1);if(2==this.changeLeverageType&&this.sellLeverage==this.leverageAdjustVal)return void(this.leverageModal=!1);this.$Spin.show();var e=this;let s=!1,i={contractCoinId:this.contractCoinInfo.id,leverage:this.leverageAdjustVal,direction:1==this.changeLeverageType?0:1};this.$http.post(this.host+this.api.swap.modifyLeverage,i).then(t=>{var i=t.body;0==i.code?(this.$Notice.success({title:e.$t("swap.tip"),desc:e.$t("swap.success")}),s=!0,this.getMemberContractWallet()):this.$Notice.error({title:e.$t("swap.tip"),desc:i.message}),this.$Spin.hide(),s&&(1==this.changeLeverageType?this.buyLeverage=this.leverageAdjustVal:this.sellLeverage=this.leverageAdjustVal,this.leverageModal=!1)})},onOpenAmountFocus(){this.sliderOpenPercent=0},onChangeOpenPercent(t){this.sliderOpenPercent=t},onCloseAmountFocus(){this.sliderClosePercent=0},onChangeClosePercent(t){this.sliderClosePercent=t},onOpen(t){if(!this.isLogin)return;var e=0;this.sliderOpenPercent>0?(e=0==t?parseInt(this.avaOpenBuy*this.sliderOpenPercent/100):parseInt(this.avaOpenSell*this.sliderOpenPercent/100))<1&&(e=1):e=parseInt(this.form.volume),""!=this.form.triggerPrice&&void 0!=this.form.triggerPrice||(this.form.triggerPrice=0);var s=parseInt(this.entrustOrderType);if(2==s&&this.form.triggerPrice<=0)return void this.$Message.error(this.$t("swap.triggerpriceshouldbigger"));let i={type:s,direction:t,contractCoinId:this.contractCoinInfo.id,triggerPrice:Number(this.form.triggerPrice),entrustPrice:""==this.form.entrustPrice?0:Number(this.form.entrustPrice),leverage:0==t?Number(this.buyLeverage):Number(this.sellLeverage),volume:e};if(i.volume<=0)this.$Message.error(this.$t("swap.pleaseinputopenvolume"));else{if(/^\+?[1-9][0-9]*$/.test(i.volume)){if(0==t){if(i.volume>this.avaOpenBuy&&3!=i.type)return void this.$Message.error(this.$t("swap.noenoughbalance"))}else if(i.volume>this.avaOpenSell&&3!=i.type)return void this.$Message.error(this.$t("swap.noenoughbalance"));if(1!=this.entrustOrderType||""!=this.form.entrustPrice&&0!=this.form.entrustPrice){this.$Spin.show();var a=this;this.$http.post(this.host+this.api.swap.open,i).then(t=>{var e=t.body;0==e.code?(this.$Notice.success({title:a.$t("swap.tip"),desc:a.$t("swap.success")}),setTimeout(function(){a.getMemberContractWallet()},1e3)):this.$Notice.error({title:a.$t("swap.tip"),desc:e.message}),this.$Spin.hide()})}else this.$Message.error(this.$t("swap.pleaseinputrightentrustprice"))}else this.$Message.error(this.$t("swap.pleaseinputcorrectopenvolume"))}},onClose(t){if(!this.isLogin)return;var e=0;if(this.sliderClosePercent>0?(e=0==t?parseInt(this.contractWalletInfo.usdtSellPosition*this.sliderClosePercent/100):parseInt(this.contractWalletInfo.usdtBuyPosition*this.sliderClosePercent/100))<1&&(e=1):e=parseInt(this.form.volume),""!=this.form.triggerPrice&&void 0!=this.form.triggerPrice||(this.form.triggerPrice=0),2==parseInt(this.entrustOrderType)&&this.form.triggerPrice<=0)return void this.$Message.error(this.$t("swap.triggerpriceshouldbigger"));let s={type:this.entrustOrderType,direction:t,contractCoinId:this.contractCoinInfo.id,triggerPrice:Number(this.form.triggerPrice),entrustPrice:""==this.form.entrustPrice?0:Number(this.form.entrustPrice),volume:e};if(s.volume<=0)this.$Message.error(this.$t("swap.pleaseinputclosevolume"));else{if(/^\+?[1-9][0-9]*$/.test(s.volume)){if(0==t){if(s.volume>this.contractWalletInfo.usdtSellPosition&&3!=s.type)return void this.$Message.error(this.$t("swap.noenoughposition"))}else if(s.volume>this.contractWalletInfo.usdtBuyPosition&&3!=s.type)return void this.$Message.error(this.$t("swap.noenoughposition"));if(1!=this.entrustOrderType||""!=this.form.entrustPrice&&0!=this.form.entrustPrice){this.$Spin.show();var i=this;this.$http.post(this.host+this.api.swap.close,s).then(t=>{var e=t.body;0==e.code?(this.$Notice.success({title:i.$t("swap.tip"),desc:i.$t("swap.success")}),setTimeout(function(){i.getMemberContractWallet()},1e3)):this.$Notice.error({title:i.$t("swap.tip"),desc:e.message}),this.$Spin.hide()})}else this.$Message.error(this.$t("swap.pleaseinputrightentrustprice"))}else this.$Message.error(this.$t("swap.pleaseinputcorrectclosevolume"))}},getCurrentEntrustOrders(){if(!this.isLogin)return;var t=this;let e={contractCoinId:this.contractCoinInfo.id,pageNo:1,pageSize:50};this.$http.post(this.host+this.api.swap.getEntrustList,e).then(e=>{var s=e.body;s.content.length>0?(this.currentEntrustOrderList.splice(0),s.content.forEach(function(e){t.currentEntrustOrderList.push(e)})):this.currentEntrustOrderList.splice(0)})},getHistoryEntrustOrders(){if(!this.isLogin)return;var t=this;let e={contractCoinId:this.contractCoinInfo.id,pageNo:1,pageSize:50};this.$http.post(this.host+this.api.swap.getHistoryEntrustList,e).then(e=>{var s=e.body;s.content.length>0?(this.historyEntrustOrderList.splice(0),s.content.forEach(function(e){t.historyEntrustOrderList.push(e)})):this.historyEntrustOrderList.splice(0)})}}},f={render:function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"container swap",class:e.skin},[a("div",{staticClass:"page-exchange-title",staticStyle:{"background-color":"#000000"}},[a("span",[a("img",{attrs:{src:s("QC4D")},on:{click:function(){t.isShowSwapMenu=!0}}})]),e._v(" "),a("span",[e._v(e._s(e.currentCoin.coin)),a("small",[e._v("/"+e._s(e.currentCoin.base))])]),e._v(" "),a("span")]),e._v(" "),a("ContractTab",{attrs:{contractUrl:"/swap"}}),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"tab-menu"},[a("span",{class:{isActiveMenu:1==e.isActiveMenu},on:{click:function(t){return e.changeTabMenu(1)}}},[e._v("K-line")]),a("span",{class:{isActiveMenu:2==e.isActiveMenu},on:{click:function(t){return e.changeTabMenu(2)}}},[e._v("Transaction")]),a("span",{class:{isActiveMenu:3==e.isActiveMenu},on:{click:function(t){return e.changeTabMenu(3)}}},[e._v("Trade history")])]),e._v(" "),1==e.isActiveMenu?a("div",{staticClass:"left",staticStyle:{position:"relative"}},[e.isShowSwapMenu?a("div",{staticClass:"swap-menu right"},[a("div",{staticClass:"coin-menu-close"},[a("img",{attrs:{src:s("Bkze")},on:{click:function(){t.isShowSwapMenu=!1}}})]),e._v(" "),a("div",{staticClass:"coin-menu"},[a("div",{staticStyle:{padding:"8px 10px",height:"48px"}},[a("Input",{attrs:{search:"",placeholder:e.$t("common.searchplaceholderswap")},on:{"on-change":e.seachInputChange},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),e._v(" "),a("div",{staticClass:"sc_filter",staticStyle:{display:"none"}},[a("span",{class:{active:"usdt"===e.basecion},on:{click:function(t){return e.changeBaseCion("usdt")}}},[e._v("USDT")])]),e._v(" "),a("Table",{directives:[{name:"show",rawName:"v-show",value:"usdt"===e.basecion,expression:"basecion==='usdt'"}],attrs:{"no-data-text":e.$t("common.nodata"),"highlight-row":"",id:"USDT",columns:e.coins.columns,data:e.dataIndex},on:{"on-current-change":e.gohref}})],1)]):e._e(),e._v(" "),a("div",{staticClass:"center"},[a("div",{staticClass:"symbol"},[a("div",{staticClass:"symbol-info"},[a("div",{staticClass:"item"},[a("span",{staticClass:"coin"},[e._v(e._s(e.currentCoin.symbol)+" "+e._s(e.$t("swap.swapindex"))+"\n                ")])]),e._v(" "),a("div",{staticClass:"item",staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"num",class:{buy:e.currentCoin.change>0,sell:e.currentCoin.change<0},staticStyle:{"font-size":"18px","font-weight":"bold"}},[e._v(e._s(e._f("toFixed")(e.currentCoin.close,4)))])])]),e._v(" "),a("div",{staticClass:"symbol-info",staticStyle:{width:"50%"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"text"},[e._v(e._s(e.$t("service.Change")))]),e._v(" "),a("span",{staticClass:"num",class:{buy:e.currentCoin.change>0,sell:e.currentCoin.change<0}},[e._v(e._s(e.currentCoin.rose))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"text"},[e._v(e._s(e.$t("service.high")))]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("toFixed")(e.currentCoin.high,4)))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"text"},[e._v(e._s(e.$t("service.low")))]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("toFixed")(e.currentCoin.low,4)))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"text"},[e._v(e._s(e.$t("service.ExchangeNum")))]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("toFixed")(e.currentCoin.volume,4))+" "+e._s(e.currentCoin.coin))])]),e._v(" "),a("div",{staticClass:"item"})])]),e._v(" "),a("div",{staticClass:"handler handler-line"},[a("span",{class:{active:"k"===e.currentImgTable},on:{click:function(t){return e.changeImgTable("k")}}},[e._v(e._s(e.$t("swap.kline")))]),e._v(" "),a("span",{class:{active:"s"===e.currentImgTable},on:{click:function(t){return e.changeImgTable("s")}}},[e._v(e._s(e.$t("swap.depth")))])]),e._v(" "),a("div",{staticClass:"imgtable"},[a("div",{class:{hiddenkline:"s"===e.currentImgTable},attrs:{id:"kline_container"}}),e._v(" "),a("DepthGraph",{ref:"depthGraph",class:{hiddenkline:"k"===e.currentImgTable}})],1)]),e._v(" "),a("div",{staticClass:"handlers"},[a("span",{staticClass:"handler handler-all",class:{active:"all"==e.selectedPlate},on:{click:function(t){return e.changePlate("all")}}}),e._v(" "),a("span",{staticClass:"handler handler-green",class:{active:"buy"==e.selectedPlate},on:{click:function(t){return e.changePlate("buy")}}}),e._v(" "),a("span",{staticClass:"handler handler-red",class:{active:"sell"==e.selectedPlate},on:{click:function(t){return e.changePlate("sell")}}})]),e._v(" "),a("Table",{directives:[{name:"show",rawName:"v-show",value:"buy"!=e.selectedPlate,expression:"selectedPlate!='buy'"}],ref:"currentRowTable",staticClass:"sell_table",attrs:{"no-data-text":e.$t("common.nodata"),"highlight-row":"",columns:e.plate.columns,data:e.plate.askRows},on:{"on-current-change":e.buyPlate}}),e._v(" "),a("div",{staticClass:"plate-nowprice"},[a("span",{staticClass:"price",class:{buy:e.currentCoin.change>0,sell:e.currentCoin.change<0}},[e._v(e._s(e._f("toFixed")(e.currentCoin.price,e.baseCoinScale)))]),e._v(" "),e.currentCoin.change>0?a("span",{staticClass:"buy"},[e._v("↑")]):e.currentCoin.change<0?a("span",{staticClass:"sell"},[e._v("↓")]):e._e(),e._v(" "),a("span",{staticClass:"price-cny"},[e._v(" ≈ "+e._s(e._f("toFixed")(e.currentCoin.usdRate*e.CNYRate,2))+" (THB)")])]),e._v(" "),a("Table",{directives:[{name:"show",rawName:"v-show",value:"sell"!=e.selectedPlate,expression:"selectedPlate!='sell'"}],staticClass:"buy_table",class:{hiddenkline:"all"===e.selectedPlate},attrs:{"no-data-text":e.$t("common.nodata"),"highlight-row":"",columns:e.plate.columns,data:e.plate.bidRows},on:{"on-current-change":e.sellPlate}})],1):e._e(),e._v(" "),2==e.isActiveMenu?a("div",{staticClass:"left plate-wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"order",staticStyle:{"margin-top":"5px","min-height":"320px","background-color":"#000000",color:"#61688A"}},[a("div",{staticStyle:{height:"32px","line-height":"32px","padding-left":"10px","border-bottom":"1px solid #27313e","font-size":"13px"}},[a("span",[e._v(e._s(e.$t("swap.myswapaccount")))]),e._v(" "),a("router-link",{staticClass:"linkmore",attrs:{to:"/swapAssets/"}},[e._v(e._s(e.$t("swap.zijinhuazhuan")))])],1),e._v(" "),a("div",{staticClass:"table swap-my-account"},[a("div",{staticClass:"account-item",staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{width:"35%"}},[e._v(e._s(e.$t("swap.accountmode")))]),e._v(" "),a("div",{staticClass:"mode",staticStyle:{width:"65%"}},["1"===e.marginMode?a("Button",{attrs:{size:"small"},on:{click:function(t){return e.showMarginModeModal()}}},[e._v(e._s(e.$t("swap.marginMode1")))]):e._e(),e._v(" "),"0"===e.marginMode?a("Button",{attrs:{size:"small"},on:{click:function(t){return e.showMarginModeModal()}}},[e._v(e._s(e.$t("swap.marginMode2")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"account-item",staticStyle:{"margin-top":"20px",height:"42px","padding-bottom":"5px","border-bottom":"1px dashed #27313e"}},[a("div",{staticStyle:{width:"35%"}},[e._v(e._s(e.$t("swap.accountmargin")))]),e._v(" "),a("div",{staticClass:"margin",staticStyle:{width:"65%",display:"flex","justify-content":"space-between"}},[a("Button",{staticStyle:{flex:"0 0 47%",border:"none",background:"#4db872"},attrs:{size:"small"},on:{click:function(t){return e.showAdjustLeverage(1)}}},[e._v(e._s(e.buyLeverage)+"X"+e._s(e.$t("swap.up")))]),e._v(" "),a("Button",{staticStyle:{flex:"0 0 47%",border:"none",background:"#ee6560"},attrs:{size:"small"},on:{click:function(t){return e.showAdjustLeverage(2)}}},[e._v(e._s(e.sellLeverage)+"X"+e._s(e.$t("swap.down")))])],1)]),e._v(" "),a("div",{staticClass:"account-item",staticStyle:{"margin-top":"10px"}},[a("div",[e._v(e._s(e.$t("swap.accountquanyi")))]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fixed4")(e.totalQuanyi)))])])]),e._v(" "),a("div",{staticClass:"account-item"},[a("div",[e._v(e._s(e.$t("swap.profitandloss")))]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fixed4")(e.profitAndLoss)))])])]),e._v(" "),a("div",{staticClass:"account-item"},[a("div",[e._v(e._s(e.$t("swap.principalAmount")))]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fixed4")(e.contractWalletInfo.usdtBalance)))])])]),e._v(" "),a("div",{staticClass:"account-item"},[a("div",[e._v(e._s(e.$t("swap.positionAmount")))]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fixed4")(e.contractWalletInfo.usdtBuyPrincipalAmount+e.contractWalletInfo.usdtSellPrincipalAmount)))])])]),e._v(" "),a("div",{staticClass:"account-item"},[a("div",[e._v(e._s(e.$t("swap.frozenAmount")))]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fixed4")(e.contractWalletInfo.usdtFrozenBalance)))])])]),e._v(" "),a("div",{staticClass:"account-item"},[a("div",[e._v(e._s(e.$t("swap.principalRate")))]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("percent")(e.assetRate))+" %")])])])])]),e._v(" "),a("div",{staticClass:"order",staticStyle:{"margin-top":"5px","background-color":"#000000",height:"320px"}},[a("div",{staticClass:"order-handler",staticStyle:{"border-bottom":"1px solid rgb(39, 49, 62)"}},[a("span",{class:{active:1===e.entrustType},staticStyle:{width:"50%","text-align":"center"},on:{click:function(t){return e.entrustChange(1)}}},[e._v(e._s(e.$t("swap.open")))]),e._v(" "),a("span",{class:{active:2===e.entrustType},staticStyle:{width:"50%","text-align":"center"},on:{click:function(t){return e.entrustChange(2)}}},[e._v(e._s(e.$t("swap.close")))])]),e._v(" "),a("div",{staticClass:"table open-close"},[1===e.entrustType?a("div",{staticClass:"open"},[a("RadioGroup",{attrs:{type:"button",size:"default"},on:{"on-change":e.changeEntrustOrderType},model:{value:e.entrustOrderType,callback:function(t){e.entrustOrderType=t},expression:"entrustOrderType"}},[a("Radio",{attrs:{label:"1"}},[e._v(e._s(e.$t("swap.limited_price")))]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v(e._s(e.$t("swap.market_price")))]),e._v(" "),a("Radio",{attrs:{label:"2"}},[e._v(e._s(e.$t("swap.spot_price")))])],1),e._v(" "),a("Form",{staticStyle:{width:"94%","margin-left":"3%","margin-top":"10px"}},["1"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.entrustprice")))]),e._v(" "),a("Input",{on:{"on-keyup":function(t){e.form.entrustPrice=e.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:e.form.entrustPrice,callback:function(t){e.$set(e.form,"entrustPrice",t)},expression:"form.entrustPrice"}}),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.currentCoin.base))])],1):e._e(),e._v(" "),"0"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.entrustprice")))]),e._v(" "),a("Input",{staticClass:"market-price",attrs:{value:e.$t("swap.marketpriceplaceholder"),disabled:""}})],1):e._e(),e._v(" "),"2"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.triggleprice")))]),e._v(" "),a("Input",{on:{"on-keyup":function(t){e.form.triggerPrice=e.form.triggerPrice.replace(/[^\d^\.]+/g,"")}},model:{value:e.form.triggerPrice,callback:function(t){e.$set(e.form,"triggerPrice",t)},expression:"form.triggerPrice"}}),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.currentCoin.base))])],1):e._e(),e._v(" "),"2"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.entrustprice")))]),e._v(" "),a("Input",{attrs:{placeholder:e.$t("swap.triggleplaceholder")},on:{"on-keyup":function(t){e.form.entrustPrice=e.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:e.form.entrustPrice,callback:function(t){e.$set(e.form,"entrustPrice",t)},expression:"form.entrustPrice"}}),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.currentCoin.base))])],1):e._e(),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.openvolume")))]),e._v(" "),0==e.sliderOpenPercent?a("Input",{on:{"on-keyup":function(t){e.form.volume=e.form.volume.replace(/\D/g,"")}},model:{value:e.form.volume,callback:function(t){e.$set(e.form,"volume",t)},expression:"form.volume"}}):e._e(),e._v(" "),0!=e.sliderOpenPercent?a("Input",{staticClass:"market-price",attrs:{readonly:!0,value:e.sliderOpenPercent+" %"},on:{"on-focus":e.onOpenAmountFocus}}):e._e(),e._v(" "),0==e.sliderOpenPercent?a("label",{staticClass:"after"},[e._v(e._s(e.$t("swap.shareNumber")))]):e._e(),e._v(" "),a("span",{staticStyle:{position:"absolute",top:"32px",right:"0px",color:"#7c7f82"}},[e._v("1"+e._s(e.$t("swap.shareNumber"))+" = "+e._s(e.contractCoinInfo.shareNumber)+"USDT")])],1),e._v(" "),"2"!=e.entrustOrderType?a("div",{staticClass:"split-panel"},[a("div",{class:{selected:25===Number(e.sliderOpenPercent)},on:{click:function(t){return e.onChangeOpenPercent(25)}}},[e._v("25%")]),e._v(" "),a("div",{class:{selected:50===Number(e.sliderOpenPercent)},on:{click:function(t){return e.onChangeOpenPercent(50)}}},[e._v("50%")]),e._v(" "),a("div",{class:{selected:75===Number(e.sliderOpenPercent)},on:{click:function(t){return e.onChangeOpenPercent(75)}}},[e._v("75%")]),e._v(" "),a("div",{class:{selected:100===Number(e.sliderOpenPercent)},on:{click:function(t){return e.onChangeOpenPercent(100)}}},[e._v("100%")])]):e._e()],1),e._v(" "),a("div",{staticClass:"open-tips"},[a("div",[a("span",{staticClass:"green"},[e._v(e._s(e.$t("swap.canup"))+":")]),a("span",{staticClass:"num"},[e._v(e._s(e.avaOpenBuy)+" "+e._s(e.$t("swap.shareNumber")))])]),e._v(" "),a("div",[a("span",{staticClass:"red"},[e._v(e._s(e.$t("swap.candown"))+":")]),a("span",{staticClass:"num"},[e._v(e._s(e.avaOpenSell)+" "+e._s(e.$t("swap.shareNumber")))])])]),e._v(" "),e.isLogin?a("div",{staticClass:"operate"},[a("Button",{staticClass:"open-up",attrs:{type:"primary",shape:"circle"},on:{click:function(t){return e.onOpen(0)}}},[e._v(e._s(e.$t("swap.openup")))]),e._v(" "),a("Button",{staticClass:"open-down",attrs:{type:"primary",shape:"circle"},on:{click:function(t){return e.onOpen(1)}}},[e._v(e._s(e.$t("swap.opendown")))])],1):e._e(),e._v(" "),e.isLogin?e._e():a("div",{staticClass:"operate-login",staticStyle:{width:"94%","margin-left":"3%"}},[a("span",{staticStyle:{display:"inline-block",width:"100%","text-align":"center",border:"1px solid #232d3a",padding:"5px 0","border-radius":"5px"}},[e._v("\n                "+e._s(e.$t("common.please"))+"\n                "),a("router-link",{attrs:{to:"/login"}},[a("span",{staticStyle:{color:"#f0a70a"}},[e._v(e._s(e.$t("common.login")))])]),e._v(" /\n                "),a("router-link",{attrs:{to:"/register"}},[a("span",{staticStyle:{color:"#00dcff"}},[e._v(e._s(e.$t("common.register")))])])],1)])],1):a("div",{staticClass:"open"},[a("RadioGroup",{attrs:{type:"button",size:"default"},on:{"on-change":e.changeEntrustOrderType},model:{value:e.entrustOrderType,callback:function(t){e.entrustOrderType=t},expression:"entrustOrderType"}},[a("Radio",{attrs:{label:"1"}},[e._v(e._s(e.$t("swap.limited_price")))]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v(e._s(e.$t("swap.market_price")))]),e._v(" "),a("Radio",{attrs:{label:"2"}},[e._v(e._s(e.$t("swap.spot_price")))])],1),e._v(" "),a("Form",{staticStyle:{width:"94%","margin-left":"3%","margin-top":"10px"}},["1"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.entrustprice")))]),e._v(" "),a("Input",{on:{"on-keyup":function(t){e.form.entrustPrice=e.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:e.form.entrustPrice,callback:function(t){e.$set(e.form,"entrustPrice",t)},expression:"form.entrustPrice"}}),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.currentCoin.base))])],1):e._e(),e._v(" "),"0"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.entrustprice")))]),e._v(" "),a("Input",{staticClass:"market-price",attrs:{value:e.$t("swap.marketpriceplaceholder"),disabled:""}})],1):e._e(),e._v(" "),"2"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.triggleprice")))]),e._v(" "),a("Input",{on:{"on-keyup":function(t){e.form.trigglePrice=e.form.triggerPrice.replace(/[^\d^\.]+/g,"")}},model:{value:e.form.triggerPrice,callback:function(t){e.$set(e.form,"triggerPrice",t)},expression:"form.triggerPrice"}}),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.currentCoin.base))])],1):e._e(),e._v(" "),"2"==e.entrustOrderType?a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.entrustprice")))]),e._v(" "),a("Input",{attrs:{placeholder:e.$t("swap.triggleplaceholder")},on:{"on-keyup":function(t){e.form.entrustPrice=e.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:e.form.entrustPrice,callback:function(t){e.$set(e.form,"entrustPrice",t)},expression:"form.entrustPrice"}}),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.currentCoin.base))])],1):e._e(),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticClass:"before"},[e._v(e._s(e.$t("swap.closevolume")))]),e._v(" "),0==e.sliderClosePercent?a("Input",{on:{"on-keyup":function(t){e.form.volume=e.form.volume.replace(/\D/g,"")}},model:{value:e.form.volume,callback:function(t){e.$set(e.form,"volume",t)},expression:"form.volume"}}):e._e(),e._v(" "),0!=e.sliderClosePercent?a("Input",{staticClass:"market-price",attrs:{readonly:!0},on:{"on-focus":e.onCloseAmountFocus}}):e._e(),e._v(" "),a("label",{staticClass:"after"},[e._v(e._s(e.$t("swap.shareNumber")))]),e._v(" "),a("span",{staticStyle:{position:"absolute",top:"32px",right:"0px",color:"#7c7f82"}},[e._v("1"+e._s(e.$t("swap.shareNumber"))+" = "+e._s(e.contractCoinInfo.shareNumber)+"USDT")])],1),e._v(" "),"2"!=e.entrustOrderType?a("div",{staticClass:"split-panel"},[a("div",{class:{selected:25===Number(e.sliderClosePercent)},on:{click:function(t){return e.onChangeClosePercent(25)}}},[e._v("25%")]),e._v(" "),a("div",{class:{selected:50===Number(e.sliderClosePercent)},on:{click:function(t){return e.onChangeClosePercent(50)}}},[e._v("50%")]),e._v(" "),a("div",{class:{selected:75===Number(e.sliderClosePercent)},on:{click:function(t){return e.onChangeClosePercent(75)}}},[e._v("75%")]),e._v(" "),a("div",{class:{selected:100===Number(e.sliderClosePercent)},on:{click:function(t){return e.onChangeClosePercent(100)}}},[e._v("100%")])]):e._e()],1),e._v(" "),a("div",{staticClass:"open-tips"},[a("div",[a("span",{staticClass:"red"},[e._v(e._s(e.$t("swap.canclosedown"))+":")]),a("span",{staticClass:"num"},[e._v(e._s(e.contractWalletInfo.usdtBuyPosition)+" "+e._s(e.$t("swap.shareNumber")))])]),e._v(" "),a("div",[a("span",{staticClass:"green"},[e._v(e._s(e.$t("swap.cancloseup"))+":")]),a("span",{staticClass:"num"},[e._v(e._s(e.contractWalletInfo.usdtSellPosition)+" "+e._s(e.$t("swap.shareNumber")))])])]),e._v(" "),e.isLogin?a("div",{staticClass:"operate"},[a("Button",{staticClass:"open-down",attrs:{type:"primary",shape:"circle"},on:{click:function(t){return e.onClose(1)}}},[e._v(e._s(e.$t("swap.closedown")))]),e._v(" "),a("Button",{staticClass:"open-up",attrs:{type:"primary",shape:"circle"},on:{click:function(t){return e.onClose(0)}}},[e._v(e._s(e.$t("swap.closeup")))])],1):e._e(),e._v(" "),e.isLogin?e._e():a("div",{staticClass:"operate-login",staticStyle:{width:"94%","margin-left":"3%"}},[a("span",{staticStyle:{display:"inline-block",width:"100%","text-align":"center",border:"1px solid #232d3a",padding:"5px 0","border-radius":"5px"}},[e._v("\n                "+e._s(e.$t("common.please"))+"\n                "),a("router-link",{attrs:{to:"/login"}},[a("span",{staticStyle:{color:"#f0a70a"}},[e._v(e._s(e.$t("common.login")))])]),e._v(" /\n                "),a("router-link",{attrs:{to:"/register"}},[a("span",{staticStyle:{color:"#00dcff"}},[e._v(e._s(e.$t("common.register")))])])],1)])],1)])]),e._v(" "),a("div",{staticClass:"trade-list"},[a("div",{staticClass:"order",staticStyle:{background:"#999"}},[a("div",{staticClass:"order-handler"},[a("span",{class:{active:"currentPositions"===e.selectedOrder},on:{click:function(t){return e.changeOrder("currentPositions")}}},[e._v(e._s(e.$t("swap.currentposition")))]),e._v(" "),a("span",{class:{active:"currentEntrustOrders"===e.selectedOrder},on:{click:function(t){return e.changeOrder("currentEntrustOrders")}}},[e._v(e._s(e.$t("swap.curdelegation")))]),e._v(" "),a("span",{class:{active:"historyEntrustOrders"===e.selectedOrder},on:{click:function(t){return e.changeOrder("historyEntrustOrders")}}},[e._v(e._s(e.$t("swap.hisdelegation")))])]),e._v(" "),a("div",{staticClass:"table"},["currentPositions"===e.selectedOrder?a("Table",{attrs:{"no-data-text":e.$t("common.nodata"),height:"285",columns:e.currentPosition.columns,data:e.positionList}}):e._e(),e._v(" "),"currentEntrustOrders"===e.selectedOrder?a("Table",{attrs:{"no-data-text":e.$t("common.nodata"),height:"285",columns:e.currentOrder.columns,data:e.currentEntrustOrderList}}):e._e(),e._v(" "),"historyEntrustOrders"===e.selectedOrder?a("Table",{attrs:{"no-data-text":e.$t("common.nodata"),height:"285",columns:e.historyOrder.columns,data:e.historyEntrustOrderList}}):e._e()],1)])])]):e._e(),e._v(" "),3==e.isActiveMenu?a("div",{staticClass:"left plate-wrap",staticStyle:{position:"relative"}},[a("div",{staticStyle:{"background-color":"#000000",height:"40px","line-height":"40px","padding-left":"5px",color:"#61688A","font-size":"13px"}},[a("span",[e._v(e._s(e.$t("swap.latestdeal")))])]),e._v(" "),a("div",{staticClass:"trade-wrap"},[a("Table",{attrs:{"no-data-text":e.$t("common.nodata"),columns:e.trade.columns,data:e.trade.rows}})],1)]):e._e()]),e._v(" "),a("PageFooter",{attrs:{curindex:"contract"}}),e._v(" "),a("Modal",{attrs:{title:e.$t("swap.modifyMarginModeTitle"),width:"20","class-name":"vertical-center-modal"},model:{value:e.marginModeModal,callback:function(t){e.marginModeModal=t},expression:"marginModeModal"}},[a("div",{staticStyle:{"text-align":"center",width:"100%"}},[a("ButtonGroup",{staticStyle:{width:"80%","text-align":"center"}},["1"===e.marginMode?a("Button",{staticStyle:{width:"50%"},attrs:{type:"primary"}},[e._v(e._s(e.$t("swap.marginMode1")))]):a("Button",{staticStyle:{width:"50%"},on:{click:function(t){return e.changeMarginMode("1")}}},[e._v(e._s(e.$t("swap.marginMode1")))]),e._v(" "),"0"===e.marginMode?a("Button",{staticStyle:{width:"50%"},attrs:{type:"primary"}},[e._v(e._s(e.$t("swap.marginMode2")))]):a("Button",{staticStyle:{width:"50%"},on:{click:function(t){return e.changeMarginMode("0")}}},[e._v(e._s(e.$t("swap.marginMode2")))])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default",size:"large"},on:{click:function(t){e.marginModeModal=!1}}},[e._v(e._s(e.$t("common.close")))])],1)]),e._v(" "),a("Modal",{attrs:{title:e.$t("swap.modifyLeverage"),width:"25","class-name":"vertical-center-modal"},model:{value:e.leverageModal,callback:function(t){e.leverageModal=t},expression:"leverageModal"}},[a("div",{staticClass:"leverage"},[2==e.leverageType?a("InputNumber",{staticStyle:{width:"100%"},attrs:{size:"large",value:e.leverageAdjustVal},on:{"update:value":function(t){e.leverageAdjustVal=t},"on-change":e.onLeverageChange}}):e._e(),e._v(" "),1==e.leverageType&&1==e.changeLeverageType?a("div",{staticClass:"leverage-panel"},e._l(e.leverageList,function(t){return a("Button",{key:t,class:{leverageSelect:Number(t)===e.leverageAdjustVal},staticStyle:{"margin-left":"5px","margin-right":"5px","margin-bottom":"10px"},on:{click:function(s){e.changeLeverage(Number(t))}}},[e._v(e._s(t)+"X")])}),1):e._e(),e._v(" "),1==e.leverageType&&2==e.changeLeverageType?a("div",{staticClass:"leverage-panel"},e._l(e.leverageList,function(t){return a("Button",{key:t,class:{leverageSelect:Number(t)===e.leverageAdjustVal},staticStyle:{"margin-left":"5px","margin-right":"5px","margin-bottom":"10px"},on:{click:function(s){e.changeLeverage(Number(t))}}},[e._v(e._s(t)+"X")])}),1):e._e()],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default",size:"large"},on:{click:function(t){e.leverageModal=!1}}},[e._v(e._s(e.$t("common.close")))]),e._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.adjustLeverage()}}},[e._v(e._s(e.$t("common.ok")))])],1)])],1)},staticRenderFns:[]};var w=s("VU/8")(_,f,!1,function(t){s("jtI+")},"data-v-1c9ba447",null);e.default=w.exports},TcDw:function(t,e){},"jtI+":function(t,e){}});