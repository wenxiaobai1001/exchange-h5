webpackJsonp([68],{TG2i:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a=s("f3u+"),o=s.n(a),r=s("JCuE");i.default.use(o.a);var n={components:{VueQriously:o.a,PageHeader:r.a},inject:["reload"],data(){return{coinAddress:{BTC:"bc1qwputd5n5zy7agg4jrsudn9vjw5gmxfysn3yvgr",ETH:"0xb2ab75518f44a1368af01bcde7879e9dc53caf1d",EUSDT:"0xb2ab75518f44a1368af01bcde7879e9dc53caf1d",USDT:"TRpJYCBuwVJRyKmMZTdwumWo2oYBfG6DqY",TUSDT:"TRpJYCBuwVJRyKmMZTdwumWo2oYBfG6DqY"},uploadUrl:this.host+"/uc/upload/oss/image",uploadHeaders:{"x-auth-token":localStorage.getItem("TOKEN")},coinType:"",imgPreview:"",payAddress:"",isSubmit:!1,amount:0,coinList:[],loading:!0,minRechargeAmount:0,rechargeAmount:0,accountType:0,isShowGetAddress:!1,txid:"R"+(new Date).getTime(),qrcode:{value:"",size:150,coinName:"",unit:""}}},methods:{handleSubmit(){let e={};return e.coinName=this.coinType,e.amount=this.amount,e.url=this.imgPreview,e.payAddress=this.payAddress,e.txId=this.txid,this.amount?this.payAddress?this.imgPreview?!this.isSubmit&&(this.isSubmit=!0,void this.$http.post(this.host+"/uc/deposit-manual/apply",e).then(e=>{var t=e.body;0==t.code?(this.$Message.success(this.$t("uc.safe.save_success")),setTimeout(()=>{history.go(-1)},1e3)):this.$Message.error(t.message),this.isSubmit=!1,this.reload()})):(this.$Message.error("Please upload recharge evidence"),!1):(this.$Message.error("Please get address."),!1):(this.$Message.error("Please input amount."),!1)},beforeUpload(e){if(e&&e.size>=8192e3)return this.$Message.error("The image is less than 8M"),!1},frontHandleSuccess(e,t,s){this.$refs.upload.fileList=[s[s.length-1]],0==e.code?this.imgPreview=e.data:this.$Message.error(e.message)},getMoney(){this.coinList=[],this.$http.post(this.host+this.api.uc.mywallet,{},{emulateJSON:!1,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(e=>{let t=e.body;if(0==t.code){for(let e=0;e<t.data.length;e++){let s=t.data[e];1==s.coin.canRecharge&&this.coinList.push(s)}this.changeCoin(this.coinType)}else this.$Message.error(t.message)})},changeCoin(e){for(var t=0;t<this.coinList.length;t++)if(this.coinList[t].coin.unit==e){this.qrcode.value=this.coinList[t].address,this.qrcode.coinName=this.coinList[t].coin.nameCn.toLowerCase(),this.qrcode.unit=this.coinList[t].coin.unit,this.minRechargeAmount=this.coinList[t].coin.minRechargeAmount,1==this.coinList[t].coin.accountType?(this.qrcode.value=this.coinList[t].coin.depositAddress,this.accountType=1):this.accountType=0,this.payAddress=this.qrcode.value,this.qrcode.value?this.isShowGetAddress=!1:this.isShowGetAddress=!0;break}},resetAddress(){let e=this;this.$Spin.show({render:e=>e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div",{style:{fontSize:"12px",marginTop:"8px"}},this.$t("uc.finance.recharge.gettingaddress"))])});let t={};t.unit=this.qrcode.unit,t.amount=this.rechargeAmount,this.$http.post(this.host+"/uc/asset/wallet/reset-address-create",t).then(t=>{let s=t.body;0==s.code?setTimeout(function(){e.reload(),e.$Spin.hide(),window.open(s.data,"_blank")},3e3):(this.$Message.error(s.message),e.$Spin.hide())})},onCopy(e){this.$Message.success(this.$t("uc.finance.recharge.copysuccess")+e.text)},onError(e){this.$Message.error(this.$t("uc.finance.recharge.copysuccess"))}},created(){this.coinType=this.$route.query.unit||"",this.getMoney()},watch:{},computed:{lang(){return this.$store.state.lang},coinTitle(){let e=this.$route.query.name||"";return e||this.$router.push("/recharge"),e}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-home"},[s("PageHeader",{attrs:{title:e.$t("common.goRecharge")+" "+e.coinTitle}}),e._v(" "),s("div",{staticClass:"page-content"},[s("div",{staticClass:"page-dorecharge"},[s("div",{staticClass:"page-dorecharge-address"},[s("div",{staticClass:"page-dorecharge-address-input",staticStyle:{display:"none"}},[e.qrcode.value?s("input",{directives:[{name:"model",rawName:"v-model",value:e.qrcode.value,expression:"qrcode.value"}],attrs:{readonly:""},domProps:{value:e.qrcode.value},on:{input:function(t){t.target.composing||e.$set(e.qrcode,"value",t.target.value)}}}):e._e()])]),e._v(" "),s("div",{staticClass:"page-dorecharge--content"},[s("Form",{attrs:{"label-position":"top"}},[s("Form-item",{attrs:{label:e.$t("common.rechargeAmount")}},[s("InputNumber",{staticStyle:{width:"100%"},attrs:{size:"large",min:0},model:{value:e.rechargeAmount,callback:function(t){e.rechargeAmount=t},expression:"rechargeAmount"}})],1),e._v(" "),s("FormItem",{staticClass:"upload-evidence"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.resetAddress()}}},[e._v(e._s(e.$t("uc.finance.recharge.recharge")))])],1)],1)],1)])])],1)},staticRenderFns:[]};var d=s("VU/8")(n,c,!1,function(e){s("p6Hd")},"data-v-4db41db6",null);t.default=d.exports},p6Hd:function(e,t){}});