webpackJsonp([3],{"1LRn":function(t,e,s){"use strict";let i=s("0tEf"),a=s("O3w4");var o={components:{},data(){return{baseCoinScale:6,coinScale:6,selectedPlate:"all",plate:{maxPostion:10,askRows:[],bidRows:[],columns:[{title:this.$t("exchange.price"),key:"price",render:(t,e)=>{let s="",i="";const a=e.row.direction.toLowerCase();return 0==e.row.price&&(s=t("span",{},"--")),0!=e.row.price&&(i=e.row.price.toFixed(this.baseCoinScale))&&(s=t("span",{attrs:{class:a}},i)),s},renderHeader:(t,e)=>{return t("span",{},this.$t("exchange.price")+"("+this.currentCoin.base+")")}},{title:this.$t("exchange.num"),key:"amount",render:(t,e)=>{let s="";return 0==e.row.amount&&(s=t("span",{},"--")),0!=e.row.amount&&(s=t("span",{},e.row.amount.toFixed(this.coinScale))),s},renderHeader:(t,e)=>{return t("span",{},this.$t("exchange.num")+"("+this.currentCoin.coin+")")}},{className:"percenttd",width:1,render:(t,e)=>{let s="0",i="BUY"===e.row.direction?"#00b275":"#f15057",a="BUY"===e.row.direction?this.plate.bidTotle:this.plate.askTotle;return e.row.totalAmount&&(s=100*(e.row.totalAmount/a).toFixed(4)+"%"),t("div",{style:{width:s,backgroundColor:i},attrs:{class:"percentdiv"}}," ")}}]},trade:{maxPostion:5,rows:[],columns:[{title:this.$t("exchange.price"),key:"price",render:(t,e)=>{return t("span",{attrs:{class:"BUY"==e.row.direction?"buy":"sell"}},e.row.price.toFixed(this.baseCoinScale))},renderHeader:(t,e)=>{return t("span",{},this.$t("exchange.price")+"("+this.currentCoin.base+")")}},{title:this.$t("exchange.num"),key:"amount",render:(t,e)=>t("span",{},e.row.amount.toFixed(this.coinScale)),renderHeader:(t,e)=>{return t("span",{},this.$t("exchange.num")+"("+this.currentCoin.coin+")")}},{title:this.$t("exchange.time"),key:"time",width:25,render:(t,e)=>t("span",{},this.shortTimeFormat(e.row.time)),renderHeader:(t,e)=>{return t("img",{style:{width:"20px",height:"20px"},attrs:{src:s("xxCs")}},"")}}]}}},props:{currentCoin:{type:Object}},filters:{},computed:{isLogin:function(){return this.$store.getters.isLogin},member:function(){return this.$store.getters.member},lang:function(){return this.$store.state.lang}},watch:{lang:function(){this.updateLangData()}},created:function(){console.log("currentCoin",this.currentCoin),this.getPlate(),this.getSymbolScale(),this.startWebsock()},methods:{login(){this.$router.push("/login")},gohref(t,e){this.$router.push({name:"ExchangePair",params:{pair:t.href}})},updateLangData(){this.plate.columns[0].title=this.$t("exchange.stall"),this.plate.columns[1].title=this.$t("exchange.price"),this.plate.columns[2].title=this.$t("exchange.num"),this.trade.columns[0].title=this.$t("exchange.num"),this.trade.columns[1].title=this.$t("exchange.price"),this.trade.columns[2].title=this.$t("exchange.time")},startWebsock(){let t=null,e=this,s=new a(e.wssHost+e.api.market.ws);(t=i.over(s)).debug=!1,t.connect({},function(s){t.subscribe("/topic/market/trade-plate/"+e.currentCoin.symbol,function(t){let s=JSON.parse(t.body);if("SELL"==s.direction){let t=s.items;e.plate.askRows=[];let i=0;for(let s=e.plate.maxPostion-1;s>=0;s--){let i={};s<t.length?i=t[s]:(i.price=0,i.amount=0),i.direction="SELL",i.position=s+1,e.plate.askRows.push(i)}for(let t=e.plate.askRows.length-1;t>=0;t--)t==e.plate.askRows.length-1||0==e.plate.askRows[t].price?e.plate.askRows[t].totalAmount=e.plate.askRows[t].amount:e.plate.askRows[t].totalAmount=e.plate.askRows[t+1].totalAmount+e.plate.askRows[t].amount,i+=e.plate.askRows[t].amount;e.plate.askTotle=i}else{let t=s.items;e.plate.bidRows=[];let i=0;for(let s=0;s<e.plate.maxPostion;s++){let i={};s<t.length?i=t[s]:(i.price=0,i.amount=0),i.direction="BUY",i.position=s+1,e.plate.bidRows.push(i)}for(let t=0;t<e.plate.bidRows.length;t++)0==t||0==e.plate.bidRows[t].amount?e.plate.bidRows[t].totalAmount=e.plate.bidRows[t].amount:e.plate.bidRows[t].totalAmount=e.plate.bidRows[t-1].totalAmount+e.plate.bidRows[t].amount,i+=e.plate.bidRows[t].amount;e.plate.bidTotle=i}})})},getSymbolScale(){this.$http.post(this.host+this.api.market.symbolInfo,{symbol:this.currentCoin.symbol}).then(t=>{let e=t.body;null!=e&&(this.baseCoinScale=e.baseCoinScale,this.coinScale=e.coinScale)})},changePlate(t){this.plate.maxPostion="all"!=t?20:10,this.getPlate(t)},getPlate(t=""){let e={};e.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.market.platemini,e).then(e=>{this.plate.askRows=[],this.plate.bidRows=[];let s=e.body;if(s.ask&&s.ask.items){for(let t=0;t<s.ask.items.length;t++)s.ask.items[t].totalAmount=0==t?s.ask.items[t].amount:s.ask.items[t-1].totalAmount+s.ask.items[t].amount;if(s.ask.items.length>=this.plate.maxPostion){for(let t=this.plate.maxPostion;t>0;t--){var i=s.ask.items[t-1];i.direction="SELL",i.position=t,this.plate.askRows.push(i)}const t=this.plate.askRows,e=(t.length,t[0].totalAmount);this.plate.askTotle=e}else{for(let t=this.plate.maxPostion;t>s.ask.items.length;t--){let e={price:0,amount:0,direction:"SELL"};e.position=t,e.totalAmount=e.amount,this.plate.askRows.push(e)}for(let t=s.ask.items.length;t>0;t--){let e=s.ask.items[t-1];e.direction="SELL",e.position=t,this.plate.askRows.push(e)}let t=s.ask.items.length-1>0?s.ask.items.length-1:0;const e=this.plate.askRows,i=(e.length,e[t].totalAmount);this.plate.askTotle=i}}if(s.bid&&s.bid.items){for(let t=0;t<s.bid.items.length;t++)s.bid.items[t].totalAmount=0==t?s.bid.items[t].amount:s.bid.items[t-1].totalAmount+s.bid.items[t].amount;for(let t=0;t<s.bid.items.length;t++){let e=s.bid.items[t];if(e.direction="BUY",e.position=t+1,this.plate.bidRows.push(e),t==this.plate.maxPostion-1)break}if(s.bid.items.length<this.plate.maxPostion){for(let t=s.bid.items.length;t<this.plate.maxPostion;t++){let e={price:0,amount:0,direction:"BUY"};e.position=t+1,e.totalAmount=0,this.plate.bidRows.push(e)}let t=s.bid.items.length-1>0?s.bid.items.length-1:0;const e=this.plate.bidRows,i=(e.length,e[t].totalAmount);this.plate.bidTotle=i}else{const t=this.plate.bidRows,e=t[t.length-1].totalAmount;this.plate.bidTotle=e}}""!=t&&(this.selectedPlate=t)})},buyPlate(t){this.$emit("handlePlate","buy",t)},sellPlate(t){this.$emit("handlePlate","sell",t)}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-plate-list"},[s("div",{staticClass:"handlers"},[s("span",{staticClass:"handler handler-all",class:{active:"all"==t.selectedPlate},on:{click:function(e){return t.changePlate("all")}}}),t._v(" "),s("span",{staticClass:"handler handler-green",class:{active:"buy"==t.selectedPlate},on:{click:function(e){return t.changePlate("buy")}}}),t._v(" "),s("span",{staticClass:"handler handler-red",class:{active:"sell"==t.selectedPlate},on:{click:function(e){return t.changePlate("sell")}}})]),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"buy"!=t.selectedPlate,expression:"selectedPlate!='buy'"}],ref:"currentRowTable",staticClass:"sell_table",attrs:{"no-data-text":t.$t("common.nodata"),"highlight-row":"",columns:t.plate.columns,data:t.plate.askRows},on:{"on-current-change":t.buyPlate}}),t._v(" "),s("div",{staticClass:"plate-nowprice"},[s("span",{staticClass:"price",class:{buy:t.currentCoin.change>0,sell:t.currentCoin.change<0}},[t._v(t._s(t._f("toFixed")(t.currentCoin.price,t.baseCoinScale)))]),t._v(" "),t.currentCoin.change>0?s("span",{staticClass:"buy"},[t._v("↑")]):t.currentCoin.change<0?s("span",{staticClass:"sell"},[t._v("↓")]):t._e()]),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"sell"!=t.selectedPlate,expression:"selectedPlate!='sell'"}],staticClass:"buy_table",class:{hidden:"all"===t.selectedPlate},attrs:{"no-data-text":t.$t("common.nodata"),"highlight-row":"",columns:t.plate.columns,data:t.plate.bidRows},on:{"on-current-change":t.sellPlate}})],1)},staticRenderFns:[]};var r=s("VU/8")(o,n,!1,function(t){s("gwbk")},"data-v-e1d61eb6",null);e.a=r.exports},EciX:function(t,e){},FceM:function(t,e){},"X/Je":function(t,e){},eL9F:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("/2QW");var i=s("JCuE"),a=s("Bnh8"),o=s("1LRn"),n=s("id/d"),r=s("97sG");s("xNPZ");var l={components:{},data(){let t=this;return{selectedOrder:"current",currentOrder:{columns:[{type:"expand",width:40,height:40,render:(t,e)=>t(r.a,{props:{skin:e.row.skin,rows:e.row}})},{title:t.$t("exchange.symbol"),width:100,key:"symbol"},{title:t.$t("exchange.price"),key:"price",render:(e,s)=>e("span",t.toFloor(s.row.price))},{title:t.$t("exchange.num"),key:"amount",render:(e,s)=>e("span",t.toFloor(s.row.amount))},{title:t.$t("exchange.action"),key:"operate",render:(e,s)=>e("Button",{props:{size:"small"},style:{border:"1px solid #f0ac19",color:"#f1ac19","line-height":"1.2","border-radius":"10px","background-color":"transparent"},on:{click:()=>{this.cancel(s.index)}}},t.$t("exchange.undo"))}],rows:[]},historyOrder:{pageSize:10,total:10,page:0,columns:[{type:"expand",width:40,render:(t,e)=>t(r.a,{props:{skin:e.row.skin,rows:e.row}})},{title:t.$t("exchange.symbol"),width:100,key:"symbol"},{title:t.$t("exchange.price"),key:"price",render:(e,s)=>e("span",t.toFloor(s.row.price))},{title:t.$t("exchange.num"),key:"amount",render:(e,s)=>e("span",t.toFloor(s.row.amount))},{title:t.$t("exchange.status"),key:"status",render:(e,s)=>{const i=s.row.status;return"COMPLETED"==i?e("span",{style:{color:"#f0a70a"}},t.$t("exchange.finished")):"CANCELED"==i?e("span",{style:{color:"#7c7f82"}},t.$t("exchange.canceled")):e("span",{},"--")}}],rows:[]},isConnected:!1}},props:{currentCoin:{type:Object},stompClient:{type:Object}},filters:{},computed:{isLogin:function(){return this.$store.getters.isLogin},member:function(){return this.$store.getters.member},lang:function(){return this.$store.state.lang}},watch:{stompClient:{deep:!0,handler(t,e){console.log(t,e),t&&this.init(t)}},lang:function(){this.updateLangData()}},created:function(){this.getHistoryOrder(),this.getCurrentOrder()},mounted:function(){},methods:{init(t){this.isLogin&&!this.isConnected&&t.connected&&(this.isConnected=!0)},login(){this.$router.push("/login")},getCurrentOrder(){let t={pageNo:0,pageSize:5};t.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.exchange.current,t).then(t=>{let e=t.body;if(e.content&&e.content.length>0){let t=e.content;t.forEach((t,e)=>{t.skin=this.skin,t.price="MARKET_PRICE"==t.type?this.$t("exchange.marketprice"):t.price}),this.currentOrder.rows=t}})},getHistoryOrder(){let t={pageNo:0,pageSize:5};t.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.exchange.history,t).then(t=>{let e=t.body,s=[];if(e.content&&e.content.length>0){this.historyOrder.total=e.totalElements,this.historyOrder.page=e.number;for(let t=0;t<e.content.length;t++){let i=e.content[t];i&&(i.skin=this.skin,i.price="MARKET_PRICE"==i.type?this.$t("exchange.marketprice"):i.price,s.push(i))}this.historyOrder.rows=s}})},updateLangData(){this.currentOrder.columns[1].title=this.$t("exchange.time"),this.currentOrder.columns[2].title=this.$t("exchange.symbol"),this.currentOrder.columns[3].title=this.$t("exchange.type"),this.currentOrder.columns[4].title=this.$t("exchange.direction"),this.currentOrder.columns[5].title=this.$t("exchange.price"),this.currentOrder.columns[6].title=this.$t("exchange.num"),this.currentOrder.columns[7].title=this.$t("exchange.traded"),this.currentOrder.columns[8].title=this.$t("exchange.dealamount"),this.currentOrder.columns[9].title=this.$t("exchange.action"),this.historyOrder.columns[1].title=this.$t("exchange.time"),this.historyOrder.columns[2].title=this.$t("exchange.symbol"),this.historyOrder.columns[3].title=this.$t("exchange.type"),this.historyOrder.columns[4].title=this.$t("exchange.direction"),this.historyOrder.columns[5].title=this.$t("exchange.price"),this.historyOrder.columns[6].title=this.$t("exchange.num"),this.historyOrder.columns[7].title=this.$t("exchange.done"),this.historyOrder.columns[8].title=this.$t("exchange.dealamount"),this.historyOrder.columns[9].title=this.$t("exchange.status")},changeOrder(t){this.selectedOrder=t},orderDetailCurrent(t){sessionStorage.setItem("ORDER_DETAIL",JSON.stringify({type:"current",currentRow:t})),this.$router.push("/orderDetail")},orderDetailHistory(t){sessionStorage.setItem("ORDER_DETAIL",JSON.stringify({type:"history",currentRow:t})),this.$router.push("/orderDetail")}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-myorder-list"},[s("div",{staticClass:"order-handler"},[s("span",{class:{active:"current"===t.selectedOrder},on:{click:function(e){return t.changeOrder("current")}}},[t._v(t._s(t.$t("exchange.curdelegation")))]),t._v(" "),s("span",{class:{active:"history"===t.selectedOrder},on:{click:function(e){return t.changeOrder("history")}}},[t._v(t._s(t.$t("exchange.hisdelegation")))]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:"current"===t.selectedOrder,expression:"selectedOrder==='current'"}],staticClass:"linkmore",attrs:{to:"/entrust/current"}},[t._v(t._s(t.$t("common.more")))]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:"history"===t.selectedOrder,expression:"selectedOrder==='history'"}],staticClass:"linkmore",attrs:{to:"/entrust/history"}},[t._v(t._s(t.$t("common.more")))])],1),t._v(" "),s("div",{staticClass:"order-table"},["current"===t.selectedOrder?s("Table",{attrs:{"highlight-row":"","no-data-text":t.$t("common.nodata"),columns:t.currentOrder.columns,data:t.currentOrder.rows}}):s("Table",{attrs:{"highlight-row":"","no-data-text":t.$t("common.nodata"),columns:t.historyOrder.columns,data:t.historyOrder.rows}})],1)])},staticRenderFns:[]};var h=s("VU/8")(l,c,!1,function(t){s("EciX")},"data-v-7e1c86da",null).exports;let u=s("0tEf"),m=s("O3w4"),d=s("xNPZ");var p={components:{PageHeader:i.a,PageFooter:a.a,ExchangePlate:o.a,ExchangeKlineCom:n.a,ExchangeOrder:h},data:()=>({stompClient:null,transactionTypeList:[{name:"BUY",type:"buy"},{name:"SELL",type:"sell"}],currentTransactionType:"buy",sliderBuyLimitPercent:0,sliderSellLimitPercent:0,sliderBuyMarketPercent:0,sliderSellMarketPercent:0,defaultPath:"btc_usdt",basecion:"usdt",robotType:"0",coinScale:6,baseCoinScale:6,symbolFee:.001,collecRequesting:!1,currentCoinIsFavor:!1,enableMarketBuy:1,enableMarketSell:1,exchangeable:1,selectedPlate:"all",coins:{_map:[],USDT:[],BTC:[],ETH:[],USDT2:[],BTC2:[],ETH2:[],favor:[]},wallet:{base:0,coin:0},plate:{maxPostion:10,columns:[],askRows:[],bidRows:[]},skin:"night",publishType:"NONE",currentTime:0,publishAmount:0,publishPrice:0,startTime:"2000-01-01 00:00:00",endTime:"2000-01-01 00:00:00",clearTime:"2000-01-01 00:00:00",showPublish:!1,showCountDown:!1,countDownBgColor:"linear-gradient(135deg, rgb(0 199 144 / 63%) 10%, rgb(18 33 41) 100%)",publishState:0,currentCoin:{base:"",coin:"",symbol:"",baseCoinScale:6,coinScale:6},transactionMode:"limit",form:{buy:{limitPrice:0,limitAmount:0,marketAmount:0,limitTurnover:0},sell:{limitPrice:0,limitAmount:0,marketAmount:0,limitTurnover:0}}}),filters:{},computed:{rechargeUSDTUrl:function(){return"/uc/recharge?name="+this.currentCoin.base},rechargeCoinUrl:function(){return"/uc/recharge?name="+this.currentCoin.coin},isLogin:function(){return this.$store.getters.isLogin},member:function(){return this.$store.getters.member},lang:function(){return this.$store.state.lang}},watch:{"form.buy.limitPrice":function(t){t||(t=0);let e=this.form.buy.limitPrice,s=this.wallet.base,i=0;t>0&&(i=this.toFloor(s.div(e).mul(this.sliderBuyLimitPercent).mul(.01),this.coinScale)),this.form.buy.limitAmount=parseFloat(i),this.form.buy.limitTurnover=this.toFloor(t.mul(i),this.baseCoinScale)},"form.buy.limitAmount":function(t){let e=this.form.buy.limitPrice;e||(e=0),t||(t=0),this.form.buy.limitTurnover=this.toFloor(t.mul(e),this.baseCoinScale)},"form.sell.limitPrice":function(t){let e=this.form.sell.limitAmount;e||(e=0),t||(t=0),this.form.sell.limitTurnover=this.toFloor(t.mul(e),this.coinScale)},"form.sell.limitAmount":function(t){let e=this.form.sell.limitPrice;e||(e=0),t||(t=0),this.form.sell.limitTurnover=this.toFloor(t.mul(e),this.coinScale)},sliderBuyLimitPercent(){let t=this.form.buy.limitPrice,e=this.wallet.base,s=0;t>0&&(s=this.toFloor(e.div(t).mul(this.sliderBuyLimitPercent).mul(.01),this.coinScale)),this.form.buy.limitAmount=parseFloat(s)},sliderBuyMarketPercent(){let t=this.wallet.base;this.form.buy.marketAmount=parseFloat(this.toFloor(t.mul(this.sliderBuyMarketPercent).mul(.01),this.baseCoinScale))},sliderSellLimitPercent(){let t=this.wallet.coin;this.form.sell.limitAmount=parseFloat(this.toFloor(t.mul(this.sliderSellLimitPercent).mul(.01),this.coinScale))},sliderSellMarketPercent(){let t=this.wallet.coin;this.form.sell.marketAmount=parseFloat(this.toFloor(t.mul(this.sliderSellMarketPercent).mul(.01),this.coinScale))},lang:function(){this.updateLangData()},$route(t,e){this.init()}},created:function(){this.init()},methods:{init(){let t=this.$route.params.pair;void 0!=t&&"undefined"!=t||(t=this.defaultPath,this.$router.push("/exchange/"+this.defaultPath));const e=t.split("_")[1];e&&(this.basecion=e);let s=t.toUpperCase().split("_")[0],i=t.toUpperCase().split("_")[1];this.currentCoin.symbol=s+"/"+i,this.currentCoin.coin=s,this.currentCoin.base=i,this.getSymbolScale(),this.getSymbol(),this.getPlate(),this.isLogin&&this.refreshAccount(),this.sliderBuyLimitPercent=0,this.sliderSellLimitPercent=0,this.sliderBuyMarketPercent=0,this.sliderSellMarketPercent=0},chooseTransactionType(t){this.currentTransactionType=t},silderGo(t){console.log(t)},getSymbolScale(){this.robotType="0",this.$http.post(this.host+this.api.market.symbolInfo,{symbol:this.currentCoin.symbol}).then(t=>{let e=t.body;null!=e&&(this.currentCoin.coinScale=e.coinScale,this.currentCoin.baseCoinScale=e.baseCoinScale,this.robotType=e.robotType+"",this.baseCoinScale=e.baseCoinScale,this.coinScale=e.coinScale,this.symbolFee=e.fee,this.enableMarketBuy=e.enableMarketBuy,this.enableMarketSell=e.enableMarketSell,this.exchangeable=e.exchangeable,this.publishType=e.publishType,this.startTime=e.startTime,this.endTime=e.endTime,this.clearTime=e.clearTime,this.currentTime=parseInt(e.currentTime/1e3),this.publishAmount=e.publishAmount,this.publishPrice=e.publishPrice,d(e.currentTime).format("YYYY-MM-DD HH:mm:ss")<this.clearTime&&("QIANGGOU"==this.publishType||"FENTAN"==this.publishType)?(this.showPublish=!0,this.showCountDown=!0):(this.showPublish=!1,this.showCountDown=!1))})},getSymbol(){this.$http.post(this.host+this.api.market.thumb,{}).then(t=>{let e=t.body;this.coins._map=[],this.coins.favor=[];for(let t=0;t<e.length;t++){let s=e[t];s.coin=e[t].symbol.split("/")[0],s.base=e[t].symbol.split("/")[1],s.price=e[t].close=e[t].close.toFixed(e[t].baseCoinScale),s.rose=e[t].chg>0?"+"+(100*e[t].chg).toFixed(2)+"%":(100*e[t].chg).toFixed(2)+"%",s.href=(s.coin+"_"+s.base).toLowerCase(),s.isFavor=!1,this.coins._map[s.symbol]=s,0==s.zone?this.coins[s.base].push(s):this.coins[s.base+"2"].push(s),s.symbol==this.currentCoin.symbol&&(this.currentCoin=s,this.form.buy.limitPrice=this.form.sell.limitPrice=parseFloat(s.price))}this.startWebsock(),this.changeBaseCion(this.basecion)})},changeBaseCion(t){this.basecion=t,"usdt"==t?(this.dataIndex=this.coins.USDT,this.dataIndex2=this.coins.USDT2):"btc"==t?(this.dataIndex=this.coins.BTC,this.dataIndex2=this.coins.BTC2):"eth"==t?(this.dataIndex=this.coins.ETH,this.dataIndex2=this.coins.ETH2):"favor"==t&&(this.dataIndex=this.coins.favor)},startWebsock(){this.stompClient&&this.stompClient.ws.close();var t=null,e=this,s=new m(e.wssHost+e.api.market.ws);t=u.over(s),this.stompClient=t,t.debug=!1,t.connect({},function(s){t.subscribe("/topic/market/thumb",function(t){var s=JSON.parse(t.body),i=e.getCoin(s.symbol);null!=i&&(i.price=s.close,i.rose=s.chg>0?"+"+(100*s.chg).toFixed(2)+"%":(100*s.chg).toFixed(2)+"%",i.close=s.close,i.high=s.high,i.low=s.low,i.turnover=parseInt(s.volume),i.volume=s.volume,i.usdRate=s.usdRate)}),t.subscribe("/topic/market/trade-plate/"+e.currentCoin.symbol,function(t){var s=JSON.parse(t.body);if("SELL"==s.direction){var i=s.items;e.plate.askRows=[];let t=0;for(var a=e.plate.maxPostion-1;a>=0;a--){var o={};a<i.length?o=i[a]:(o.price=0,o.amount=0),o.direction="SELL",o.position=a+1,e.plate.askRows.push(o)}for(a=e.plate.askRows.length-1;a>=0;a--)a==e.plate.askRows.length-1||0==e.plate.askRows[a].price?e.plate.askRows[a].totalAmount=e.plate.askRows[a].amount:e.plate.askRows[a].totalAmount=e.plate.askRows[a+1].totalAmount+e.plate.askRows[a].amount,t+=e.plate.askRows[a].amount;e.plate.askTotle=t}else{var n=s.items;e.plate.bidRows=[];let t=0;for(a=0;a<e.plate.maxPostion;a++){var r={};a<n.length?r=n[a]:(r.price=0,r.amount=0),r.direction="BUY",r.position=a+1,e.plate.bidRows.push(r)}for(a=0;a<e.plate.bidRows.length;a++)0==a||0==e.plate.bidRows[a].amount?e.plate.bidRows[a].totalAmount=e.plate.bidRows[a].amount:e.plate.bidRows[a].totalAmount=e.plate.bidRows[a-1].totalAmount+e.plate.bidRows[a].amount,t+=e.plate.bidRows[a].amount;e.plate.bidTotle=t}})})},getPlate(t=""){var e={};e.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.market.platemini,e).then(e=>{this.plate.askRows=[],this.plate.bidRows=[];let s=e.body;if(s.ask&&s.ask.items){for(var i=0;i<s.ask.items.length;i++)s.ask.items[i].totalAmount=0==i?s.ask.items[i].amount:s.ask.items[i-1].totalAmount+s.ask.items[i].amount;if(s.ask.items.length>=this.plate.maxPostion){for(i=this.plate.maxPostion;i>0;i--){(a=s.ask.items[i-1]).direction="SELL",a.position=i,this.plate.askRows.push(a)}const t=this.plate.askRows,e=(t.length,t[0].totalAmount);this.plate.askTotle=e}else{for(i=this.plate.maxPostion;i>s.ask.items.length;i--){(a={price:0,amount:0,direction:"SELL"}).position=i,a.totalAmount=a.amount,this.plate.askRows.push(a)}for(i=s.ask.items.length;i>0;i--){var a;(a=s.ask.items[i-1]).direction="SELL",a.position=i,this.plate.askRows.push(a)}var o=s.ask.items.length-1>0?s.ask.items.length-1:0;const t=this.plate.askRows,e=(t.length,t[o].totalAmount);this.plate.askTotle=e}}if(s.bid&&s.bid.items){for(i=0;i<s.bid.items.length;i++)s.bid.items[i].totalAmount=0==i?s.bid.items[i].amount:s.bid.items[i-1].totalAmount+s.bid.items[i].amount;for(i=0;i<s.bid.items.length;i++){if((n=s.bid.items[i]).direction="BUY",n.position=i+1,this.plate.bidRows.push(n),i==this.plate.maxPostion-1)break}if(s.bid.items.length<this.plate.maxPostion){for(i=s.bid.items.length;i<this.plate.maxPostion;i++){var n;(n={price:0,amount:0,direction:"BUY"}).position=i+1,n.totalAmount=0,this.plate.bidRows.push(n)}var r=s.bid.items.length-1>0?s.bid.items.length-1:0;const t=this.plate.bidRows,e=(t.length,t[r].totalAmount);this.plate.bidTotle=e}else{const t=this.plate.bidRows,e=t[t.length-1].totalAmount;this.plate.bidTotle=e}}""!=t&&(this.selectedPlate=t)})},refreshAccount:function(){this.getWallet()},getWallet(){this.$http.post(this.host+this.api.uc.wallet+this.currentCoin.base,{}).then(t=>{var e=t.body;this.wallet.base=e.data.balance||"",console.log("wallet.base",this.wallet)}),this.$http.post(this.host+this.api.uc.wallet+this.currentCoin.coin,{}).then(t=>{var e=t.body;this.wallet.coin=e.data.balance,console.log("wallet.coin",this.wallet)})},getCoin(t){return this.coins._map[t]},updateLangData(){},submitWithPrice(){let t={};if("limit"==this.transactionMode)if("buy"==this.currentTransactionType){if(!this.form.buy.limitPrice)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.pricetip")});if(!this.form.buy.limitAmount)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.buyamounttip")});if(parseFloat(this.form.buy.limitAmount)*parseFloat(this.form.buy.limitPrice)>this.wallet.base)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.buyamounttipwarning")+this.toFloor(this.wallet.base,this.baseCoinScale)});t.price=this.form.buy.limitPrice,t.amount=this.form.buy.limitAmount,t.direction="BUY",t.type="LIMIT_PRICE"}else{if(!this.form.sell.limitPrice)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.sellpricetip")});if(!this.form.sell.limitAmount)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.sellamounttip")});if(this.form.sell.limitAmount>parseFloat(this.wallet.coin))return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.sellamounttipwarning")+this.wallet.coin});t.price=this.form.sell.limitPrice,t.amount=this.form.sell.limitAmount,t.direction="SELL",t.type="LIMIT_PRICE"}else if("buy"==this.currentTransactionType){if(!this.form.buy.marketAmount)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.buyamounttip")});if(this.form.buy.marketAmount>parseFloat(this.wallet.base))return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.buyamounttipwarning")+this.wallet.base});t.price=0,t.amount=this.form.buy.marketAmount,t.direction="BUY",t.type="MARKET_PRICE"}else{if(!this.form.sell.marketAmount)return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.sellamounttip")});if(this.form.sell.marketAmount>parseFloat(this.wallet.coin))return void this.$Notice.error({title:this.$t("exchange.tip"),desc:this.$t("exchange.sellamounttipwarning")+this.wallet.coin});t.price=0,t.amount=this.form.sell.marketAmount,t.direction="SELL",t.type="MARKET_PRICE"}var e=this;t.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.exchange.orderAdd,t).then(t=>{let s=t.body;0==s.code?(this.$Notice.success({title:e.$t("exchange.tip"),desc:e.$t("exchange.success")}),this.refreshAccount(),this.form.buy.limitAmount=0,this.form.sell.limitAmount=0,this.form.buy.marketAmount=0,this.form.sell.marketAmount=0,this.sliderBuyLimitPercent=0,this.sliderSellLimitPercent=0,this.sliderBuyMarketPercent=0,this.sliderSellMarketPercent=0):this.$Notice.error({title:e.$t("exchange.tip"),desc:s.message})})},goToExchangeCoinPage(){this.$router.push("/exchangeCoins/exchange")},goToExchangeKlinePage(){this.$store.commit("showKline",!0)},login(){this.$router.push("/login")},handlePlate(t,e){this.form.buy.limitPrice=e.price,this.form.sell.limitPrice=e.price}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-home"},[i("div",{staticClass:"page-content"},[i("div",{staticClass:"page-exchange"},[i("div",{staticClass:"page-exchange-title"},[i("span",[i("img",{attrs:{src:s("QC4D")},on:{click:function(e){return t.goToExchangeCoinPage()}}})]),t._v(" "),i("span",[t._v(t._s(t.currentCoin.coin)),i("small",[t._v("/"+t._s(t.currentCoin.base))])]),t._v(" "),i("span",[i("img",{attrs:{src:s("w1Dd")},on:{click:function(e){return t.goToExchangeKlinePage()}}})])]),t._v(" "),i("div",{staticClass:"page-exchange-main"},[i("div",{staticClass:"page-exchange-buysell"},[i("div",{staticClass:"page-exchange-buysell-title"},t._l(t.transactionTypeList,function(e,s){return i("span",{key:s,class:{buy:t.currentTransactionType==e.type&&0==s,sell:t.currentTransactionType==e.type&&1==s},on:{click:function(s){return t.chooseTransactionType(e.type)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),0),t._v(" "),i("div",{staticClass:"bd"},[i("Form",{ref:"formValidate",attrs:{"label-position":"top"}},[i("FormItem",{attrs:{label:t.$t("common.transactionmode")}},[i("RadioGroup",{model:{value:t.transactionMode,callback:function(e){t.transactionMode=e},expression:"transactionMode"}},[i("Radio",{attrs:{label:"limit"}},[t._v(t._s(t.$t("exchange.limited_price")))]),t._v(" "),i("Radio",{attrs:{label:"market"}},[t._v(t._s(t.$t("exchange.market_price")))])],1)],1),t._v(" "),"limit"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.buyprice")}},[i("InputNumber",{staticStyle:{width:"140px"},attrs:{placeholder:t.$t("exchange.buyprice")},model:{value:t.form.buy.limitPrice,callback:function(e){t.$set(t.form.buy,"limitPrice",e)},expression:"form.buy.limitPrice"}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"limit"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.sellprice")}},[i("InputNumber",{staticStyle:{width:"140px"},attrs:{placeholder:t.$t("exchange.sellprice")},model:{value:t.form.sell.limitPrice,callback:function(e){t.$set(t.form.sell,"limitPrice",e)},expression:"form.sell.limitPrice"}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"limit"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.buynum")}},[i("InputNumber",{staticStyle:{width:"140px"},attrs:{placeholder:t.$t("exchange.buynum")},model:{value:t.form.buy.limitAmount,callback:function(e){t.$set(t.form.buy,"limitAmount",e)},expression:"form.buy.limitAmount"}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.coin))])],1):t._e(),t._v(" "),"limit"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.sellnum")}},[i("InputNumber",{staticStyle:{width:"140px"},attrs:{placeholder:t.$t("exchange.sellnum")},model:{value:t.form.sell.limitAmount,callback:function(e){t.$set(t.form.sell,"limitAmount",e)},expression:"form.sell.limitAmount"}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.coin))])],1):t._e(),t._v(" "),"limit"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{staticClass:"bd-radio"},[i("RadioGroup",{attrs:{size:"small",type:"button"},model:{value:t.sliderBuyLimitPercent,callback:function(e){t.sliderBuyLimitPercent=e},expression:"sliderBuyLimitPercent"}},[i("Radio",{attrs:{label:0}},[t._v("0%")]),t._v(" "),i("Radio",{attrs:{label:25}},[t._v("25%")]),t._v(" "),i("Radio",{attrs:{label:50}},[t._v("50%")]),t._v(" "),i("Radio",{attrs:{label:75}},[t._v("75%")]),t._v(" "),i("Radio",{attrs:{label:100}},[t._v("100%")])],1)],1):t._e(),t._v(" "),"limit"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{staticClass:"bd-radio"},[i("RadioGroup",{attrs:{size:"small",type:"button"},model:{value:t.sliderSellLimitPercent,callback:function(e){t.sliderSellLimitPercent=e},expression:"sliderSellLimitPercent"}},[i("Radio",{attrs:{label:0}},[t._v("0%")]),t._v(" "),i("Radio",{attrs:{label:25}},[t._v("25%")]),t._v(" "),i("Radio",{attrs:{label:50}},[t._v("50%")]),t._v(" "),i("Radio",{attrs:{label:75}},[t._v("75%")]),t._v(" "),i("Radio",{attrs:{label:100}},[t._v("100%")])],1)],1):t._e(),t._v(" "),"limit"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.amount")}},[i("span",[t._v(t._s(t._f("toFloor")(t.form.buy.limitTurnover,t.baseCoinScale)))]),t._v("  "+t._s(t.currentCoin.base)+"\n                ")]):t._e(),t._v(" "),"limit"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.amount")}},[i("span",[t._v(t._s(t._f("toFloor")(t.form.sell.limitTurnover,t.baseCoinScale)))]),t._v("  "+t._s(t.currentCoin.base)+"\n                ")]):t._e(),t._v(" "),"market"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.buyprice")}},[i("Input",{staticStyle:{width:"140px"},attrs:{disabled:"",placeholder:t.$t("exchange.buytip")}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"market"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.buynum")}},[i("InputNumber",{staticStyle:{width:"140px"},attrs:{placeholder:t.$t("exchange.buynum")},model:{value:t.form.buy.marketAmount,callback:function(e){t.$set(t.form.buy,"marketAmount",e)},expression:"form.buy.marketAmount"}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"market"==t.transactionMode&&"buy"==t.currentTransactionType?i("FormItem",{staticClass:"bd-radio"},[i("RadioGroup",{attrs:{size:"small",type:"button"},model:{value:t.sliderBuyMarketPercent,callback:function(e){t.sliderBuyMarketPercent=e},expression:"sliderBuyMarketPercent"}},[i("Radio",{attrs:{label:0}},[t._v("0%")]),t._v(" "),i("Radio",{attrs:{label:25}},[t._v("25%")]),t._v(" "),i("Radio",{attrs:{label:50}},[t._v("50%")]),t._v(" "),i("Radio",{attrs:{label:75}},[t._v("75%")]),t._v(" "),i("Radio",{attrs:{label:100}},[t._v("100%")])],1)],1):t._e(),t._v(" "),"market"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.sellprice")}},[i("Input",{staticStyle:{width:"140px"},attrs:{disabled:"",placeholder:t.$t("exchange.selltip")}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"market"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.sellnum")}},[i("InputNumber",{staticStyle:{width:"140px"},attrs:{placeholder:t.$t("exchange.sellnum")},model:{value:t.form.sell.marketAmount,callback:function(e){t.$set(t.form.sell,"marketAmount",e)},expression:"form.sell.marketAmount"}}),t._v(" "),i("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.coin))])],1):t._e(),t._v(" "),"market"==t.transactionMode&&"sell"==t.currentTransactionType?i("FormItem",{staticClass:"bd-radio"},[i("RadioGroup",{attrs:{size:"small",type:"button"},model:{value:t.sliderSellMarketPercent,callback:function(e){t.sliderSellMarketPercent=e},expression:"sliderSellMarketPercent"}},[i("Radio",{attrs:{label:0}},[t._v("0%")]),t._v(" "),i("Radio",{attrs:{label:25}},[t._v("25%")]),t._v(" "),i("Radio",{attrs:{label:50}},[t._v("50%")]),t._v(" "),i("Radio",{attrs:{label:75}},[t._v("75%")]),t._v(" "),i("Radio",{attrs:{label:100}},[t._v("100%")])],1)],1):t._e(),t._v(" "),"buy"==t.currentTransactionType?i("FormItem",{attrs:{label:t.$t("exchange.canuse")}},[i("span",[t._v(t._s(t._f("toFloor")(t.wallet.base,t.baseCoinScale)))]),t._v(" "),i("span",[t._v(t._s(t.currentCoin.base))])]):i("FormItem",{attrs:{label:t.$t("exchange.canuse")}},[i("span",[t._v(t._s(t._f("toFloor")(t.wallet.coin,t.coinScale)))]),t._v(" "),i("span",[t._v(t._s(t.currentCoin.coin))])]),t._v(" "),i("FormItem",["buy"==t.currentTransactionType&&t.isLogin?i("Button",{staticClass:"bg-green",on:{click:t.submitWithPrice}},[t._v(t._s(t.$t("exchange.buyin"))+" ("+t._s(t.currentCoin.coin)+")")]):t._e(),t._v(" "),"sell"==t.currentTransactionType&&t.isLogin?i("Button",{staticClass:"bg-red",on:{click:t.submitWithPrice}},[t._v(t._s(t.$t("exchange.sellout"))+" ("+t._s(t.currentCoin.coin)+")")]):t._e(),t._v(" "),t.isLogin?t._e():i("Button",{staticClass:"bg-gray",on:{click:t.login}},[t._v(t._s(t.$t("common.login")))])],1)],1)],1)]),t._v(" "),i("ExchangePlate",{attrs:{currentCoin:t.currentCoin},on:{handlePlate:t.handlePlate}})],1),t._v(" "),i("ExchangeOrder",{attrs:{currentCoin:t.currentCoin,stompClient:t.stompClient}})],1)]),t._v(" "),i("PageFooter",{attrs:{curindex:"exchange"}}),t._v(" "),i("ExchangeKlineCom")],1)},staticRenderFns:[]};var g=s("VU/8")(p,b,!1,function(t){s("FceM")},"data-v-6b34d70c",null);e.default=g.exports},gwbk:function(t,e){},"id/d":function(t,e,s){"use strict";var i=s("H6tP"),a=s("/2QW"),o=s("wPKN"),n=s.n(o),r=s("JCuE");let l=s("0tEf"),c=s("O3w4");s("xNPZ");var h={components:{DepthGraph:i.a,PageHeader:r.a},data(){return{skin:"night",currentCoinIsFavor:!1,defaultPath:"btc_usdt",collecRequesting:!1,currentImgTable:"k",currentCoin:{base:"",coin:"",symbol:"",baseCoinScale:6,coinScale:6},coins:{_map:[],USDT:[],BTC:[],ETH:[],USDT2:[],BTC2:[],ETH2:[],favor:[]},trade:{maxPostion:10,rows:[],columns:[{title:this.$t("exchange.price"),key:"price",render:(t,e)=>{return t("span",{attrs:{class:"BUY"==e.row.direction?"buy":"sell"}},e.row.price.toFixed(this.currentCoin.baseCoinScale))},renderHeader:(t,e)=>{return t("span",{},this.$t("exchange.price")+"("+this.currentCoin.base+")")}},{title:this.$t("exchange.num"),key:"amount",render:(t,e)=>t("span",{},e.row.amount.toFixed(this.currentCoin.coinScale)),renderHeader:(t,e)=>{return t("span",{},this.$t("exchange.num")+"("+this.currentCoin.coin+")")}},{title:this.$t("exchange.time"),key:"time",render:(t,e)=>t("span",{},this.timeFormat(e.row.time))}]}}},props:{},filters:{},computed:{isShowAppDownload(){return this.$store.state.isShowAppDownload},isShowKline(){return this.$store.state.isShowKline},lang:function(){return this.$store.state.lang}},watch:{lang:function(){this.updateLangData()}},created:function(){},mounted:function(){this.init()},methods:{init(){var t=this.$route.params.pair;void 0!=t&&"undefined"!=t||(t=this.defaultPath,this.$router.push("/exchange/"+this.defaultPath));var e=t.toUpperCase().split("_")[0],s=t.toUpperCase().split("_")[1];this.currentCoin.symbol=e+"/"+s,this.currentCoin.coin=e,this.currentCoin.base=s,this.getTrade(),this.getSymbol()},changeImgTable(t){this.currentImgTable=t},updateLangData(){this.trade.columns[0].title=this.$t("exchange.num"),this.trade.columns[1].title=this.$t("exchange.price"),this.trade.columns[2].title=this.$t("exchange.time")},startWebsock(){let t=null,e=this,s=new c(e.wssHost+e.api.market.ws);(t=l.over(s)).debug=!1,t.connect({},function(s){e.datafeed=new a.a.WebsockFeed(e.host+"/market",e.currentCoin,t,e.baseCoinScale),console.log("self.currentCoin",e.currentCoin),e.getKline(),t.subscribe("/topic/market/trade/"+e.currentCoin.symbol,function(t){let s=JSON.parse(t.body);if(s.length>0)for(let t=0;t<s.length;t++)e.trade.rows.unshift(s[t]);e.trade.rows.length>e.trade.maxPostion&&(e.trade.rows=e.trade.rows.slice(0,e.trade.maxPostion))}),t.subscribe("/topic/market/thumb",function(t){var s=JSON.parse(t.body),i=e.getCoin(s.symbol);null!=i&&(i.price=s.close,i.rose=s.chg>0?"+"+(100*s.chg).toFixed(2)+"%":(100*s.chg).toFixed(2)+"%",i.close=s.close,i.high=s.high,i.low=s.low,i.turnover=parseInt(s.volume),i.volume=s.volume,i.usdRate=s.usdRate)})})},getLang4K(){return"zh_CN"==this.$store.getters.lang?"zh":"en"},getTrade(){var t={};t.symbol=this.currentCoin.symbol,t.size=this.trade.maxPostion,this.$http.post(this.host+this.api.market.trade,t).then(t=>{this.trade.rows=[];for(var e=t.body,s=0;s<e.length;s++)this.trade.rows.push(e[s])})},getPlateFull(){let t={};t.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.market.platefull,t).then(t=>{let e=t.body;e.skin=this.skin,this.$refs.depthGraph.draw(e)})},getKline(){let t={autosize:!0,height:320,fullscreen:!0,symbol:this.symbol,interval:"5",timezone:this.getTimezone4K(),toolbar_bg:"#fff",container_id:"kline_container",datafeed:this.datafeed,library_path:"/assets/charting_library/",locale:this.getLang4K(),debug:!1,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},disabled_features:["header_resolutions","timeframes_toolbar","header_symbol_search","header_chart_type","header_compare","header_undo_redo","header_screenshot","header_saveload","volume_force_overlay","widget_logo","compare_symbol","display_market_status","go_to_date","header_interval_dialog_button","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:["disable_resolution_rebuild","keep_left_toolbar_visible_on_small_screens","hide_last_na_study_output","move_logo_to_main_pane","use_localstorage_for_settings","remove_library_container_border","save_chart_properties_to_local_storage","side_toolbar_in_fullscreen_mode","constraint_dialogs_movement","hide_left_toolbar_by_default","left_toolbar","same_data_requery","header_in_fullscreen_mode"],studies_overrides:{"volume.volume.color.0":"#fa5252","volume.volume.color.1":"#12b886","volume.volume.transparency":25},custom_css_url:"bundles/common_day.css",supported_resolutions:["1","5","15","30","60","1D","1W","1M"],charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",overrides:{"paneProperties.background":"#000000","paneProperties.vertGridProperties.color":"rgba(0,0,0,.1)","paneProperties.horzGridProperties.color":"rgba(0,0,0,.1)","scalesProperties.textColor":"#61688A","mainSeriesProperties.candleStyle.upColor":"#12b886","mainSeriesProperties.candleStyle.downColor":"#fa5252","mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.wickUpColor":"#589065","mainSeriesProperties.candleStyle.wickDownColor":"#AE4E54","paneProperties.legendProperties.showLegend":!0,"mainSeriesProperties.areaStyle.color1":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.color2":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.linecolor":"#9194a4",volumePaneSize:"small"},time_frames:[{text:"1min",resolution:"1",description:"realtime",title:this.$t("exchange.realtime")},{text:"1min",resolution:"1",description:"1min"},{text:"5min",resolution:"5",description:"5min"},{text:"15min",resolution:"15",description:"15min"},{text:"30min",resolution:"30",description:"30min"},{text:"1hour",resolution:"60",description:"1hour",title:"1hour"},{text:"1day",resolution:"1D",description:"1day",title:"1day"},{text:"1week",resolution:"1W",description:"1week",title:"1week"},{text:"1mon",resolution:"1M",description:"1mon"}]};"day"===this.skin&&(t.toolbar_bg="#fff",t.custom_css_url="bundles/common_day.css",t.overrides["paneProperties.background"]="#fff",t.overrides["mainSeriesProperties.candleStyle.upColor"]="#a6d3a5",t.overrides["mainSeriesProperties.candleStyle.downColor"]="#ffa5a6"),s.e(88).then(function(){var e=[s("s2Hi")];(function(e){var s=window.tvWidget=new TradingView.widget(t);s.onChartReady(function(){s.chart().executeActionById("drawingToolbarAction"),s.chart().createStudy("Moving Average",!1,!1,[5],null,{"plot.color":"#EDEDED"}),s.chart().createStudy("Moving Average",!1,!1,[10],null,{"plot.color":"#ffe000"}),s.chart().createStudy("Moving Average",!1,!1,[30],null,{"plot.color":"#ce00ff"}),s.chart().createStudy("Moving Average",!1,!1,[60],null,{"plot.color":"#00adff"}),s.createButton().attr("title","realtime").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(3),s.setSymbol("","1"))}).append("<span>Time</span>"),s.createButton().attr("title","M1").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1"))}).append("<span>M1</span>"),s.createButton().attr("title","M5").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","5"))}).append("<span>M5</span>").addClass("selected"),s.createButton().attr("title","M15").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","15"))}).append("<span>M15</span>"),s.createButton().attr("title","M30").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","30"))}).append("<span>M30</span>"),s.createButton().attr("title","H1").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","60"))}).append("<span>H1</span>"),s.createButton().attr("title","D1").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1D"))}).append("<span>D1</span>"),s.createButton().attr("title","W1").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1W"))}).append("<span>W1</span>"),s.createButton().attr("title","M1").on("click",function(){n()(this).hasClass("selected")||(n()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1M"))}).append("<span>M1</span>")})}).apply(null,e)}).catch(s.oe)},getSymbol(){this.$http.post(this.host+this.api.market.thumb,{}).then(t=>{let e=t.body;this.coins._map=[],this.coins.favor=[];for(let t=0;t<e.length;t++){let s=e[t];s.coin=e[t].symbol.split("/")[0],s.base=e[t].symbol.split("/")[1],s.price=e[t].close=e[t].close.toFixed(e[t].baseCoinScale),s.rose=e[t].chg>0?"+"+(100*e[t].chg).toFixed(2)+"%":(100*e[t].chg).toFixed(2)+"%",s.href=(s.coin+"_"+s.base).toLowerCase(),s.isFavor=!1,this.coins._map[s.symbol]=s,0==s.zone?this.coins[s.base].push(s):this.coins[s.base+"2"].push(s),s.symbol==this.currentCoin.symbol&&(this.currentCoin=s)}this.isLogin&&this.getFavor(),s.e(89).then(function(){var t=[s("ERXg")];(function(t){t.clickScTab()}).apply(null,t)}).catch(s.oe),this.startWebsock()})},getFavor(){this.$http.post(this.host+this.api.exchange.favorFind,{}).then(t=>{this.coins.favor=[],this.currentCoinIsFavor=!1;let e=t.body;for(let t=0;t<e.length;t++){let s=this.getCoin(e[t].symbol);null!=s&&(s.isFavor=!0,this.coins.favor.push(s)),this.currentCoin.symbol==e[t].symbol&&(this.currentCoinIsFavor=!0)}})},getCoin(t){return this.coins._map[t]},currentCoinFavorChange(){if(!this.isLogin)return void this.$Message.warning(this.$t("common.logintip"));if(this.collecRequesting)return;const t=this.currentCoin.symbol;this.collecRequesting=!0,this.currentCoinIsFavor?this.$http.post(this.host+this.api.exchange.favorDelete,{symbol:t}).then(t=>{0==t.body.code&&(this.$Message.info(this.$t("exchange.cancel_favorite")),this.getSymbol(),this.currentCoinIsFavor=!1),this.collecRequesting=!1}):this.$http.post(this.host+this.api.exchange.favorAdd,{symbol:t}).then(t=>{0==t.body.code&&(this.$Message.info(this.$t("exchange.do_favorite")),this.getSymbol(),this.currentCoinIsFavor=!0),this.collecRequesting=!1})}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-kline-list",class:{isShowAppDownload:"0"==t.isShowAppDownload},style:{"z-index":t.isShowKline?100:-100}},[s("PageHeader",{attrs:{headerType:2,title:t.currentCoin.symbol+" Kline"}}),t._v(" "),s("div",{staticClass:"page-content"},[s("div",{staticClass:"page-kline-main"},[s("div",{staticClass:"symbol"},[s("div",{staticClass:"symbol-item"},[s("div",{staticClass:"item star",on:{click:t.currentCoinFavorChange}},[t.currentCoinIsFavor?s("Icon",{attrs:{type:"ios-star",color:"#f0a70a",size:"24"}}):s("Icon",{attrs:{type:"ios-star-outline",color:"#f0a70a",size:"24"}}),t._v(" "),s("span",{staticClass:"coin"},[t._v(t._s(t.currentCoin.coin)),s("small",[t._v("/"+t._s(t.currentCoin.base))])])],1),t._v(" "),s("div",{staticClass:"item latestprice"},[s("span",{staticClass:"num",class:{buy:t.currentCoin.change>0,sell:t.currentCoin.change<0}},[t._v(t._s(t._f("toFixed")(t.currentCoin.close,t.currentCoin.baseCoinScale)))]),t._v(" "),s("span",{staticClass:"change",class:{buy:t.currentCoin.change>0,sell:t.currentCoin.change<0}},[t._v(t._s(t.currentCoin.rose))])])]),t._v(" "),s("div",{staticClass:"symbol-item"},[s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.OpenPrice")))]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t._f("toFixed")(t.currentCoin.open,t.currentCoin.baseCoinScale)))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.ExchangeNum")))]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.currentCoin.volume)+" "+t._s(t.currentCoin.coin))])])]),t._v(" "),s("div",{staticClass:"symbol-item"},[s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.high")))]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t._f("toFixed")(t.currentCoin.high,t.currentCoin.baseCoinScale)))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.low")))]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t._f("toFixed")(t.currentCoin.low,t.currentCoin.baseCoinScale)))])])])]),t._v(" "),t._m(0)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imgtable"},[e("div",{attrs:{id:"kline_container"}})])}]};var m=s("VU/8")(h,u,!1,function(t){s("X/Je")},"data-v-c0e3aed2",null);e.a=m.exports}});