webpackJsonp([76],{"2fln":function(t,e){},"z8u/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("JCuE"),o=s("Bnh8");let a=s("0tEf"),n=s("O3w4");var c={components:{PageHeader:i.a,PageFooter:o.a},data(){return{basecion:"usdt",searchKey:"",currentCoinIsFavor:!1,favorColumns:[{title:this.$t("exchange.coin"),key:"coin",sortable:!1,width:120,className:"coin-menu-symbol",render:(t,e)=>t("div",[t("Icon",{props:{color:"#f0a70a",type:e.row.isFavor?"ios-star":"ios-star-outline"},nativeOn:{click:t=>{t.stopPropagation(),this.isLogin?"ivu-icon ivu-icon-ios-star"==t.currentTarget.className?(this.cancelCollect(e.index,e.row),t.currentTarget.className="ivu-icon ivu-icon-ios-star-outline"):(this.collect(e.index,e.row),t.currentTarget.className="ivu-icon ivu-icon-ios-star"):this.$Message.warning("Please log in first")}}}),t("span",e.row.symbol)])},{title:this.$t("exchange.lastprice"),key:"close",sortable:!0,sortMethod:function(t,e,s){let i=parseFloat(t),o=parseFloat(e);return"asc"==s?i-o:o-i}},{title:this.$t("exchange.daychange"),key:"rose",sortable:!0,sortMethod:function(t,e,s){let i=t.replace(/[^\d|.|-]/g,"")-0,o=e.replace(/[^\d|.|-]/g,"")-0;return"asc"==s?i-o:o-i},render:(t,e)=>{const s=e.row;return t("span",{attrs:{class:parseFloat(s.rose)<0?"sell":"buy"}},s.rose)}}],dataIndex:[],coins:{_map:[],USDT:[],BTC:[],ETH:[],USDT2:[],BTC2:[],ETH2:[],favor:[],columns:[{title:this.$t("exchange.coin"),key:"coin",sortable:!1,width:120,className:"coin-menu-symbol",render:(t,e)=>"CDEA"==e.row.coin?t("div",[t("Icon",{props:{color:"#f0a70a",type:e.row.isFavor?"ios-star":"ios-star-outline"},nativeOn:{click:t=>{t.stopPropagation(),this.isLogin?"ivu-icon ivu-icon-ios-star"==t.currentTarget.className?(this.cancelCollect(e.index,e.row),t.currentTarget.className="ivu-icon ivu-icon-ios-star-outline"):(this.collect(e.index,e.row),t.currentTarget.className="ivu-icon ivu-icon-ios-star"):this.$Message.warning(this.$t("common.logintip"))}}}),t("span",e.row.coin),t("Tooltip",{props:{placement:"top-start",content:"价格跟随演示，价格为BTC价格的0.92%"}},[t("span",{style:{fontSize:"8px",padding:"2px 2px 1px 2px",color:"#FFF",marginLeft:"5px",background:"#F30",borderRadius:"8px",display:"inline-block",height:"8px",width:"8px"}},"")])]):t("div",[t("Icon",{props:{color:"f0a70a",type:e.row.isFavor?"ios-star":"ios-star-outline"},nativeOn:{click:t=>{t.stopPropagation(),this.isLogin?"ivu-icon ivu-icon-ios-star"==t.currentTarget.className?(this.cancelCollect(e.index,e.row),t.currentTarget.className="ivu-icon ivu-icon-ios-star-outline"):(this.collect(e.index,e.row),t.currentTarget.className="ivu-icon ivu-icon-ios-star"):this.$Message.warning(this.$t("common.logintip"))}}}),t("span",e.row.coin)])},{title:this.$t("exchange.lastprice"),key:"close",sortable:!0,sortMethod:function(t,e,s){let i=parseFloat(t),o=parseFloat(e);return"asc"==s?i-o:o-i}},{title:this.$t("exchange.daychange"),key:"rose",sortable:!0,sortMethod:function(t,e,s){let i=t.replace(/[^\d|.|-]/g,"")-0,o=e.replace(/[^\d|.|-]/g,"")-0;return"asc"==s?i-o:o-i},render:(t,e)=>{const s=e.row;return t("span",{attrs:{class:parseFloat(s.rose)<0?"sell":"buy"}},s.rose)}}]}}},props:{},filters:{},computed:{isLogin:function(){return this.$store.getters.isLogin},member:function(){return this.$store.getters.member},lang:function(){return this.$store.state.lang}},watch:{lang:function(){this.updateLangData()}},created:function(){this.getSymbol(),this.isLogin&&this.getFavor()},methods:{changeBaseCion(t){this.basecion=t,"usdt"==t?this.dataIndex=this.coins.USDT:"btc"==t?this.dataIndex=this.coins.BTC:"eth"==t?this.dataIndex=this.coins.ETH:"favor"==t&&(this.dataIndex=this.coins.favor)},login(){this.$router.push("/login")},gohref(t,e){this.$router.push({name:"ExchangePair",params:{pair:t.href}})},updateLangData(){this.favorColumns[0].title=this.$t("exchange.coin"),this.favorColumns[1].title=this.$t("exchange.lastprice"),this.favorColumns[2].title=this.$t("exchange.daychange"),this.coins.columns[0].title=this.$t("exchange.coin"),this.coins.columns[1].title=this.$t("exchange.lastprice"),this.coins.columns[2].title=this.$t("exchange.daychange"),this.coins.columns[3].title=this.$t("exchange.favorite")},seachInputChange(){this.searchKey=this.searchKey.toUpperCase(),"favor"==this.basecion?this.dataIndex=this.coins.favor.filter(t=>0==t.coin.indexOf(this.searchKey)):"usdt"==this.basecion?this.dataIndex=this.coins.USDT.filter(t=>0==t.coin.indexOf(this.searchKey)):"btc"==this.basecion?this.dataIndex=this.coins.BTC.filter(t=>0==t.coin.indexOf(this.searchKey)):"eth"==this.basecion&&(this.dataIndex=this.coins.ETH.filter(t=>0==t.coin.indexOf(this.searchKey)))},getSymbol(){this.$http.post(this.host+this.api.market.thumb,{}).then(t=>{let e=t.body;this.coins._map=[],this.coins.favor=[];for(let t=0;t<e.length;t++){let s=e[t];s.coin=e[t].symbol.split("/")[0],s.base=e[t].symbol.split("/")[1],s.price=e[t].close=e[t].close.toFixed(e[t].baseCoinScale),s.rose=e[t].chg>0?"+"+(100*e[t].chg).toFixed(2)+"%":(100*e[t].chg).toFixed(2)+"%",s.href=(s.coin+"_"+s.base).toLowerCase(),s.isFavor=!1,this.coins._map[s.symbol]=s,0==s.zone?this.coins[s.base].push(s):this.coins[s.base+"2"].push(s)}this.startWebsock(),this.changeBaseCion(this.basecion)})},getCoin(t){return this.coins._map[t]},getFavor(){this.$http.post(this.host+this.api.exchange.favorFind,{}).then(t=>{this.coins.favor=[],this.currentCoinIsFavor=!1;let e=t.body;for(let t=0;t<e.length;t++){let s=this.getCoin(e[t].symbol);null!=s&&(s.isFavor=!0,this.coins.favor.push(s))}})},collect(t,e){if(!this.isLogin)return void this.$Message.info(this.$t("common.logintip"));let s={};s.symbol=e.symbol,this.$http.post(this.host+this.api.exchange.favorAdd,s).then(t=>{0==t.body.code&&(this.$Message.info(this.$t("exchange.do_favorite")),this.getCoin(e.symbol).isFavor=!0,e.isFavor=!0,this.coins.favor.push(e))})},cancelCollect(t,e){if(!this.isLogin)return void this.$Message.info(this.$t("common.logintip"));let s={};s.symbol=e.symbol,this.$http.post(this.host+this.api.exchange.favorDelete,s).then(t=>{if(0==t.body.code){this.$Message.info(this.$t("exchange.cancel_favorite")),this.getCoin(e.symbol).isFavor=!1;for(let t=0;t<this.coins.favor.length;t++){if(this.coins.favor[t].symbol==e.symbol){this.coins.favor.splice(t,1);break}}}})},startWebsock(){let t=null,e=this,s=new n(this.wssHost+this.api.market.ws);(t=a.over(s)).debug=!1,t.connect({},function(s){t.subscribe("/topic/market/thumb",function(t){let s=JSON.parse(t.body),i=e.getCoin(s.symbol);null!=i&&(i.price=s.close.toFixed(s.baseCoinScale),i.rose=s.chg>0?"+"+(100*s.chg).toFixed(2)+"%":(100*s.chg).toFixed(2)+"%",i.close=s.close,i.high=s.high,i.low=s.low,i.turnover=parseInt(s.volume),i.volume=s.volume,i.usdRate=s.usdRate)})})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-coinmenu-list"},[s("div",{staticClass:"page-content"},[s("div",{staticClass:"coin-menu"},[s("div",{staticClass:"coin-menu-search"},[s("Input",{attrs:{size:"large",search:"",placeholder:t.$t("common.searchplaceholder")},on:{"on-change":t.seachInputChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),t._v(" "),s("div",{staticClass:"sc_new_filter"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"ivu-btn-default",class:{active:"favor"===t.basecion},on:{click:function(e){return t.changeBaseCion("favor")}}},[t._v(t._s(t.$t("service.CUSTOM")))]),t._v(" "),s("span",{staticClass:"ivu-btn-default",class:{active:"usdt"===t.basecion},on:{click:function(e){return t.changeBaseCion("usdt")}}},[t._v("USDT")]),t._v(" "),s("span",{staticClass:"ivu-btn-default",class:{active:"btc"===t.basecion},on:{click:function(e){return t.changeBaseCion("btc")}}},[t._v("BTC")]),t._v(" "),s("span",{staticClass:"ivu-btn-default",class:{active:"eth"===t.basecion},on:{click:function(e){return t.changeBaseCion("eth")}}},[t._v("ETH")])]),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"usdt"===t.basecion,expression:"basecion==='usdt'"}],attrs:{"no-data-text":t.$t("common.nodata"),"highlight-row":"",id:"USDT",columns:t.coins.columns,data:t.dataIndex},on:{"on-current-change":t.gohref}}),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"btc"===t.basecion,expression:"basecion==='btc'"}],attrs:{"no-data-text":t.$t("common.nodata"),"highlight-row":"",id:"BTC",columns:t.coins.columns,data:t.dataIndex},on:{"on-current-change":t.gohref}}),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"eth"===t.basecion,expression:"basecion==='eth'"}],attrs:{"no-data-text":t.$t("common.nodata"),"highlight-row":"",id:"ETH",columns:t.coins.columns,data:t.dataIndex},on:{"on-current-change":t.gohref}}),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"favor"===t.basecion,expression:"basecion==='favor'"}],attrs:{"no-data-text":t.$t("common.nodata"),"highlight-row":"",id:"collect",columns:t.favorColumns,data:t.dataIndex},on:{"on-current-change":t.gohref}})],1)]),t._v(" "),s("PageFooter",{attrs:{curindex:"market"}})],1)},staticRenderFns:[]};var h=s("VU/8")(c,r,!1,function(t){s("2fln")},"data-v-322b66b5",null);e.default=h.exports}});